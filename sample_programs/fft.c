
// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers\n")
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);
struct futhark_u8_3d;
struct futhark_u8_3d *futhark_new_u8_3d(struct futhark_context *ctx, const
                                        uint8_t *data, int64_t dim0,
                                        int64_t dim1, int64_t dim2);
struct futhark_u8_3d *futhark_new_raw_u8_3d(struct futhark_context *ctx, const
                                            unsigned char *data, int64_t offset,
                                            int64_t dim0, int64_t dim1,
                                            int64_t dim2);
int futhark_free_u8_3d(struct futhark_context *ctx, struct futhark_u8_3d *arr);
int futhark_values_u8_3d(struct futhark_context *ctx, struct futhark_u8_3d *arr,
                         uint8_t *data);
unsigned char *futhark_values_raw_u8_3d(struct futhark_context *ctx,
                                        struct futhark_u8_3d *arr);
const int64_t *futhark_shape_u8_3d(struct futhark_context *ctx,
                                   struct futhark_u8_3d *arr);

// Opaque values


// Entry points
int futhark_entry_highpass_filter(struct futhark_context *ctx,
                                  struct futhark_u8_3d **out0, const
                                  int32_t in0, const struct futhark_u8_3d *in1);
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const int32_t in0, const
                       struct futhark_u8_3d *in1);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

static int lexical_realloc(char **error, unsigned char **ptr, size_t *old_size, size_t new_size) {
  unsigned char *new = realloc(*ptr, new_size);
  if (new == NULL) {
    *error = msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                       (long long) new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

// End of util.h.
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.
#include <getopt.h>
#include <ctype.h>
#include <inttypes.h>
#include <unistd.h>
// Start of values.h.

//// Text I/O

typedef int (*writer)(FILE*, const void*);
typedef int (*bin_reader)(void*);
typedef int (*str_reader)(const char *, void*);

struct array_reader {
  char* elems;
  int64_t n_elems_space;
  int64_t elem_size;
  int64_t n_elems_used;
  int64_t *shape;
  str_reader elem_reader;
};

static void skipspaces(FILE *f) {
  int c;
  do {
    c = getc(f);
  } while (isspace(c));

  if (c != EOF) {
    ungetc(c, f);
  }
}

static int constituent(char c) {
  return isalnum(c) || c == '.' || c == '-' || c == '+' || c == '_';
}

// Produces an empty token only on EOF.
static void next_token(FILE *f, char *buf, int bufsize) {
 start:
  skipspaces(f);

  int i = 0;
  while (i < bufsize) {
    int c = getc(f);
    buf[i] = (char)c;

    if (c == EOF) {
      buf[i] = 0;
      return;
    } else if (c == '-' && i == 1 && buf[0] == '-') {
      // Line comment, so skip to end of line and start over.
      for (; c != '\n' && c != EOF; c = getc(f));
      goto start;
    } else if (!constituent((char)c)) {
      if (i == 0) {
        // We permit single-character tokens that are not
        // constituents; this lets things like ']' and ',' be
        // tokens.
        buf[i+1] = 0;
        return;
      } else {
        ungetc(c, f);
        buf[i] = 0;
        return;
      }
    }

    i++;
  }

  buf[bufsize-1] = 0;
}

static int next_token_is(FILE *f, char *buf, int bufsize, const char* expected) {
  next_token(f, buf, bufsize);
  return strcmp(buf, expected) == 0;
}

static void remove_underscores(char *buf) {
  char *w = buf;

  for (char *r = buf; *r; r++) {
    if (*r != '_') {
      *w++ = *r;
    }
  }

  *w++ = 0;
}

static int read_str_elem(char *buf, struct array_reader *reader) {
  int ret;
  if (reader->n_elems_used == reader->n_elems_space) {
    reader->n_elems_space *= 2;
    reader->elems = (char*) realloc(reader->elems,
                                    (size_t)(reader->n_elems_space * reader->elem_size));
  }

  ret = reader->elem_reader(buf, reader->elems + reader->n_elems_used * reader->elem_size);

  if (ret == 0) {
    reader->n_elems_used++;
  }

  return ret;
}

static int read_str_array_elems(FILE *f,
                                char *buf, int bufsize,
                                struct array_reader *reader, int64_t dims) {
  int ret;
  int first = 1;
  char *knows_dimsize = (char*) calloc((size_t)dims, sizeof(char));
  int cur_dim = (int)dims-1;
  int64_t *elems_read_in_dim = (int64_t*) calloc((size_t)dims, sizeof(int64_t));

  while (1) {
    next_token(f, buf, bufsize);

    if (strcmp(buf, "]") == 0) {
      if (knows_dimsize[cur_dim]) {
        if (reader->shape[cur_dim] != elems_read_in_dim[cur_dim]) {
          ret = 1;
          break;
        }
      } else {
        knows_dimsize[cur_dim] = 1;
        reader->shape[cur_dim] = elems_read_in_dim[cur_dim];
      }
      if (cur_dim == 0) {
        ret = 0;
        break;
      } else {
        cur_dim--;
        elems_read_in_dim[cur_dim]++;
      }
    } else if (strcmp(buf, ",") == 0) {
      next_token(f, buf, bufsize);
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        first = 1;
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else if (cur_dim == dims - 1) {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
      } else {
        ret = 1;
        break;
      }
    } else if (strlen(buf) == 0) {
      // EOF
      ret = 1;
      break;
    } else if (first) {
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
        first = 0;
      }
    } else {
      ret = 1;
      break;
    }
  }

  free(knows_dimsize);
  free(elems_read_in_dim);
  return ret;
}

static int read_str_empty_array(FILE *f, char *buf, int bufsize,
                                const char *type_name, int64_t *shape, int64_t dims) {
  if (strlen(buf) == 0) {
    // EOF
    return 1;
  }

  if (strcmp(buf, "empty") != 0) {
    return 1;
  }

  if (!next_token_is(f, buf, bufsize, "(")) {
    return 1;
  }

  for (int i = 0; i < dims; i++) {
    if (!next_token_is(f, buf, bufsize, "[")) {
      return 1;
    }

    next_token(f, buf, bufsize);

    if (sscanf(buf, "%"SCNu64, (uint64_t*)&shape[i]) != 1) {
      return 1;
    }

    if (!next_token_is(f, buf, bufsize, "]")) {
      return 1;
    }
  }

  if (!next_token_is(f, buf, bufsize, type_name)) {
    return 1;
  }


  if (!next_token_is(f, buf, bufsize, ")")) {
    return 1;
  }

  // Check whether the array really is empty.
  for (int i = 0; i < dims; i++) {
    if (shape[i] == 0) {
      return 0;
    }
  }

  // Not an empty array!
  return 1;
}

static int read_str_array(FILE *f,
                          int64_t elem_size, str_reader elem_reader,
                          const char *type_name,
                          void **data, int64_t *shape, int64_t dims) {
  int ret;
  struct array_reader reader;
  char buf[100];

  int dims_seen;
  for (dims_seen = 0; dims_seen < dims; dims_seen++) {
    if (!next_token_is(f, buf, sizeof(buf), "[")) {
      break;
    }
  }

  if (dims_seen == 0) {
    return read_str_empty_array(f, buf, sizeof(buf), type_name, shape, dims);
  }

  if (dims_seen != dims) {
    return 1;
  }

  reader.shape = shape;
  reader.n_elems_used = 0;
  reader.elem_size = elem_size;
  reader.n_elems_space = 16;
  reader.elems = (char*) realloc(*data, (size_t)(elem_size*reader.n_elems_space));
  reader.elem_reader = elem_reader;

  ret = read_str_array_elems(f, buf, sizeof(buf), &reader, dims);

  *data = reader.elems;

  return ret;
}

#define READ_STR(MACRO, PTR, SUFFIX)                                   \
  remove_underscores(buf);                                              \
  int j;                                                                \
  if (sscanf(buf, "%"MACRO"%n", (PTR*)dest, &j) == 1) {                 \
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, SUFFIX) == 0);     \
  } else {                                                              \
    return 1;                                                           \
  }

static int read_str_i8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNi8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(int8_t*)dest = (int8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "i8") == 0);
  } else {
    return 1;
  }
}

static int read_str_u8(char *buf, void* dest) {
  // Some platforms (WINDOWS) does not support scanf %hhd or its
  // cousin, %SCNu8.  Read into int first to avoid corrupting
  // memory.
  //
  // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(uint8_t*)dest = (uint8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "u8") == 0);
  } else {
    return 1;
  }
}

static int read_str_i16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "i16");
}

static int read_str_u16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "u16");
}

static int read_str_i32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "i32");
}

static int read_str_u32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "u32");
}

static int read_str_i64(char *buf, void* dest) {
  READ_STR(SCNi64, int64_t, "i64");
}

static int read_str_u64(char *buf, void* dest) {
  // FIXME: This is not correct, as SCNu64 only permits decimal
  // literals.  However, SCNi64 does not handle very large numbers
  // correctly (it's really for signed numbers, so that's fair).
  READ_STR(SCNu64, uint64_t, "u64");
}

static int read_str_f16(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f16.nan") == 0) {
    *(uint16_t*)dest = float2halfbits(NAN);
    return 0;
  } else if (strcmp(buf, "f16.inf") == 0) {
    *(uint16_t*)dest = float2halfbits(INFINITY);
    return 0;
  } else if (strcmp(buf, "-f16.inf") == 0) {
    *(uint16_t*)dest = float2halfbits(-INFINITY);
    return 0;
  } else {
    int j;
    float x;
    if (sscanf(buf, "%f%n", &x, &j) == 1) {
      if (strcmp(buf+j, "") == 0 || strcmp(buf+j, "f16") == 0) {
        *(uint16_t*)dest = float2halfbits(x);
        return 0;
      }
    }
    return 1;
  }
}

static int read_str_f32(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f32.nan") == 0) {
    *(float*)dest = (float)NAN;
    return 0;
  } else if (strcmp(buf, "f32.inf") == 0) {
    *(float*)dest = (float)INFINITY;
    return 0;
  } else if (strcmp(buf, "-f32.inf") == 0) {
    *(float*)dest = (float)-INFINITY;
    return 0;
  } else {
    READ_STR("f", float, "f32");
  }
}

static int read_str_f64(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f64.nan") == 0) {
    *(double*)dest = (double)NAN;
    return 0;
  } else if (strcmp(buf, "f64.inf") == 0) {
    *(double*)dest = (double)INFINITY;
    return 0;
  } else if (strcmp(buf, "-f64.inf") == 0) {
    *(double*)dest = (double)-INFINITY;
    return 0;
  } else {
    READ_STR("lf", double, "f64");
  }
}

static int read_str_bool(char *buf, void* dest) {
  if (strcmp(buf, "true") == 0) {
    *(char*)dest = 1;
    return 0;
  } else if (strcmp(buf, "false") == 0) {
    *(char*)dest = 0;
    return 0;
  } else {
    return 1;
  }
}

static int write_str_i8(FILE *out, int8_t *src) {
  return fprintf(out, "%hhdi8", *src);
}

static int write_str_u8(FILE *out, uint8_t *src) {
  return fprintf(out, "%hhuu8", *src);
}

static int write_str_i16(FILE *out, int16_t *src) {
  return fprintf(out, "%hdi16", *src);
}

static int write_str_u16(FILE *out, uint16_t *src) {
  return fprintf(out, "%huu16", *src);
}

static int write_str_i32(FILE *out, int32_t *src) {
  return fprintf(out, "%di32", *src);
}

static int write_str_u32(FILE *out, uint32_t *src) {
  return fprintf(out, "%uu32", *src);
}

static int write_str_i64(FILE *out, int64_t *src) {
  return fprintf(out, "%"PRIi64"i64", *src);
}

static int write_str_u64(FILE *out, uint64_t *src) {
  return fprintf(out, "%"PRIu64"u64", *src);
}

static int write_str_f16(FILE *out, uint16_t *src) {
  float x = halfbits2float(*src);
  if (isnan(x)) {
    return fprintf(out, "f16.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f16.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f16.inf");
  } else {
    return fprintf(out, "%.6ff16", x);
  }
}

static int write_str_f32(FILE *out, float *src) {
  float x = *src;
  if (isnan(x)) {
    return fprintf(out, "f32.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f32.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f32.inf");
  } else {
    return fprintf(out, "%.6ff32", x);
  }
}

static int write_str_f64(FILE *out, double *src) {
  double x = *src;
  if (isnan(x)) {
    return fprintf(out, "f64.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f64.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f64.inf");
  } else {
    return fprintf(out, "%.6ff64", *src);
  }
}

static int write_str_bool(FILE *out, void *src) {
  return fprintf(out, *(char*)src ? "true" : "false");
}

//// Binary I/O

#define BINARY_FORMAT_VERSION 2
#define IS_BIG_ENDIAN (!*(unsigned char *)&(uint16_t){1})

static void flip_bytes(size_t elem_size, unsigned char *elem) {
  for (size_t j=0; j<elem_size/2; j++) {
    unsigned char head = elem[j];
    size_t tail_index = elem_size-1-j;
    elem[j] = elem[tail_index];
    elem[tail_index] = head;
  }
}

// On Windows we need to explicitly set the file mode to not mangle
// newline characters.  On *nix there is no difference.
#ifdef _WIN32
#include <io.h>
#include <fcntl.h>
static void set_binary_mode(FILE *f) {
  setmode(fileno(f), O_BINARY);
}
#else
static void set_binary_mode(FILE *f) {
  (void)f;
}
#endif

static int read_byte(FILE *f, void* dest) {
  size_t num_elems_read = fread(dest, 1, 1, f);
  return num_elems_read == 1 ? 0 : 1;
}

//// Types

struct primtype_info_t {
  const char binname[4]; // Used for parsing binary data.
  const char* type_name; // Same name as in Futhark.
  const int64_t size; // in bytes
  const writer write_str; // Write in text format.
  const str_reader read_str; // Read in text format.
};

static const struct primtype_info_t i8_info =
  {.binname = "  i8", .type_name = "i8",   .size = 1,
   .write_str = (writer)write_str_i8, .read_str = (str_reader)read_str_i8};
static const struct primtype_info_t i16_info =
  {.binname = " i16", .type_name = "i16",  .size = 2,
   .write_str = (writer)write_str_i16, .read_str = (str_reader)read_str_i16};
static const struct primtype_info_t i32_info =
  {.binname = " i32", .type_name = "i32",  .size = 4,
   .write_str = (writer)write_str_i32, .read_str = (str_reader)read_str_i32};
static const struct primtype_info_t i64_info =
  {.binname = " i64", .type_name = "i64",  .size = 8,
   .write_str = (writer)write_str_i64, .read_str = (str_reader)read_str_i64};
static const struct primtype_info_t u8_info =
  {.binname = "  u8", .type_name = "u8",   .size = 1,
   .write_str = (writer)write_str_u8, .read_str = (str_reader)read_str_u8};
static const struct primtype_info_t u16_info =
  {.binname = " u16", .type_name = "u16",  .size = 2,
   .write_str = (writer)write_str_u16, .read_str = (str_reader)read_str_u16};
static const struct primtype_info_t u32_info =
  {.binname = " u32", .type_name = "u32",  .size = 4,
   .write_str = (writer)write_str_u32, .read_str = (str_reader)read_str_u32};
static const struct primtype_info_t u64_info =
  {.binname = " u64", .type_name = "u64",  .size = 8,
   .write_str = (writer)write_str_u64, .read_str = (str_reader)read_str_u64};
static const struct primtype_info_t f16_info =
  {.binname = " f16", .type_name = "f16",  .size = 2,
   .write_str = (writer)write_str_f16, .read_str = (str_reader)read_str_f16};
static const struct primtype_info_t f32_info =
  {.binname = " f32", .type_name = "f32",  .size = 4,
   .write_str = (writer)write_str_f32, .read_str = (str_reader)read_str_f32};
static const struct primtype_info_t f64_info =
  {.binname = " f64", .type_name = "f64",  .size = 8,
   .write_str = (writer)write_str_f64, .read_str = (str_reader)read_str_f64};
static const struct primtype_info_t bool_info =
  {.binname = "bool", .type_name = "bool", .size = 1,
   .write_str = (writer)write_str_bool, .read_str = (str_reader)read_str_bool};

static const struct primtype_info_t* primtypes[] = {
  &i8_info, &i16_info, &i32_info, &i64_info,
  &u8_info, &u16_info, &u32_info, &u64_info,
  &f16_info, &f32_info, &f64_info,
  &bool_info,
  NULL // NULL-terminated
};

// General value interface.  All endian business taken care of at
// lower layers.

static int read_is_binary(FILE *f) {
  skipspaces(f);
  int c = getc(f);
  if (c == 'b') {
    int8_t bin_version;
    int ret = read_byte(f, &bin_version);

    if (ret != 0) { futhark_panic(1, "binary-input: could not read version.\n"); }

    if (bin_version != BINARY_FORMAT_VERSION) {
      futhark_panic(1, "binary-input: File uses version %i, but I only understand version %i.\n",
            bin_version, BINARY_FORMAT_VERSION);
    }

    return 1;
  }
  ungetc(c, f);
  return 0;
}

static const struct primtype_info_t* read_bin_read_type_enum(FILE *f) {
  char read_binname[4];

  int num_matched = fscanf(f, "%4c", read_binname);
  if (num_matched != 1) { futhark_panic(1, "binary-input: Couldn't read element type.\n"); }

  const struct primtype_info_t **type = primtypes;

  for (; *type != NULL; type++) {
    // I compare the 4 characters manually instead of using strncmp because
    // this allows any value to be used, also NULL bytes
    if (memcmp(read_binname, (*type)->binname, 4) == 0) {
      return *type;
    }
  }
  futhark_panic(1, "binary-input: Did not recognize the type '%s'.\n", read_binname);
  return NULL;
}

static void read_bin_ensure_scalar(FILE *f, const struct primtype_info_t *expected_type) {
  int8_t bin_dims;
  int ret = read_byte(f, &bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != 0) {
    futhark_panic(1, "binary-input: Expected scalar (0 dimensions), but got array with %i dimensions.\n",
          bin_dims);
  }

  const struct primtype_info_t *bin_type = read_bin_read_type_enum(f);
  if (bin_type != expected_type) {
    futhark_panic(1, "binary-input: Expected scalar of type %s but got scalar of type %s.\n",
          expected_type->type_name,
          bin_type->type_name);
  }
}

//// High-level interface

static int read_bin_array(FILE *f,
                          const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  int ret;

  int8_t bin_dims;
  ret = read_byte(f, &bin_dims);
  if (ret != 0) { futhark_panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != dims) {
    futhark_panic(1, "binary-input: Expected %i dimensions, but got array with %i dimensions.\n",
          dims, bin_dims);
  }

  const struct primtype_info_t *bin_primtype = read_bin_read_type_enum(f);
  if (expected_type != bin_primtype) {
    futhark_panic(1, "binary-input: Expected %iD-array with element type '%s' but got %iD-array with element type '%s'.\n",
          dims, expected_type->type_name, dims, bin_primtype->type_name);
  }

  int64_t elem_count = 1;
  for (int i=0; i<dims; i++) {
    int64_t bin_shape;
    ret = (int)fread(&bin_shape, sizeof(bin_shape), 1, f);
    if (ret != 1) {
      futhark_panic(1, "binary-input: Couldn't read size for dimension %i of array.\n", i);
    }
    if (IS_BIG_ENDIAN) {
      flip_bytes(sizeof(bin_shape), (unsigned char*) &bin_shape);
    }
    elem_count *= bin_shape;
    shape[i] = bin_shape;
  }

  int64_t elem_size = expected_type->size;
  void* tmp = realloc(*data, (size_t)(elem_count * elem_size));
  if (tmp == NULL) {
    futhark_panic(1, "binary-input: Failed to allocate array of size %i.\n",
          elem_count * elem_size);
  }
  *data = tmp;

  int64_t num_elems_read = (int64_t)fread(*data, (size_t)elem_size, (size_t)elem_count, f);
  if (num_elems_read != elem_count) {
    futhark_panic(1, "binary-input: tried to read %i elements of an array, but only got %i elements.\n",
          elem_count, num_elems_read);
  }

  // If we're on big endian platform we must change all multibyte elements
  // from using little endian to big endian
  if (IS_BIG_ENDIAN && elem_size != 1) {
    flip_bytes((size_t)elem_size, (unsigned char*) *data);
  }

  return 0;
}

static int read_array(FILE *f, const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  if (!read_is_binary(f)) {
    return read_str_array(f, expected_type->size, (str_reader)expected_type->read_str, expected_type->type_name, data, shape, dims);
  } else {
    return read_bin_array(f, expected_type, data, shape, dims);
  }
}

static int end_of_input(FILE *f) {
  skipspaces(f);
  char token[2];
  next_token(f, token, sizeof(token));
  if (strcmp(token, "") == 0) {
    return 0;
  } else {
    return 1;
  }
}

static int write_str_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  if (rank==0) {
    elem_type->write_str(out, (const void*)data);
  } else {
    int64_t len = (int64_t)shape[0];
    int64_t slice_size = 1;

    int64_t elem_size = elem_type->size;
    for (int8_t i = 1; i < rank; i++) {
      slice_size *= shape[i];
    }

    if (len*slice_size == 0) {
      fprintf(out, "empty(");
      for (int64_t i = 0; i < rank; i++) {
        fprintf(out, "[%"PRIi64"]", shape[i]);
      }
      fprintf(out, "%s", elem_type->type_name);
      fprintf(out, ")");
    } else if (rank==1) {
      fputc('[', out);
      for (int64_t i = 0; i < len; i++) {
        elem_type->write_str(out, (const void*) (data + i * elem_size));
        if (i != len-1) {
          fprintf(out, ", ");
        }
      }
      fputc(']', out);
    } else {
      fputc('[', out);
      for (int64_t i = 0; i < len; i++) {
        write_str_array(out, elem_type, data + i * slice_size * elem_size, shape+1, rank-1);
        if (i != len-1) {
          fprintf(out, ", ");
        }
      }
      fputc(']', out);
    }
  }
  return 0;
}

static int write_bin_array(FILE *out,
                           const struct primtype_info_t *elem_type,
                           const unsigned char *data,
                           const int64_t *shape,
                           int8_t rank) {
  int64_t num_elems = 1;
  for (int64_t i = 0; i < rank; i++) {
    num_elems *= shape[i];
  }

  fputc('b', out);
  fputc((char)BINARY_FORMAT_VERSION, out);
  fwrite(&rank, sizeof(int8_t), 1, out);
  fwrite(elem_type->binname, 4, 1, out);
  if (shape != NULL) {
    fwrite(shape, sizeof(int64_t), (size_t)rank, out);
  }

  if (IS_BIG_ENDIAN) {
    for (int64_t i = 0; i < num_elems; i++) {
      const unsigned char *elem = data+i*elem_type->size;
      for (int64_t j = 0; j < elem_type->size; j++) {
        fwrite(&elem[elem_type->size-j], 1, 1, out);
      }
    }
  } else {
    fwrite(data, (size_t)elem_type->size, (size_t)num_elems, out);
  }

  return 0;
}

static int write_array(FILE *out, int write_binary,
                       const struct primtype_info_t *elem_type,
                       const void *data,
                       const int64_t *shape,
                       const int8_t rank) {
  if (write_binary) {
    return write_bin_array(out, elem_type, data, shape, rank);
  } else {
    return write_str_array(out, elem_type, data, shape, rank);
  }
}

static int read_scalar(FILE *f,
                       const struct primtype_info_t *expected_type, void *dest) {
  if (!read_is_binary(f)) {
    char buf[100];
    next_token(f, buf, sizeof(buf));
    return expected_type->read_str(buf, dest);
  } else {
    read_bin_ensure_scalar(f, expected_type);
    size_t elem_size = (size_t)expected_type->size;
    size_t num_elems_read = fread(dest, elem_size, 1, f);
    if (IS_BIG_ENDIAN) {
      flip_bytes(elem_size, (unsigned char*) dest);
    }
    return num_elems_read == 1 ? 0 : 1;
  }
}

static int write_scalar(FILE *out, int write_binary, const struct primtype_info_t *type, void *src) {
  if (write_binary) {
    return write_bin_array(out, type, src, NULL, 0);
  } else {
    return type->write_str(out, src);
  }
}

// End of values.h.

static int binary_output = 0;
static int print_result = 1;
static FILE *runtime_file;
static int perform_warmup = 0;
static int num_runs = 1;
static const char *entry_point = "main";
// Start of tuning.h.

static char* load_tuning_file(const char *fname,
                              void *cfg,
                              int (*set_tuning_param)(void*, const char*, size_t)) {
  const int max_line_len = 1024;
  char* line = (char*) malloc(max_line_len);

  FILE *f = fopen(fname, "r");

  if (f == NULL) {
    snprintf(line, max_line_len, "Cannot open file: %s", strerror(errno));
    return line;
  }

  int lineno = 0;
  while (fgets(line, max_line_len, f) != NULL) {
    lineno++;
    char *eql = strstr(line, "=");
    if (eql) {
      *eql = 0;
      int value = atoi(eql+1);
      if (set_tuning_param(cfg, line, (size_t)value) != 0) {
        char* err = (char*) malloc(max_line_len + 50);
        snprintf(err, max_line_len + 50, "Unknown name '%s' on line %d.", line, lineno);
        free(line);
        return err;
      }
    } else {
      snprintf(line, max_line_len, "Invalid line %d (must be of form 'name=int').",
               lineno);
      return line;
    }
  }

  free(line);

  return NULL;
}

// End of tuning.h.

int parse_options(struct futhark_context_config *cfg, int argc,
                  char *const argv[])
{
    int ch;
    static struct option long_options[] = {{"write-runtime-to",
                                            required_argument, NULL, 1},
                                           {"runs", required_argument, NULL, 2},
                                           {"debugging", no_argument, NULL, 3},
                                           {"log", no_argument, NULL, 4},
                                           {"entry-point", required_argument,
                                            NULL, 5}, {"binary-output",
                                                       no_argument, NULL, 6},
                                           {"no-print-result", no_argument,
                                            NULL, 7}, {"help", no_argument,
                                                       NULL, 8},
                                           {"print-params", no_argument, NULL,
                                            9}, {"param", required_argument,
                                                 NULL, 10}, {"tuning",
                                                             required_argument,
                                                             NULL, 11}, {0, 0,
                                                                         0, 0}};
    static char *option_descriptions =
                "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -n/--no-print-result       Do not print the program result.\n  -h/--help                  Print help information and exit.\n  --print-params             Print all tuning parameters that can be set with --param or --tuning.\n  --param ASSIGNMENT         Set a tuning parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n";
    
    while ((ch = getopt_long(argc, argv, ":t:r:DLe:bnh", long_options, NULL)) !=
           -1) {
        if (ch == 1 || ch == 't') {
            runtime_file = fopen(optarg, "w");
            if (runtime_file == NULL)
                futhark_panic(1, "Cannot open %s: %s\n", optarg,
                              strerror(errno));
        }
        if (ch == 2 || ch == 'r') {
            num_runs = atoi(optarg);
            perform_warmup = 1;
            if (num_runs <= 0)
                futhark_panic(1, "Need a positive number of runs, not %s\n",
                              optarg);
        }
        if (ch == 3 || ch == 'D')
            futhark_context_config_set_debugging(cfg, 1);
        if (ch == 4 || ch == 'L')
            futhark_context_config_set_logging(cfg, 1);
        if (ch == 5 || ch == 'e') {
            if (entry_point != NULL)
                entry_point = optarg;
        }
        if (ch == 6 || ch == 'b')
            binary_output = 1;
        if (ch == 7 || ch == 'n')
            print_result = 0;
        if (ch == 8 || ch == 'h') {
            printf("Usage: %s [OPTION]...\nOptions:\n\n%s\nFor more information, consult the Futhark User's Guide or the man pages.\n",
                   fut_progname, option_descriptions);
            exit(0);
        }
        if (ch == 9) {
            int n = futhark_get_tuning_param_count();
            
            for (int i = 0; i < n; i++)
                printf("%s (%s)\n", futhark_get_tuning_param_name(i),
                       futhark_get_tuning_param_class(i));
            exit(0);
        }
        if (ch == 10) {
            char *name = optarg;
            char *equals = strstr(optarg, "=");
            char *value_str = equals != NULL ? equals + 1 : optarg;
            int value = atoi(value_str);
            
            if (equals != NULL) {
                *equals = 0;
                if (futhark_context_config_set_tuning_param(cfg, name,
                                                            (size_t) value) !=
                    0)
                    futhark_panic(1, "Unknown size: %s\n", name);
            } else
                futhark_panic(1, "Invalid argument for size option: %s\n",
                              optarg);
        }
        if (ch == 11) {
            char *ret = load_tuning_file(optarg, cfg, (int (*)(void *, const
                                                               char *,
                                                               size_t)) futhark_context_config_set_tuning_param);
            
            if (ret != NULL)
                futhark_panic(1, "When loading tuning from '%s': %s\n", optarg,
                              ret);
        }
        if (ch == ':')
            futhark_panic(-1, "Missing argument for option %s\n", argv[optind -
                                                                       1]);
        if (ch == '?') {
            fprintf(stderr, "Usage: %s [OPTIONS]...\nOptions:\n\n%s\n",
                    fut_progname,
                    "  -t/--write-runtime-to FILE Print the time taken to execute the program to the indicated file, an integral number of microseconds.\n  -r/--runs INT              Perform NUM runs of the program.\n  -D/--debugging             Perform possibly expensive internal correctness checks and verbose logging.\n  -L/--log                   Print various low-overhead logging information to stderr while running.\n  -e/--entry-point NAME      The entry point to run. Defaults to main.\n  -b/--binary-output         Print the program result in the binary output format.\n  -n/--no-print-result       Do not print the program result.\n  -h/--help                  Print help information and exit.\n  --print-params             Print all tuning parameters that can be set with --param or --tuning.\n  --param ASSIGNMENT         Set a tuning parameter to the given value.\n  --tuning FILE              Read size=value assignments from the given file.\n");
            futhark_panic(1, "Unknown option: %s\n", argv[optind - 1]);
        }
    }
    return optind;
}
static void futrts_cli_entry_highpass_filter(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    // Declare and read input.
    set_binary_mode(stdin);
    
    int32_t read_value_0;
    
    if (read_scalar(stdin, &i32_info, &read_value_0) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      0, "i32", strerror(errno));
    ;
    
    struct futhark_u8_3d * read_value_1;
    int64_t read_shape_1[3];
    uint8_t *read_arr_1 = NULL;
    
    errno = 0;
    if (read_array(stdin, &u8_info, (void **) &read_arr_1, read_shape_1, 3) !=
        0)
        futhark_panic(1, "Cannot read input #%d of type %s (errno: %s).\n", 1,
                      "[][][]u8", strerror(errno));
    if (end_of_input(stdin) != 0)
        futhark_panic(1,
                      "Expected EOF on stdin after reading input for \"%s\".\n",
                      "highpass_filter");
    
    struct futhark_u8_3d * result_0;
    
    if (perform_warmup) {
        int r;
        
        ;
        assert((read_value_1 = futhark_new_u8_3d(ctx, read_arr_1,
                                                 read_shape_1[0],
                                                 read_shape_1[1],
                                                 read_shape_1[2])) != NULL);
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_highpass_filter(ctx, &result_0, read_value_0,
                                          read_value_1);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        assert(futhark_free_u8_3d(ctx, read_value_1) == 0);
        assert(futhark_free_u8_3d(ctx, result_0) == 0);
    }
    time_runs = 1;
    // Proper run.
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        assert((read_value_1 = futhark_new_u8_3d(ctx, read_arr_1,
                                                 read_shape_1[0],
                                                 read_shape_1[1],
                                                 read_shape_1[2])) != NULL);
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_highpass_filter(ctx, &result_0, read_value_0,
                                          read_value_1);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        assert(futhark_free_u8_3d(ctx, read_value_1) == 0);
        if (run < num_runs - 1) {
            assert(futhark_free_u8_3d(ctx, result_0) == 0);
        }
    }
    ;
    free(read_arr_1);
    if (print_result) {
        // Print the final result.
        if (binary_output)
            set_binary_mode(stdout);
        {
            uint8_t *arr = calloc(futhark_shape_u8_3d(ctx, result_0)[0] *
                                  futhark_shape_u8_3d(ctx, result_0)[1] *
                                  futhark_shape_u8_3d(ctx, result_0)[2],
                                  u8_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_u8_3d(ctx, result_0, arr) == 0);
            write_array(stdout, binary_output, &u8_info, arr,
                        futhark_shape_u8_3d(ctx, result_0), 3);
            free(arr);
        }
        printf("\n");
    }
    assert(futhark_free_u8_3d(ctx, result_0) == 0);
}
static void futrts_cli_entry_main(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    // Declare and read input.
    set_binary_mode(stdin);
    
    int32_t read_value_0;
    
    if (read_scalar(stdin, &i32_info, &read_value_0) != 0)
        futhark_panic(1,
                      "Error when reading input #%d of type %s (errno: %s).\n",
                      0, "i32", strerror(errno));
    ;
    
    struct futhark_u8_3d * read_value_1;
    int64_t read_shape_1[3];
    uint8_t *read_arr_1 = NULL;
    
    errno = 0;
    if (read_array(stdin, &u8_info, (void **) &read_arr_1, read_shape_1, 3) !=
        0)
        futhark_panic(1, "Cannot read input #%d of type %s (errno: %s).\n", 1,
                      "[][][]u8", strerror(errno));
    if (end_of_input(stdin) != 0)
        futhark_panic(1,
                      "Expected EOF on stdin after reading input for \"%s\".\n",
                      "main");
    
    struct futhark_f32_2d * result_0;
    struct futhark_f32_2d * result_1;
    struct futhark_f32_2d * result_2;
    
    if (perform_warmup) {
        int r;
        
        ;
        assert((read_value_1 = futhark_new_u8_3d(ctx, read_arr_1,
                                                 read_shape_1[0],
                                                 read_shape_1[1],
                                                 read_shape_1[2])) != NULL);
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_0, &result_1, &result_2,
                               read_value_0, read_value_1);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        assert(futhark_free_u8_3d(ctx, read_value_1) == 0);
        assert(futhark_free_f32_2d(ctx, result_0) == 0);
        assert(futhark_free_f32_2d(ctx, result_1) == 0);
        assert(futhark_free_f32_2d(ctx, result_2) == 0);
    }
    time_runs = 1;
    // Proper run.
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        assert((read_value_1 = futhark_new_u8_3d(ctx, read_arr_1,
                                                 read_shape_1[0],
                                                 read_shape_1[1],
                                                 read_shape_1[2])) != NULL);
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_main(ctx, &result_0, &result_1, &result_2,
                               read_value_0, read_value_1);
        if (r != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            futhark_panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL) {
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
            fflush(runtime_file);
        }
        ;
        assert(futhark_free_u8_3d(ctx, read_value_1) == 0);
        if (run < num_runs - 1) {
            assert(futhark_free_f32_2d(ctx, result_0) == 0);
            assert(futhark_free_f32_2d(ctx, result_1) == 0);
            assert(futhark_free_f32_2d(ctx, result_2) == 0);
        }
    }
    ;
    free(read_arr_1);
    if (print_result) {
        // Print the final result.
        if (binary_output)
            set_binary_mode(stdout);
        {
            float *arr = calloc(futhark_shape_f32_2d(ctx, result_0)[0] *
                                futhark_shape_f32_2d(ctx, result_0)[1],
                                f32_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_f32_2d(ctx, result_0, arr) == 0);
            write_array(stdout, binary_output, &f32_info, arr,
                        futhark_shape_f32_2d(ctx, result_0), 2);
            free(arr);
        }
        printf("\n");
        {
            float *arr = calloc(futhark_shape_f32_2d(ctx, result_1)[0] *
                                futhark_shape_f32_2d(ctx, result_1)[1],
                                f32_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_f32_2d(ctx, result_1, arr) == 0);
            write_array(stdout, binary_output, &f32_info, arr,
                        futhark_shape_f32_2d(ctx, result_1), 2);
            free(arr);
        }
        printf("\n");
        {
            float *arr = calloc(futhark_shape_f32_2d(ctx, result_2)[0] *
                                futhark_shape_f32_2d(ctx, result_2)[1],
                                f32_info.size);
            
            assert(arr != NULL);
            assert(futhark_values_f32_2d(ctx, result_2, arr) == 0);
            write_array(stdout, binary_output, &f32_info, arr,
                        futhark_shape_f32_2d(ctx, result_2), 2);
            free(arr);
        }
        printf("\n");
    }
    assert(futhark_free_f32_2d(ctx, result_0) == 0);
    assert(futhark_free_f32_2d(ctx, result_1) == 0);
    assert(futhark_free_f32_2d(ctx, result_2) == 0);
}
typedef void entry_point_fun(struct futhark_context *);
struct entry_point_entry {
    const char *name;
    entry_point_fun *fun;
};
int main(int argc, char **argv)
{
    fut_progname = argv[0];
    
    struct futhark_context_config *cfg = futhark_context_config_new();
    
    assert(cfg != NULL);
    
    int parsed_options = parse_options(cfg, argc, argv);
    
    argc -= parsed_options;
    argv += parsed_options;
    if (argc != 0)
        futhark_panic(1, "Excess non-option: %s\n", argv[0]);
    
    struct futhark_context *ctx = futhark_context_new(cfg);
    
    assert(ctx != NULL);
    
    char *error = futhark_context_get_error(ctx);
    
    if (error != NULL)
        futhark_panic(1, "%s", error);
    
    struct entry_point_entry entry_points[] = {{.name ="highpass_filter", .fun =
                                                futrts_cli_entry_highpass_filter},
                                               {.name ="main", .fun =
                                                futrts_cli_entry_main}};
    
    if (entry_point != NULL) {
        int num_entry_points = sizeof(entry_points) / sizeof(entry_points[0]);
        entry_point_fun *entry_point_fun = NULL;
        
        for (int i = 0; i < num_entry_points; i++) {
            if (strcmp(entry_points[i].name, entry_point) == 0) {
                entry_point_fun = entry_points[i].fun;
                break;
            }
        }
        if (entry_point_fun == NULL) {
            fprintf(stderr,
                    "No entry point '%s'.  Select another with --entry-point.  Options are:\n",
                    entry_point);
            for (int i = 0; i < num_entry_points; i++)
                fprintf(stderr, "%s\n", entry_points[i].name);
            return 1;
        }
        if (isatty(fileno(stdin))) {
            fprintf(stderr, "Reading input from TTY.\n");
            fprintf(stderr,
                    "Send EOF (CTRL-d) after typing all input values.\n");
        }
        entry_point_fun(ctx);
        if (runtime_file != NULL)
            fclose(runtime_file);
        
        char *report = futhark_context_report(ctx);
        
        fputs(report, stderr);
        free(report);
    }
    futhark_context_free(ctx);
    futhark_context_config_free(cfg);
    return 0;
}

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x;
}

static inline bool itob_i16_bool(int16_t x) {
  return x;
}

static inline bool itob_i32_bool(int32_t x) {
  return x;
}

static inline bool itob_i64_bool(int64_t x) {
  return x;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#else // Not OpenCL or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

static inline int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

static inline uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f32_bool(float x) {
  return x != 0;
}

static inline float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#else // Not OpenCL, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}

#ifdef FUTHARK_F64_ENABLED

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600)
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

static inline bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

static inline f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16

#ifdef __OPENCL_VERSION__
static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0) - (x < 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}

#endif


// End of scalar_f16.h.

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg,
                                            const char *param_name,
                                            size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        char *old_error = ctx->error;
        
        ctx->error =
            msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s",
                      "default space", (long long) size,
                      (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

static int futrts_entry_highpass_filter(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_21321,
                                        struct memblock img_mem_17070,
                                        int64_t n_11475, int64_t m_11476,
                                        int32_t cutoff_11477);
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_21461,
                             struct memblock *mem_out_p_21462,
                             struct memblock *mem_out_p_21463,
                             struct memblock img_mem_17070, int64_t n_11006,
                             int64_t m_11007, int32_t cutoff_11008);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_u8_3d {
    struct memblock mem;
    int64_t shape[3];
};
struct futhark_u8_3d *futhark_new_u8_3d(struct futhark_context *ctx, const
                                        uint8_t *data, int64_t dim0,
                                        int64_t dim1, int64_t dim2)
{
    struct futhark_u8_3d *bad = NULL;
    struct futhark_u8_3d *arr =
                         (struct futhark_u8_3d *) malloc(sizeof(struct futhark_u8_3d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * dim2 * 1, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    arr->shape[2] = dim2;
    if ((size_t) (dim0 * dim1 * dim2) * 1 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1 * dim2) * 1);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_u8_3d *futhark_new_raw_u8_3d(struct futhark_context *ctx, const
                                            unsigned char *data, int64_t offset,
                                            int64_t dim0, int64_t dim1,
                                            int64_t dim2)
{
    struct futhark_u8_3d *bad = NULL;
    struct futhark_u8_3d *arr =
                         (struct futhark_u8_3d *) malloc(sizeof(struct futhark_u8_3d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * dim2 * 1, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    arr->shape[2] = dim2;
    if ((size_t) (dim0 * dim1 * dim2) * 1 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1 * dim2) *
                1);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_u8_3d(struct futhark_context *ctx, struct futhark_u8_3d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_u8_3d(struct futhark_context *ctx, struct futhark_u8_3d *arr,
                         uint8_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1] * arr->shape[2]) * 1 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1] *
                                                      arr->shape[2]) * 1);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_u8_3d(struct futhark_context *ctx,
                                        struct futhark_u8_3d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_u8_3d(struct futhark_context *ctx,
                                   struct futhark_u8_3d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              unsigned char *data,
                                              int64_t offset, int64_t dim0,
                                              int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                         struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}

static int futrts_entry_highpass_filter(struct futhark_context *ctx,
                                        struct memblock *mem_out_p_21321,
                                        struct memblock img_mem_17070,
                                        int64_t n_11475, int64_t m_11476,
                                        int32_t cutoff_11477)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_17073_cached_sizze_21322 = 0;
    unsigned char *mem_17073 = NULL;
    size_t mem_17088_cached_sizze_21323 = 0;
    unsigned char *mem_17088 = NULL;
    size_t mem_17103_cached_sizze_21324 = 0;
    unsigned char *mem_17103 = NULL;
    size_t mem_17118_cached_sizze_21325 = 0;
    unsigned char *mem_17118 = NULL;
    size_t mem_17133_cached_sizze_21326 = 0;
    unsigned char *mem_17133 = NULL;
    size_t mem_17137_cached_sizze_21327 = 0;
    unsigned char *mem_17137 = NULL;
    size_t mem_17141_cached_sizze_21328 = 0;
    unsigned char *mem_17141 = NULL;
    size_t mem_17145_cached_sizze_21329 = 0;
    unsigned char *mem_17145 = NULL;
    size_t mem_17149_cached_sizze_21330 = 0;
    unsigned char *mem_17149 = NULL;
    size_t mem_17153_cached_sizze_21331 = 0;
    unsigned char *mem_17153 = NULL;
    size_t mem_17157_cached_sizze_21332 = 0;
    unsigned char *mem_17157 = NULL;
    size_t mem_17228_cached_sizze_21333 = 0;
    unsigned char *mem_17228 = NULL;
    size_t mem_17230_cached_sizze_21334 = 0;
    unsigned char *mem_17230 = NULL;
    size_t mem_17232_cached_sizze_21335 = 0;
    unsigned char *mem_17232 = NULL;
    size_t mem_17271_cached_sizze_21336 = 0;
    unsigned char *mem_17271 = NULL;
    size_t mem_17286_cached_sizze_21337 = 0;
    unsigned char *mem_17286 = NULL;
    size_t mem_17301_cached_sizze_21338 = 0;
    unsigned char *mem_17301 = NULL;
    size_t mem_17393_cached_sizze_21339 = 0;
    unsigned char *mem_17393 = NULL;
    size_t mem_17408_cached_sizze_21340 = 0;
    unsigned char *mem_17408 = NULL;
    size_t mem_17411_cached_sizze_21341 = 0;
    unsigned char *mem_17411 = NULL;
    size_t mem_17414_cached_sizze_21342 = 0;
    unsigned char *mem_17414 = NULL;
    size_t mem_17417_cached_sizze_21343 = 0;
    unsigned char *mem_17417 = NULL;
    size_t mem_17420_cached_sizze_21344 = 0;
    unsigned char *mem_17420 = NULL;
    size_t mem_17423_cached_sizze_21345 = 0;
    unsigned char *mem_17423 = NULL;
    size_t mem_17570_cached_sizze_21346 = 0;
    unsigned char *mem_17570 = NULL;
    size_t mem_17585_cached_sizze_21347 = 0;
    unsigned char *mem_17585 = NULL;
    size_t mem_17588_cached_sizze_21348 = 0;
    unsigned char *mem_17588 = NULL;
    size_t mem_17591_cached_sizze_21349 = 0;
    unsigned char *mem_17591 = NULL;
    size_t mem_17594_cached_sizze_21350 = 0;
    unsigned char *mem_17594 = NULL;
    size_t mem_17597_cached_sizze_21351 = 0;
    unsigned char *mem_17597 = NULL;
    size_t mem_17600_cached_sizze_21352 = 0;
    unsigned char *mem_17600 = NULL;
    size_t mem_17747_cached_sizze_21353 = 0;
    unsigned char *mem_17747 = NULL;
    size_t mem_17762_cached_sizze_21354 = 0;
    unsigned char *mem_17762 = NULL;
    size_t mem_17765_cached_sizze_21355 = 0;
    unsigned char *mem_17765 = NULL;
    size_t mem_17768_cached_sizze_21356 = 0;
    unsigned char *mem_17768 = NULL;
    size_t mem_17771_cached_sizze_21357 = 0;
    unsigned char *mem_17771 = NULL;
    size_t mem_17774_cached_sizze_21358 = 0;
    unsigned char *mem_17774 = NULL;
    size_t mem_17777_cached_sizze_21359 = 0;
    unsigned char *mem_17777 = NULL;
    size_t mem_17940_cached_sizze_21360 = 0;
    unsigned char *mem_17940 = NULL;
    size_t mem_17955_cached_sizze_21361 = 0;
    unsigned char *mem_17955 = NULL;
    size_t mem_17970_cached_sizze_21362 = 0;
    unsigned char *mem_17970 = NULL;
    size_t mem_17986_cached_sizze_21363 = 0;
    unsigned char *mem_17986 = NULL;
    size_t mem_17990_cached_sizze_21364 = 0;
    unsigned char *mem_17990 = NULL;
    size_t mem_17994_cached_sizze_21365 = 0;
    unsigned char *mem_17994 = NULL;
    size_t mem_17998_cached_sizze_21366 = 0;
    unsigned char *mem_17998 = NULL;
    size_t mem_18002_cached_sizze_21367 = 0;
    unsigned char *mem_18002 = NULL;
    size_t mem_18006_cached_sizze_21368 = 0;
    unsigned char *mem_18006 = NULL;
    size_t mem_18121_cached_sizze_21369 = 0;
    unsigned char *mem_18121 = NULL;
    size_t mem_18136_cached_sizze_21370 = 0;
    unsigned char *mem_18136 = NULL;
    size_t mem_18139_cached_sizze_21371 = 0;
    unsigned char *mem_18139 = NULL;
    size_t mem_18142_cached_sizze_21372 = 0;
    unsigned char *mem_18142 = NULL;
    size_t mem_18145_cached_sizze_21373 = 0;
    unsigned char *mem_18145 = NULL;
    size_t mem_18148_cached_sizze_21374 = 0;
    unsigned char *mem_18148 = NULL;
    size_t mem_18151_cached_sizze_21375 = 0;
    unsigned char *mem_18151 = NULL;
    size_t mem_18300_cached_sizze_21376 = 0;
    unsigned char *mem_18300 = NULL;
    size_t mem_18315_cached_sizze_21377 = 0;
    unsigned char *mem_18315 = NULL;
    size_t mem_18318_cached_sizze_21378 = 0;
    unsigned char *mem_18318 = NULL;
    size_t mem_18321_cached_sizze_21379 = 0;
    unsigned char *mem_18321 = NULL;
    size_t mem_18324_cached_sizze_21380 = 0;
    unsigned char *mem_18324 = NULL;
    size_t mem_18327_cached_sizze_21381 = 0;
    unsigned char *mem_18327 = NULL;
    size_t mem_18330_cached_sizze_21382 = 0;
    unsigned char *mem_18330 = NULL;
    size_t mem_18479_cached_sizze_21383 = 0;
    unsigned char *mem_18479 = NULL;
    size_t mem_18494_cached_sizze_21384 = 0;
    unsigned char *mem_18494 = NULL;
    size_t mem_18497_cached_sizze_21385 = 0;
    unsigned char *mem_18497 = NULL;
    size_t mem_18500_cached_sizze_21386 = 0;
    unsigned char *mem_18500 = NULL;
    size_t mem_18503_cached_sizze_21387 = 0;
    unsigned char *mem_18503 = NULL;
    size_t mem_18506_cached_sizze_21388 = 0;
    unsigned char *mem_18506 = NULL;
    size_t mem_18509_cached_sizze_21389 = 0;
    unsigned char *mem_18509 = NULL;
    size_t mem_18672_cached_sizze_21390 = 0;
    unsigned char *mem_18672 = NULL;
    size_t mem_18687_cached_sizze_21391 = 0;
    unsigned char *mem_18687 = NULL;
    size_t mem_18702_cached_sizze_21392 = 0;
    unsigned char *mem_18702 = NULL;
    size_t mem_18718_cached_sizze_21393 = 0;
    unsigned char *mem_18718 = NULL;
    size_t mem_18722_cached_sizze_21394 = 0;
    unsigned char *mem_18722 = NULL;
    size_t mem_18726_cached_sizze_21395 = 0;
    unsigned char *mem_18726 = NULL;
    size_t mem_18730_cached_sizze_21396 = 0;
    unsigned char *mem_18730 = NULL;
    size_t mem_18734_cached_sizze_21397 = 0;
    unsigned char *mem_18734 = NULL;
    size_t mem_18738_cached_sizze_21398 = 0;
    unsigned char *mem_18738 = NULL;
    size_t mem_18861_cached_sizze_21399 = 0;
    unsigned char *mem_18861 = NULL;
    size_t mem_18876_cached_sizze_21400 = 0;
    unsigned char *mem_18876 = NULL;
    size_t mem_18879_cached_sizze_21401 = 0;
    unsigned char *mem_18879 = NULL;
    size_t mem_18882_cached_sizze_21402 = 0;
    unsigned char *mem_18882 = NULL;
    size_t mem_18885_cached_sizze_21403 = 0;
    unsigned char *mem_18885 = NULL;
    size_t mem_18888_cached_sizze_21404 = 0;
    unsigned char *mem_18888 = NULL;
    size_t mem_18891_cached_sizze_21405 = 0;
    unsigned char *mem_18891 = NULL;
    size_t mem_19066_cached_sizze_21406 = 0;
    unsigned char *mem_19066 = NULL;
    size_t mem_19081_cached_sizze_21407 = 0;
    unsigned char *mem_19081 = NULL;
    size_t mem_19084_cached_sizze_21408 = 0;
    unsigned char *mem_19084 = NULL;
    size_t mem_19087_cached_sizze_21409 = 0;
    unsigned char *mem_19087 = NULL;
    size_t mem_19090_cached_sizze_21410 = 0;
    unsigned char *mem_19090 = NULL;
    size_t mem_19093_cached_sizze_21411 = 0;
    unsigned char *mem_19093 = NULL;
    size_t mem_19096_cached_sizze_21412 = 0;
    unsigned char *mem_19096 = NULL;
    size_t mem_19271_cached_sizze_21413 = 0;
    unsigned char *mem_19271 = NULL;
    size_t mem_19286_cached_sizze_21414 = 0;
    unsigned char *mem_19286 = NULL;
    size_t mem_19289_cached_sizze_21415 = 0;
    unsigned char *mem_19289 = NULL;
    size_t mem_19292_cached_sizze_21416 = 0;
    unsigned char *mem_19292 = NULL;
    size_t mem_19295_cached_sizze_21417 = 0;
    unsigned char *mem_19295 = NULL;
    size_t mem_19298_cached_sizze_21418 = 0;
    unsigned char *mem_19298 = NULL;
    size_t mem_19301_cached_sizze_21419 = 0;
    unsigned char *mem_19301 = NULL;
    size_t mem_19464_cached_sizze_21420 = 0;
    unsigned char *mem_19464 = NULL;
    size_t mem_19479_cached_sizze_21421 = 0;
    unsigned char *mem_19479 = NULL;
    size_t mem_19494_cached_sizze_21422 = 0;
    unsigned char *mem_19494 = NULL;
    size_t mem_19510_cached_sizze_21423 = 0;
    unsigned char *mem_19510 = NULL;
    size_t mem_19514_cached_sizze_21424 = 0;
    unsigned char *mem_19514 = NULL;
    size_t mem_19518_cached_sizze_21425 = 0;
    unsigned char *mem_19518 = NULL;
    size_t mem_19522_cached_sizze_21426 = 0;
    unsigned char *mem_19522 = NULL;
    size_t mem_19526_cached_sizze_21427 = 0;
    unsigned char *mem_19526 = NULL;
    size_t mem_19530_cached_sizze_21428 = 0;
    unsigned char *mem_19530 = NULL;
    size_t mem_19645_cached_sizze_21429 = 0;
    unsigned char *mem_19645 = NULL;
    size_t mem_19660_cached_sizze_21430 = 0;
    unsigned char *mem_19660 = NULL;
    size_t mem_19663_cached_sizze_21431 = 0;
    unsigned char *mem_19663 = NULL;
    size_t mem_19666_cached_sizze_21432 = 0;
    unsigned char *mem_19666 = NULL;
    size_t mem_19669_cached_sizze_21433 = 0;
    unsigned char *mem_19669 = NULL;
    size_t mem_19672_cached_sizze_21434 = 0;
    unsigned char *mem_19672 = NULL;
    size_t mem_19675_cached_sizze_21435 = 0;
    unsigned char *mem_19675 = NULL;
    size_t mem_19824_cached_sizze_21436 = 0;
    unsigned char *mem_19824 = NULL;
    size_t mem_19839_cached_sizze_21437 = 0;
    unsigned char *mem_19839 = NULL;
    size_t mem_19842_cached_sizze_21438 = 0;
    unsigned char *mem_19842 = NULL;
    size_t mem_19845_cached_sizze_21439 = 0;
    unsigned char *mem_19845 = NULL;
    size_t mem_19848_cached_sizze_21440 = 0;
    unsigned char *mem_19848 = NULL;
    size_t mem_19851_cached_sizze_21441 = 0;
    unsigned char *mem_19851 = NULL;
    size_t mem_19854_cached_sizze_21442 = 0;
    unsigned char *mem_19854 = NULL;
    size_t mem_20003_cached_sizze_21443 = 0;
    unsigned char *mem_20003 = NULL;
    size_t mem_20018_cached_sizze_21444 = 0;
    unsigned char *mem_20018 = NULL;
    size_t mem_20021_cached_sizze_21445 = 0;
    unsigned char *mem_20021 = NULL;
    size_t mem_20024_cached_sizze_21446 = 0;
    unsigned char *mem_20024 = NULL;
    size_t mem_20027_cached_sizze_21447 = 0;
    unsigned char *mem_20027 = NULL;
    size_t mem_20030_cached_sizze_21448 = 0;
    unsigned char *mem_20030 = NULL;
    size_t mem_20033_cached_sizze_21449 = 0;
    unsigned char *mem_20033 = NULL;
    size_t mem_20197_cached_sizze_21450 = 0;
    unsigned char *mem_20197 = NULL;
    size_t mem_20217_cached_sizze_21451 = 0;
    unsigned char *mem_20217 = NULL;
    size_t mem_20220_cached_sizze_21452 = 0;
    unsigned char *mem_20220 = NULL;
    size_t mem_20247_cached_sizze_21453 = 0;
    unsigned char *mem_20247 = NULL;
    size_t mem_20262_cached_sizze_21454 = 0;
    unsigned char *mem_20262 = NULL;
    size_t mem_20265_cached_sizze_21455 = 0;
    unsigned char *mem_20265 = NULL;
    size_t mem_20292_cached_sizze_21456 = 0;
    unsigned char *mem_20292 = NULL;
    size_t mem_20307_cached_sizze_21457 = 0;
    unsigned char *mem_20307 = NULL;
    size_t mem_20310_cached_sizze_21458 = 0;
    unsigned char *mem_20310 = NULL;
    size_t mem_20337_cached_sizze_21459 = 0;
    unsigned char *mem_20337 = NULL;
    size_t mem_20365_cached_sizze_21460 = 0;
    unsigned char *mem_20365 = NULL;
    struct memblock mem_20397;
    
    mem_20397.references = NULL;
    
    struct memblock mem_param_tmp_21293;
    
    mem_param_tmp_21293.references = NULL;
    
    struct memblock mem_param_tmp_21292;
    
    mem_param_tmp_21292.references = NULL;
    
    struct memblock mem_param_tmp_21291;
    
    mem_param_tmp_21291.references = NULL;
    
    struct memblock mem_param_tmp_21290;
    
    mem_param_tmp_21290.references = NULL;
    
    struct memblock mem_param_19992;
    
    mem_param_19992.references = NULL;
    
    struct memblock mem_param_19987;
    
    mem_param_19987.references = NULL;
    
    struct memblock mem_param_19982;
    
    mem_param_19982.references = NULL;
    
    struct memblock mem_param_19977;
    
    mem_param_19977.references = NULL;
    
    struct memblock ext_mem_20126;
    
    ext_mem_20126.references = NULL;
    
    struct memblock ext_mem_20127;
    
    ext_mem_20127.references = NULL;
    
    struct memblock ext_mem_20128;
    
    ext_mem_20128.references = NULL;
    
    struct memblock ext_mem_20129;
    
    ext_mem_20129.references = NULL;
    
    struct memblock mem_param_tmp_21256;
    
    mem_param_tmp_21256.references = NULL;
    
    struct memblock mem_param_tmp_21255;
    
    mem_param_tmp_21255.references = NULL;
    
    struct memblock mem_param_tmp_21254;
    
    mem_param_tmp_21254.references = NULL;
    
    struct memblock mem_param_tmp_21253;
    
    mem_param_tmp_21253.references = NULL;
    
    struct memblock mem_param_19813;
    
    mem_param_19813.references = NULL;
    
    struct memblock mem_param_19808;
    
    mem_param_19808.references = NULL;
    
    struct memblock mem_param_19803;
    
    mem_param_19803.references = NULL;
    
    struct memblock mem_param_19798;
    
    mem_param_19798.references = NULL;
    
    struct memblock ext_mem_19947;
    
    ext_mem_19947.references = NULL;
    
    struct memblock ext_mem_19948;
    
    ext_mem_19948.references = NULL;
    
    struct memblock ext_mem_19949;
    
    ext_mem_19949.references = NULL;
    
    struct memblock ext_mem_19950;
    
    ext_mem_19950.references = NULL;
    
    struct memblock mem_param_tmp_21219;
    
    mem_param_tmp_21219.references = NULL;
    
    struct memblock mem_param_tmp_21218;
    
    mem_param_tmp_21218.references = NULL;
    
    struct memblock mem_param_tmp_21217;
    
    mem_param_tmp_21217.references = NULL;
    
    struct memblock mem_param_tmp_21216;
    
    mem_param_tmp_21216.references = NULL;
    
    struct memblock mem_param_19634;
    
    mem_param_19634.references = NULL;
    
    struct memblock mem_param_19629;
    
    mem_param_19629.references = NULL;
    
    struct memblock mem_param_19624;
    
    mem_param_19624.references = NULL;
    
    struct memblock mem_param_19619;
    
    mem_param_19619.references = NULL;
    
    struct memblock ext_mem_19768;
    
    ext_mem_19768.references = NULL;
    
    struct memblock ext_mem_19769;
    
    ext_mem_19769.references = NULL;
    
    struct memblock ext_mem_19770;
    
    ext_mem_19770.references = NULL;
    
    struct memblock ext_mem_19771;
    
    ext_mem_19771.references = NULL;
    
    struct memblock mem_19972;
    
    mem_19972.references = NULL;
    
    struct memblock mem_19969;
    
    mem_19969.references = NULL;
    
    struct memblock mem_19793;
    
    mem_19793.references = NULL;
    
    struct memblock mem_19790;
    
    mem_19790.references = NULL;
    
    struct memblock mem_19614;
    
    mem_19614.references = NULL;
    
    struct memblock mem_19611;
    
    mem_19611.references = NULL;
    
    struct memblock mem_19608;
    
    mem_19608.references = NULL;
    
    struct memblock mem_19605;
    
    mem_19605.references = NULL;
    
    struct memblock mem_19602;
    
    mem_19602.references = NULL;
    
    struct memblock mem_19599;
    
    mem_19599.references = NULL;
    
    struct memblock mem_19596;
    
    mem_19596.references = NULL;
    
    struct memblock mem_19593;
    
    mem_19593.references = NULL;
    
    struct memblock mem_param_tmp_21152;
    
    mem_param_tmp_21152.references = NULL;
    
    struct memblock mem_param_tmp_21151;
    
    mem_param_tmp_21151.references = NULL;
    
    struct memblock mem_param_tmp_21150;
    
    mem_param_tmp_21150.references = NULL;
    
    struct memblock mem_param_tmp_21149;
    
    mem_param_tmp_21149.references = NULL;
    
    struct memblock mem_param_19264;
    
    mem_param_19264.references = NULL;
    
    struct memblock mem_param_19259;
    
    mem_param_19259.references = NULL;
    
    struct memblock mem_param_19254;
    
    mem_param_19254.references = NULL;
    
    struct memblock mem_param_19249;
    
    mem_param_19249.references = NULL;
    
    struct memblock ext_mem_19394;
    
    ext_mem_19394.references = NULL;
    
    struct memblock ext_mem_19395;
    
    ext_mem_19395.references = NULL;
    
    struct memblock ext_mem_19396;
    
    ext_mem_19396.references = NULL;
    
    struct memblock ext_mem_19397;
    
    ext_mem_19397.references = NULL;
    
    struct memblock mem_param_tmp_21117;
    
    mem_param_tmp_21117.references = NULL;
    
    struct memblock mem_param_tmp_21116;
    
    mem_param_tmp_21116.references = NULL;
    
    struct memblock mem_param_tmp_21115;
    
    mem_param_tmp_21115.references = NULL;
    
    struct memblock mem_param_tmp_21114;
    
    mem_param_tmp_21114.references = NULL;
    
    struct memblock mem_param_19059;
    
    mem_param_19059.references = NULL;
    
    struct memblock mem_param_19054;
    
    mem_param_19054.references = NULL;
    
    struct memblock mem_param_19049;
    
    mem_param_19049.references = NULL;
    
    struct memblock mem_param_19044;
    
    mem_param_19044.references = NULL;
    
    struct memblock ext_mem_19189;
    
    ext_mem_19189.references = NULL;
    
    struct memblock ext_mem_19190;
    
    ext_mem_19190.references = NULL;
    
    struct memblock ext_mem_19191;
    
    ext_mem_19191.references = NULL;
    
    struct memblock ext_mem_19192;
    
    ext_mem_19192.references = NULL;
    
    struct memblock mem_param_tmp_21082;
    
    mem_param_tmp_21082.references = NULL;
    
    struct memblock mem_param_tmp_21081;
    
    mem_param_tmp_21081.references = NULL;
    
    struct memblock mem_param_tmp_21080;
    
    mem_param_tmp_21080.references = NULL;
    
    struct memblock mem_param_tmp_21079;
    
    mem_param_tmp_21079.references = NULL;
    
    struct memblock mem_param_18854;
    
    mem_param_18854.references = NULL;
    
    struct memblock mem_param_18849;
    
    mem_param_18849.references = NULL;
    
    struct memblock mem_param_18844;
    
    mem_param_18844.references = NULL;
    
    struct memblock mem_param_18839;
    
    mem_param_18839.references = NULL;
    
    struct memblock ext_mem_18984;
    
    ext_mem_18984.references = NULL;
    
    struct memblock ext_mem_18985;
    
    ext_mem_18985.references = NULL;
    
    struct memblock ext_mem_18986;
    
    ext_mem_18986.references = NULL;
    
    struct memblock ext_mem_18987;
    
    ext_mem_18987.references = NULL;
    
    struct memblock mem_19244;
    
    mem_19244.references = NULL;
    
    struct memblock mem_19241;
    
    mem_19241.references = NULL;
    
    struct memblock mem_19214;
    
    mem_19214.references = NULL;
    
    struct memblock mem_19211;
    
    mem_19211.references = NULL;
    
    struct memblock mem_19039;
    
    mem_19039.references = NULL;
    
    struct memblock mem_19036;
    
    mem_19036.references = NULL;
    
    struct memblock mem_19009;
    
    mem_19009.references = NULL;
    
    struct memblock mem_19006;
    
    mem_19006.references = NULL;
    
    struct memblock mem_18834;
    
    mem_18834.references = NULL;
    
    struct memblock mem_18831;
    
    mem_18831.references = NULL;
    
    struct memblock mem_18804;
    
    mem_18804.references = NULL;
    
    struct memblock mem_18801;
    
    mem_18801.references = NULL;
    
    struct memblock mem_param_tmp_21029;
    
    mem_param_tmp_21029.references = NULL;
    
    struct memblock mem_param_tmp_21028;
    
    mem_param_tmp_21028.references = NULL;
    
    struct memblock mem_param_tmp_21027;
    
    mem_param_tmp_21027.references = NULL;
    
    struct memblock mem_param_tmp_21026;
    
    mem_param_tmp_21026.references = NULL;
    
    struct memblock mem_param_18468;
    
    mem_param_18468.references = NULL;
    
    struct memblock mem_param_18463;
    
    mem_param_18463.references = NULL;
    
    struct memblock mem_param_18458;
    
    mem_param_18458.references = NULL;
    
    struct memblock mem_param_18453;
    
    mem_param_18453.references = NULL;
    
    struct memblock ext_mem_18602;
    
    ext_mem_18602.references = NULL;
    
    struct memblock ext_mem_18603;
    
    ext_mem_18603.references = NULL;
    
    struct memblock ext_mem_18604;
    
    ext_mem_18604.references = NULL;
    
    struct memblock ext_mem_18605;
    
    ext_mem_18605.references = NULL;
    
    struct memblock mem_param_tmp_20992;
    
    mem_param_tmp_20992.references = NULL;
    
    struct memblock mem_param_tmp_20991;
    
    mem_param_tmp_20991.references = NULL;
    
    struct memblock mem_param_tmp_20990;
    
    mem_param_tmp_20990.references = NULL;
    
    struct memblock mem_param_tmp_20989;
    
    mem_param_tmp_20989.references = NULL;
    
    struct memblock mem_param_18289;
    
    mem_param_18289.references = NULL;
    
    struct memblock mem_param_18284;
    
    mem_param_18284.references = NULL;
    
    struct memblock mem_param_18279;
    
    mem_param_18279.references = NULL;
    
    struct memblock mem_param_18274;
    
    mem_param_18274.references = NULL;
    
    struct memblock ext_mem_18423;
    
    ext_mem_18423.references = NULL;
    
    struct memblock ext_mem_18424;
    
    ext_mem_18424.references = NULL;
    
    struct memblock ext_mem_18425;
    
    ext_mem_18425.references = NULL;
    
    struct memblock ext_mem_18426;
    
    ext_mem_18426.references = NULL;
    
    struct memblock mem_param_tmp_20955;
    
    mem_param_tmp_20955.references = NULL;
    
    struct memblock mem_param_tmp_20954;
    
    mem_param_tmp_20954.references = NULL;
    
    struct memblock mem_param_tmp_20953;
    
    mem_param_tmp_20953.references = NULL;
    
    struct memblock mem_param_tmp_20952;
    
    mem_param_tmp_20952.references = NULL;
    
    struct memblock mem_param_18110;
    
    mem_param_18110.references = NULL;
    
    struct memblock mem_param_18105;
    
    mem_param_18105.references = NULL;
    
    struct memblock mem_param_18100;
    
    mem_param_18100.references = NULL;
    
    struct memblock mem_param_18095;
    
    mem_param_18095.references = NULL;
    
    struct memblock ext_mem_18244;
    
    ext_mem_18244.references = NULL;
    
    struct memblock ext_mem_18245;
    
    ext_mem_18245.references = NULL;
    
    struct memblock ext_mem_18246;
    
    ext_mem_18246.references = NULL;
    
    struct memblock ext_mem_18247;
    
    ext_mem_18247.references = NULL;
    
    struct memblock mem_18448;
    
    mem_18448.references = NULL;
    
    struct memblock mem_18445;
    
    mem_18445.references = NULL;
    
    struct memblock mem_18269;
    
    mem_18269.references = NULL;
    
    struct memblock mem_18266;
    
    mem_18266.references = NULL;
    
    struct memblock mem_18090;
    
    mem_18090.references = NULL;
    
    struct memblock mem_18087;
    
    mem_18087.references = NULL;
    
    struct memblock mem_18084;
    
    mem_18084.references = NULL;
    
    struct memblock mem_18081;
    
    mem_18081.references = NULL;
    
    struct memblock mem_18078;
    
    mem_18078.references = NULL;
    
    struct memblock mem_18075;
    
    mem_18075.references = NULL;
    
    struct memblock mem_18072;
    
    mem_18072.references = NULL;
    
    struct memblock mem_18069;
    
    mem_18069.references = NULL;
    
    struct memblock mem_param_tmp_20888;
    
    mem_param_tmp_20888.references = NULL;
    
    struct memblock mem_param_tmp_20887;
    
    mem_param_tmp_20887.references = NULL;
    
    struct memblock mem_param_tmp_20886;
    
    mem_param_tmp_20886.references = NULL;
    
    struct memblock mem_param_tmp_20885;
    
    mem_param_tmp_20885.references = NULL;
    
    struct memblock mem_param_17738;
    
    mem_param_17738.references = NULL;
    
    struct memblock mem_param_17733;
    
    mem_param_17733.references = NULL;
    
    struct memblock mem_param_17728;
    
    mem_param_17728.references = NULL;
    
    struct memblock mem_param_17723;
    
    mem_param_17723.references = NULL;
    
    struct memblock ext_mem_17870;
    
    ext_mem_17870.references = NULL;
    
    struct memblock ext_mem_17871;
    
    ext_mem_17871.references = NULL;
    
    struct memblock ext_mem_17872;
    
    ext_mem_17872.references = NULL;
    
    struct memblock ext_mem_17873;
    
    ext_mem_17873.references = NULL;
    
    struct memblock mem_param_tmp_20855;
    
    mem_param_tmp_20855.references = NULL;
    
    struct memblock mem_param_tmp_20854;
    
    mem_param_tmp_20854.references = NULL;
    
    struct memblock mem_param_tmp_20853;
    
    mem_param_tmp_20853.references = NULL;
    
    struct memblock mem_param_tmp_20852;
    
    mem_param_tmp_20852.references = NULL;
    
    struct memblock mem_param_17561;
    
    mem_param_17561.references = NULL;
    
    struct memblock mem_param_17556;
    
    mem_param_17556.references = NULL;
    
    struct memblock mem_param_17551;
    
    mem_param_17551.references = NULL;
    
    struct memblock mem_param_17546;
    
    mem_param_17546.references = NULL;
    
    struct memblock ext_mem_17693;
    
    ext_mem_17693.references = NULL;
    
    struct memblock ext_mem_17694;
    
    ext_mem_17694.references = NULL;
    
    struct memblock ext_mem_17695;
    
    ext_mem_17695.references = NULL;
    
    struct memblock ext_mem_17696;
    
    ext_mem_17696.references = NULL;
    
    struct memblock mem_param_tmp_20822;
    
    mem_param_tmp_20822.references = NULL;
    
    struct memblock mem_param_tmp_20821;
    
    mem_param_tmp_20821.references = NULL;
    
    struct memblock mem_param_tmp_20820;
    
    mem_param_tmp_20820.references = NULL;
    
    struct memblock mem_param_tmp_20819;
    
    mem_param_tmp_20819.references = NULL;
    
    struct memblock mem_param_17384;
    
    mem_param_17384.references = NULL;
    
    struct memblock mem_param_17379;
    
    mem_param_17379.references = NULL;
    
    struct memblock mem_param_17374;
    
    mem_param_17374.references = NULL;
    
    struct memblock mem_param_17369;
    
    mem_param_17369.references = NULL;
    
    struct memblock ext_mem_17516;
    
    ext_mem_17516.references = NULL;
    
    struct memblock ext_mem_17517;
    
    ext_mem_17517.references = NULL;
    
    struct memblock ext_mem_17518;
    
    ext_mem_17518.references = NULL;
    
    struct memblock ext_mem_17519;
    
    ext_mem_17519.references = NULL;
    
    struct memblock mem_17718;
    
    mem_17718.references = NULL;
    
    struct memblock mem_17715;
    
    mem_17715.references = NULL;
    
    struct memblock mem_17541;
    
    mem_17541.references = NULL;
    
    struct memblock mem_17538;
    
    mem_17538.references = NULL;
    
    struct memblock mem_17364;
    
    mem_17364.references = NULL;
    
    struct memblock mem_17361;
    
    mem_17361.references = NULL;
    
    struct memblock mem_17346;
    
    mem_17346.references = NULL;
    
    struct memblock mem_17331;
    
    mem_17331.references = NULL;
    
    struct memblock mem_17316;
    
    mem_17316.references = NULL;
    
    struct memblock mem_17226;
    
    mem_17226.references = NULL;
    
    struct memblock mem_17223;
    
    mem_17223.references = NULL;
    
    struct memblock mem_17220;
    
    mem_17220.references = NULL;
    
    struct memblock mem_out_20773;
    
    mem_out_20773.references = NULL;
    
    bool loop_cond_14698 = slt64((int64_t) 1, m_11476);
    int64_t y_14683 = sub64(m_11476, (int64_t) 1);
    int64_t x_14684 = m_11476 & y_14683;
    bool is_power_of_2_res_14685 = x_14684 == (int64_t) 0;
    int64_t y_14680 = sub64(n_11475, (int64_t) 1);
    int64_t x_14681 = n_11475 & y_14680;
    bool is_power_of_2_res_14682 = x_14681 == (int64_t) 0;
    bool x_14686 = is_power_of_2_res_14682 && is_power_of_2_res_14685;
    bool assert_c_14687;
    
    if (!x_14686) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (is_power_of_2 n && is_power_of_2 m)",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:76:5-82:30\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #2  sample_programs/fft.fut:38:18-38\n   #3  sample_programs/fft.fut:61:12-29\n   #4  sample_programs/fft.fut:70:25-39\n   #5  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_15771;
    int32_t r_15772;
    int64_t r_15773;
    bool loop_while_15774;
    int32_t r_15775;
    int64_t n_15776;
    
    loop_while_15774 = loop_cond_14698;
    r_15775 = 0;
    n_15776 = m_11476;
    while (loop_while_15774) {
        int64_t n_15777 = sdiv64(n_15776, (int64_t) 2);
        int32_t r_15778 = add32(1, r_15775);
        bool loop_cond_15779 = slt64((int64_t) 1, n_15777);
        bool loop_while_tmp_20774 = loop_cond_15779;
        int32_t r_tmp_20775 = r_15778;
        int64_t n_tmp_20776 = n_15777;
        
        loop_while_15774 = loop_while_tmp_20774;
        r_15775 = r_tmp_20775;
        n_15776 = n_tmp_20776;
    }
    r_15771 = loop_while_15774;
    r_15772 = r_15775;
    r_15773 = n_15776;
    
    int64_t i32_res_15780 = sext_i32_i64(r_15772);
    bool loop_nonempty_15798 = slt64((int64_t) 0, i32_res_15780);
    bool loop_not_taken_15803 = !loop_nonempty_15798;
    int64_t iota_arg_14709 = sdiv64(m_11476, (int64_t) 2);
    int64_t conc_tmp_14729 = iota_arg_14709 + iota_arg_14709;
    bool dim_match_14730 = m_11476 == conc_tmp_14729;
    bool protect_assert_disj_15804 = dim_match_14730 || loop_not_taken_15803;
    bool empty_or_match_cert_15806;
    
    if (!protect_assert_disj_15804) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15805;
    
    if (!protect_assert_disj_15804) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15786 = slt64(i32_res_15780, (int64_t) 0);
    bool valid_15787 = !bounds_invalid_upwards_15786;
    bool range_valid_c_15788;
    
    if (!valid_15787) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15780, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17071 = (int64_t) 4 * i32_res_15780;
    int64_t bytes_17072 = smax64((int64_t) 0, binop_y_17071);
    
    if (mem_17073_cached_sizze_21322 < bytes_17072) {
        err = lexical_realloc(&ctx->error, &mem_17073,
                              &mem_17073_cached_sizze_21322, bytes_17072);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16935 = 0; i_16935 < r_15772; i_16935++) {
        int64_t i_16267 = sext_i32_i64(i_16935);
        bool nonnegative_15795 = sle32(0, i_16935);
        bool nonzzero_cert_15796;
        
        if (!nonnegative_15795) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15797 = shl32(1, i_16935);
        
        ((int32_t *) mem_17073)[i_16267] = defunc_0_f_res_15797;
    }
    
    bool r_15235;
    int32_t r_15236;
    int64_t r_15237;
    bool loop_while_15238;
    int32_t r_15239;
    int64_t n_15240;
    
    loop_while_15238 = loop_cond_14698;
    r_15239 = 0;
    n_15240 = m_11476;
    while (loop_while_15238) {
        int64_t n_15241 = sdiv64(n_15240, (int64_t) 2);
        int32_t r_15242 = add32(1, r_15239);
        bool loop_cond_15243 = slt64((int64_t) 1, n_15241);
        bool loop_while_tmp_20778 = loop_cond_15243;
        int32_t r_tmp_20779 = r_15242;
        int64_t n_tmp_20780 = n_15241;
        
        loop_while_15238 = loop_while_tmp_20778;
        r_15239 = r_tmp_20779;
        n_15240 = n_tmp_20780;
    }
    r_15235 = loop_while_15238;
    r_15236 = r_15239;
    r_15237 = n_15240;
    
    int64_t i32_res_15244 = sext_i32_i64(r_15236);
    bool loop_nonempty_15262 = slt64((int64_t) 0, i32_res_15244);
    bool loop_not_taken_15267 = !loop_nonempty_15262;
    bool protect_assert_disj_15268 = dim_match_14730 || loop_not_taken_15267;
    bool empty_or_match_cert_15270;
    
    if (!protect_assert_disj_15268) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15269;
    
    if (!protect_assert_disj_15268) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15250 = slt64(i32_res_15244, (int64_t) 0);
    bool valid_15251 = !bounds_invalid_upwards_15250;
    bool range_valid_c_15252;
    
    if (!valid_15251) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15244, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17086 = (int64_t) 4 * i32_res_15244;
    int64_t bytes_17087 = smax64((int64_t) 0, binop_y_17086);
    
    if (mem_17088_cached_sizze_21323 < bytes_17087) {
        err = lexical_realloc(&ctx->error, &mem_17088,
                              &mem_17088_cached_sizze_21323, bytes_17087);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16936 = 0; i_16936 < r_15236; i_16936++) {
        int64_t i_16271 = sext_i32_i64(i_16936);
        bool nonnegative_15259 = sle32(0, i_16936);
        bool nonzzero_cert_15260;
        
        if (!nonnegative_15259) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15261 = shl32(1, i_16936);
        
        ((int32_t *) mem_17088)[i_16271] = defunc_0_f_res_15261;
    }
    
    bool r_14699;
    int32_t r_14700;
    int64_t r_14701;
    bool loop_while_14702;
    int32_t r_14703;
    int64_t n_14704;
    
    loop_while_14702 = loop_cond_14698;
    r_14703 = 0;
    n_14704 = m_11476;
    while (loop_while_14702) {
        int64_t n_14705 = sdiv64(n_14704, (int64_t) 2);
        int32_t r_14706 = add32(1, r_14703);
        bool loop_cond_14707 = slt64((int64_t) 1, n_14705);
        bool loop_while_tmp_20782 = loop_cond_14707;
        int32_t r_tmp_20783 = r_14706;
        int64_t n_tmp_20784 = n_14705;
        
        loop_while_14702 = loop_while_tmp_20782;
        r_14703 = r_tmp_20783;
        n_14704 = n_tmp_20784;
    }
    r_14699 = loop_while_14702;
    r_14700 = r_14703;
    r_14701 = n_14704;
    
    int64_t i32_res_14708 = sext_i32_i64(r_14700);
    bool loop_nonempty_14726 = slt64((int64_t) 0, i32_res_14708);
    bool loop_not_taken_14731 = !loop_nonempty_14726;
    bool protect_assert_disj_14732 = dim_match_14730 || loop_not_taken_14731;
    bool empty_or_match_cert_14734;
    
    if (!protect_assert_disj_14732) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14733;
    
    if (!protect_assert_disj_14732) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int32_t i64_res_14727 = sext_i64_i32(m_11476);
    int32_t y_14728 = sdiv32(i64_res_14727, 2);
    bool bounds_invalid_upwards_14714 = slt64(i32_res_14708, (int64_t) 0);
    bool valid_14715 = !bounds_invalid_upwards_14714;
    bool range_valid_c_14716;
    
    if (!valid_14715) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14708, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17101 = (int64_t) 4 * i32_res_14708;
    int64_t bytes_17102 = smax64((int64_t) 0, binop_y_17101);
    
    if (mem_17103_cached_sizze_21324 < bytes_17102) {
        err = lexical_realloc(&ctx->error, &mem_17103,
                              &mem_17103_cached_sizze_21324, bytes_17102);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16937 = 0; i_16937 < r_14700; i_16937++) {
        int64_t i_16275 = sext_i32_i64(i_16937);
        bool nonnegative_14723 = sle32(0, i_16937);
        bool nonzzero_cert_14724;
        
        if (!nonnegative_14723) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14725 = shl32(1, i_16937);
        
        ((int32_t *) mem_17103)[i_16275] = defunc_0_f_res_14725;
    }
    
    bool bounds_invalid_upwards_14710 = slt64(iota_arg_14709, (int64_t) 0);
    bool valid_14711 = !bounds_invalid_upwards_14710;
    bool range_valid_c_14712;
    
    if (!valid_14711) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) iota_arg_14709, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:34:14-34\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17116 = (int64_t) 4 * m_11476;
    int64_t bytes_17117 = smax64((int64_t) 0, binop_y_17116);
    
    if (mem_17118_cached_sizze_21325 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17118,
                              &mem_17118_cached_sizze_21325, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16279 = 0; i_16279 < m_11476; i_16279++) {
        int32_t defunc_0_f_res_14666 = sext_i64_i32(i_16279);
        
        ((int32_t *) mem_17118)[i_16279] = defunc_0_f_res_14666;
    }
    if (mem_17133_cached_sizze_21326 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17133,
                              &mem_17133_cached_sizze_21326, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_20787 = 0; i_20787 < m_11476; i_20787++) {
        ((float *) mem_17133)[i_20787] = 0.0F;
    }
    
    int64_t binop_x_17134 = n_11475 * m_11476;
    int64_t binop_y_17135 = (int64_t) 4 * binop_x_17134;
    int64_t bytes_17136 = smax64((int64_t) 0, binop_y_17135);
    
    if (mem_17137_cached_sizze_21327 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17137,
                              &mem_17137_cached_sizze_21327, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17141_cached_sizze_21328 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17141,
                              &mem_17141_cached_sizze_21328, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17145_cached_sizze_21329 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17145,
                              &mem_17145_cached_sizze_21329, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17149_cached_sizze_21330 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17149,
                              &mem_17149_cached_sizze_21330, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17153_cached_sizze_21331 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17153,
                              &mem_17153_cached_sizze_21331, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17157_cached_sizze_21332 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17157,
                              &mem_17157_cached_sizze_21332, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17220, bytes_17117, "mem_17220")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17223, bytes_17117, "mem_17223")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17226, bytes_17117, "mem_17226")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_17227 = smax64((int64_t) 0, m_11476);
    
    if (mem_17228_cached_sizze_21333 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17228,
                              &mem_17228_cached_sizze_21333, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17230_cached_sizze_21334 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17230,
                              &mem_17230_cached_sizze_21334, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17232_cached_sizze_21335 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17232,
                              &mem_17232_cached_sizze_21335, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17271_cached_sizze_21336 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17271,
                              &mem_17271_cached_sizze_21336, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17286_cached_sizze_21337 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17286,
                              &mem_17286_cached_sizze_21337, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17301_cached_sizze_21338 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17301,
                              &mem_17301_cached_sizze_21338, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17316, bytes_17117, "mem_17316")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17331, bytes_17117, "mem_17331")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17346, bytes_17117, "mem_17346")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17361, bytes_17117, "mem_17361")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17364, bytes_17117, "mem_17364")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17391 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17392 = smax64((int64_t) 0, binop_y_17391);
    
    if (mem_17393_cached_sizze_21339 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17393,
                              &mem_17393_cached_sizze_21339, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17406 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17407 = smax64((int64_t) 0, binop_y_17406);
    
    if (mem_17408_cached_sizze_21340 < bytes_17407) {
        err = lexical_realloc(&ctx->error, &mem_17408,
                              &mem_17408_cached_sizze_21340, bytes_17407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17411_cached_sizze_21341 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17411,
                              &mem_17411_cached_sizze_21341, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17414_cached_sizze_21342 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17414,
                              &mem_17414_cached_sizze_21342, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17417_cached_sizze_21343 < bytes_17407) {
        err = lexical_realloc(&ctx->error, &mem_17417,
                              &mem_17417_cached_sizze_21343, bytes_17407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17420_cached_sizze_21344 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17420,
                              &mem_17420_cached_sizze_21344, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17423_cached_sizze_21345 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17423,
                              &mem_17423_cached_sizze_21345, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17538, bytes_17117, "mem_17538")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17541, bytes_17117, "mem_17541")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17568 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17569 = smax64((int64_t) 0, binop_y_17568);
    
    if (mem_17570_cached_sizze_21346 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17570,
                              &mem_17570_cached_sizze_21346, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17583 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17584 = smax64((int64_t) 0, binop_y_17583);
    
    if (mem_17585_cached_sizze_21347 < bytes_17584) {
        err = lexical_realloc(&ctx->error, &mem_17585,
                              &mem_17585_cached_sizze_21347, bytes_17584);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17588_cached_sizze_21348 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17588,
                              &mem_17588_cached_sizze_21348, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17591_cached_sizze_21349 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17591,
                              &mem_17591_cached_sizze_21349, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17594_cached_sizze_21350 < bytes_17584) {
        err = lexical_realloc(&ctx->error, &mem_17594,
                              &mem_17594_cached_sizze_21350, bytes_17584);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17597_cached_sizze_21351 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17597,
                              &mem_17597_cached_sizze_21351, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17600_cached_sizze_21352 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17600,
                              &mem_17600_cached_sizze_21352, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17715, bytes_17117, "mem_17715")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17718, bytes_17117, "mem_17718")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17745 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17746 = smax64((int64_t) 0, binop_y_17745);
    
    if (mem_17747_cached_sizze_21353 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17747,
                              &mem_17747_cached_sizze_21353, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17760 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17761 = smax64((int64_t) 0, binop_y_17760);
    
    if (mem_17762_cached_sizze_21354 < bytes_17761) {
        err = lexical_realloc(&ctx->error, &mem_17762,
                              &mem_17762_cached_sizze_21354, bytes_17761);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17765_cached_sizze_21355 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17765,
                              &mem_17765_cached_sizze_21355, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17768_cached_sizze_21356 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17768,
                              &mem_17768_cached_sizze_21356, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17771_cached_sizze_21357 < bytes_17761) {
        err = lexical_realloc(&ctx->error, &mem_17771,
                              &mem_17771_cached_sizze_21357, bytes_17761);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17774_cached_sizze_21358 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17774,
                              &mem_17774_cached_sizze_21358, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17777_cached_sizze_21359 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17777,
                              &mem_17777_cached_sizze_21359, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16435 = 0; i_16435 < n_11475; i_16435++) {
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17220.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17223.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17226.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        for (int64_t i_16287 = 0; i_16287 < m_11476; i_16287++) {
            if ((int64_t) 1 > 0)
                memmove(mem_17228 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11476) +
                                                                  i_16287 *
                                                                  (int64_t) 3),
                        (int64_t) 1);
            if ((int64_t) 1 > 0)
                memmove(mem_17230 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11476) +
                                                                  i_16287 *
                                                                  (int64_t) 3 +
                                                                  (int64_t) 1),
                        (int64_t) 1);
            if ((int64_t) 1 > 0)
                memmove(mem_17232 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11476) +
                                                                  i_16287 *
                                                                  (int64_t) 3 +
                                                                  (int64_t) 2),
                        (int64_t) 1);
        }
        for (int64_t i_16293 = 0; i_16293 < m_11476; i_16293++) {
            int8_t x_15729;
            
            x_15729 = ((int8_t *) mem_17232)[i_16293];
            
            float defunc_0_f_res_15730 = uitofp_i8_f32(x_15729);
            
            ((float *) mem_17271)[i_16293] = defunc_0_f_res_15730;
        }
        for (int64_t i_16297 = 0; i_16297 < m_11476; i_16297++) {
            int8_t x_15193;
            
            x_15193 = ((int8_t *) mem_17230)[i_16297];
            
            float defunc_0_f_res_15194 = uitofp_i8_f32(x_15193);
            
            ((float *) mem_17286)[i_16297] = defunc_0_f_res_15194;
        }
        for (int64_t i_16301 = 0; i_16301 < m_11476; i_16301++) {
            int8_t x_14657;
            
            x_14657 = ((int8_t *) mem_17228)[i_16301];
            
            float defunc_0_f_res_14658 = uitofp_i8_f32(x_14657);
            
            ((float *) mem_17301)[i_16301] = defunc_0_f_res_14658;
        }
        
        int32_t defunc_0_f_res_15734 = sext_i64_i32(i_16435);
        
        for (int64_t i_16305 = 0; i_16305 < m_11476; i_16305++) {
            int32_t x_15744;
            
            x_15744 = ((int32_t *) mem_17118)[i_16305];
            
            float x_15745;
            
            x_15745 = ((float *) mem_17271)[i_16305];
            
            int32_t y_15746 = add32(defunc_0_f_res_15734, x_15744);
            bool nonnegative_15747 = sle32(0, y_15746);
            bool nonzzero_cert_15748;
            
            if (!nonnegative_15747) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:63:12-29\n   #10 sample_programs/fft.fut:70:25-39\n   #11 sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_15749 = pow32(-1, y_15746);
            float i32_res_15750 = sitofp_i32_f32(i32_arg_15749);
            float zt_res_15751 = x_15745 * i32_res_15750;
            
            ((float *) mem_17316.mem)[i_16305] = zt_res_15751;
        }
        for (int64_t i_16309 = 0; i_16309 < m_11476; i_16309++) {
            int32_t x_15208;
            
            x_15208 = ((int32_t *) mem_17118)[i_16309];
            
            float x_15209;
            
            x_15209 = ((float *) mem_17286)[i_16309];
            
            int32_t y_15210 = add32(x_15208, defunc_0_f_res_15734);
            bool nonnegative_15211 = sle32(0, y_15210);
            bool nonzzero_cert_15212;
            
            if (!nonnegative_15211) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:62:12-29\n   #10 sample_programs/fft.fut:70:25-39\n   #11 sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_15213 = pow32(-1, y_15210);
            float i32_res_15214 = sitofp_i32_f32(i32_arg_15213);
            float zt_res_15215 = x_15209 * i32_res_15214;
            
            ((float *) mem_17331.mem)[i_16309] = zt_res_15215;
        }
        for (int64_t i_16313 = 0; i_16313 < m_11476; i_16313++) {
            int32_t x_14672;
            
            x_14672 = ((int32_t *) mem_17118)[i_16313];
            
            float x_14673;
            
            x_14673 = ((float *) mem_17301)[i_16313];
            
            int32_t y_14674 = add32(x_14672, defunc_0_f_res_15734);
            bool nonnegative_14675 = sle32(0, y_14674);
            bool nonzzero_cert_14676;
            
            if (!nonnegative_14675) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:61:12-29\n   #10 sample_programs/fft.fut:70:25-39\n   #11 sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_14677 = pow32(-1, y_14674);
            float i32_res_14678 = sitofp_i32_f32(i32_arg_14677);
            float zt_res_14679 = x_14673 * i32_res_14678;
            
            ((float *) mem_17346.mem)[i_16313] = zt_res_14679;
        }
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17361.mem + (int64_t) 0, mem_17316.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17364.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_17535;
        int64_t ext_17534;
        int64_t ext_17533;
        int64_t ext_17532;
        int64_t ext_17531;
        int64_t ext_17530;
        int64_t ext_17529;
        int64_t ext_17528;
        int64_t ext_17527;
        int64_t ext_17526;
        int64_t ext_17525;
        int64_t ext_17524;
        int64_t ext_17523;
        int64_t ext_17522;
        int64_t ext_17521;
        int64_t ext_17520;
        int64_t ctx_param_ext_17365;
        int64_t ctx_param_ext_17366;
        int64_t ctx_param_ext_17367;
        int64_t ctx_param_ext_17368;
        int64_t ctx_param_ext_17370;
        int64_t ctx_param_ext_17371;
        int64_t ctx_param_ext_17372;
        int64_t ctx_param_ext_17373;
        int64_t ctx_param_ext_17375;
        int64_t ctx_param_ext_17376;
        int64_t ctx_param_ext_17377;
        int64_t ctx_param_ext_17378;
        int64_t ctx_param_ext_17380;
        int64_t ctx_param_ext_17381;
        int64_t ctx_param_ext_17382;
        int64_t ctx_param_ext_17383;
        
        ctx_param_ext_17365 = m_11476;
        ctx_param_ext_17366 = (int64_t) 0;
        ctx_param_ext_17367 = (int64_t) 1;
        ctx_param_ext_17368 = m_11476;
        ctx_param_ext_17370 = m_11476;
        ctx_param_ext_17371 = (int64_t) 0;
        ctx_param_ext_17372 = (int64_t) 1;
        ctx_param_ext_17373 = m_11476;
        ctx_param_ext_17375 = m_11476;
        ctx_param_ext_17376 = (int64_t) 0;
        ctx_param_ext_17377 = (int64_t) 1;
        ctx_param_ext_17378 = m_11476;
        ctx_param_ext_17380 = m_11476;
        ctx_param_ext_17381 = (int64_t) 0;
        ctx_param_ext_17382 = (int64_t) 1;
        ctx_param_ext_17383 = m_11476;
        if (memblock_set(ctx, &mem_param_17369, &mem_17316, "mem_17316") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17374, &mem_17226, "mem_17226") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17379, &mem_17361, "mem_17361") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17384, &mem_17364, "mem_17364") != 0)
            return 1;
        
        int32_t ns_15822;
        
        for (int64_t i_15817 = 0; i_15817 < i32_res_15780; i_15817++) {
            ns_15822 = ((int32_t *) mem_17073)[i_15817];
            for (int64_t i_16317 = 0; i_16317 < iota_arg_14709; i_16317++) {
                int32_t defunc_0_f_res_15825 = sext_i64_i32(i_16317);
                
                ((int32_t *) mem_17393)[i_16317] = defunc_0_f_res_15825;
            }
            
            int32_t i32_arg_15826 = mul32(2, ns_15822);
            float i32_res_15827 = sitofp_i32_f32(i32_arg_15826);
            bool zzero_15828 = ns_15822 == 0;
            bool nonzzero_15829 = !zzero_15828;
            bool nonzzero_cert_15830;
            
            if (!nonzzero_15829) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16331 = 0; i_16331 < iota_arg_14709; i_16331++) {
                int32_t x_15837;
                
                x_15837 = ((int32_t *) mem_17393)[i_16331];
                
                int32_t i32_arg_15838 = smod32(x_15837, ns_15822);
                float i32_res_15839 = sitofp_i32_f32(i32_arg_15838);
                float zt_res_15840 = -6.2831855F * i32_res_15839;
                float zs_res_15841 = zt_res_15840 / i32_res_15827;
                int64_t j_15842 = sext_i32_i64(x_15837);
                bool x_15843 = sle64((int64_t) 0, j_15842);
                bool y_15844 = slt64(j_15842, m_11476);
                bool bounds_check_15845 = x_15843 && y_15844;
                bool index_certs_15846;
                
                if (!bounds_check_15845) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15842,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15847;
                
                defunc_0_f_res_15847 =
                    ((float *) mem_param_17369.mem)[ctx_param_ext_17366 +
                                                    j_15842 *
                                                    ctx_param_ext_17367];
                
                float defunc_0_f_res_15848;
                
                defunc_0_f_res_15848 =
                    ((float *) mem_param_17374.mem)[ctx_param_ext_17371 +
                                                    j_15842 *
                                                    ctx_param_ext_17372];
                
                float sin_res_15849;
                
                sin_res_15849 = futrts_sin32(zs_res_15841);
                
                float cos_res_15850;
                
                cos_res_15850 = futrts_cos32(zs_res_15841);
                
                int32_t i_15851 = add32(y_14728, x_15837);
                int64_t i_15852 = sext_i32_i64(i_15851);
                bool x_15853 = sle64((int64_t) 0, i_15852);
                bool y_15854 = slt64(i_15852, m_11476);
                bool bounds_check_15855 = x_15853 && y_15854;
                bool index_certs_15856;
                
                if (!bounds_check_15855) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15852,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15857;
                
                zt_arg_15857 =
                    ((float *) mem_param_17369.mem)[ctx_param_ext_17366 +
                                                    i_15852 *
                                                    ctx_param_ext_17367];
                
                float zt_arg_15858;
                
                zt_arg_15858 =
                    ((float *) mem_param_17374.mem)[ctx_param_ext_17371 +
                                                    i_15852 *
                                                    ctx_param_ext_17372];
                
                float zt_res_15859 = sin_res_15849 * zt_arg_15858;
                float zt_res_15860 = cos_res_15850 * zt_arg_15857;
                float zm_res_15861 = zt_res_15860 - zt_res_15859;
                float zt_res_15862 = sin_res_15849 * zt_arg_15857;
                float zt_res_15863 = cos_res_15850 * zt_arg_15858;
                float zp_res_15864 = zt_res_15862 + zt_res_15863;
                float zp_res_15865 = defunc_0_f_res_15847 + zm_res_15861;
                float zp_res_15866 = defunc_0_f_res_15848 + zp_res_15864;
                float zm_res_15867 = defunc_0_f_res_15847 - zm_res_15861;
                float zm_res_15868 = defunc_0_f_res_15848 - zp_res_15864;
                int32_t x_15869 = sdiv32(x_15837, ns_15822);
                int32_t x_15870 = mul32(ns_15822, x_15869);
                int32_t x_15871 = mul32(2, x_15870);
                int32_t idxD_15872 = add32(i32_arg_15838, x_15871);
                int64_t i32_res_15873 = sext_i32_i64(idxD_15872);
                int32_t i32_arg_15874 = add32(ns_15822, idxD_15872);
                int64_t i32_res_15875 = sext_i32_i64(i32_arg_15874);
                
                ((int64_t *) mem_17408)[i_16331] = i32_res_15873;
                ((float *) mem_17411)[i_16331] = zp_res_15865;
                ((float *) mem_17414)[i_16331] = zp_res_15866;
                ((int64_t *) mem_17417)[i_16331] = i32_res_15875;
                ((float *) mem_17420)[i_16331] = zm_res_15867;
                ((float *) mem_17423)[i_16331] = zm_res_15868;
            }
            for (int64_t write_iter_16338 = 0; write_iter_16338 <
                 iota_arg_14709; write_iter_16338++) {
                int64_t write_iv_16341;
                
                write_iv_16341 = ((int64_t *) mem_17408)[write_iter_16338];
                
                int64_t write_iv_16344;
                
                write_iv_16344 = ((int64_t *) mem_17417)[write_iter_16338];
                if (sle64((int64_t) 0, write_iv_16341) && slt64(write_iv_16341,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17379.mem + (ctx_param_ext_17376 +
                                                       ctx_param_ext_17377 *
                                                       write_iv_16341) *
                                (int64_t) 4, mem_17411 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16344) && slt64(write_iv_16344,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17379.mem + (ctx_param_ext_17376 +
                                                       ctx_param_ext_17377 *
                                                       write_iv_16344) *
                                (int64_t) 4, mem_17420 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16341) && slt64(write_iv_16341,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17384.mem + (ctx_param_ext_17381 +
                                                       ctx_param_ext_17382 *
                                                       write_iv_16341) *
                                (int64_t) 4, mem_17414 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16344) && slt64(write_iv_16344,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17384.mem + (ctx_param_ext_17381 +
                                                       ctx_param_ext_17382 *
                                                       write_iv_16344) *
                                (int64_t) 4, mem_17423 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20803 = ctx_param_ext_17375;
            int64_t ctx_param_ext_tmp_20804 = ctx_param_ext_17376;
            int64_t ctx_param_ext_tmp_20805 = ctx_param_ext_17377;
            int64_t ctx_param_ext_tmp_20806 = ctx_param_ext_17378;
            int64_t ctx_param_ext_tmp_20807 = ctx_param_ext_17380;
            int64_t ctx_param_ext_tmp_20808 = ctx_param_ext_17381;
            int64_t ctx_param_ext_tmp_20809 = ctx_param_ext_17382;
            int64_t ctx_param_ext_tmp_20810 = ctx_param_ext_17383;
            int64_t ctx_param_ext_tmp_20811 = ctx_param_ext_17365;
            int64_t ctx_param_ext_tmp_20812 = ctx_param_ext_17366;
            int64_t ctx_param_ext_tmp_20813 = ctx_param_ext_17367;
            int64_t ctx_param_ext_tmp_20814 = ctx_param_ext_17368;
            int64_t ctx_param_ext_tmp_20815 = ctx_param_ext_17370;
            int64_t ctx_param_ext_tmp_20816 = ctx_param_ext_17371;
            int64_t ctx_param_ext_tmp_20817 = ctx_param_ext_17372;
            int64_t ctx_param_ext_tmp_20818 = ctx_param_ext_17373;
            
            if (memblock_set(ctx, &mem_param_tmp_20819, &mem_param_17379,
                             "mem_param_17379") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20820, &mem_param_17384,
                             "mem_param_17384") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20821, &mem_param_17369,
                             "mem_param_17369") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20822, &mem_param_17374,
                             "mem_param_17374") != 0)
                return 1;
            ctx_param_ext_17365 = ctx_param_ext_tmp_20803;
            ctx_param_ext_17366 = ctx_param_ext_tmp_20804;
            ctx_param_ext_17367 = ctx_param_ext_tmp_20805;
            ctx_param_ext_17368 = ctx_param_ext_tmp_20806;
            ctx_param_ext_17370 = ctx_param_ext_tmp_20807;
            ctx_param_ext_17371 = ctx_param_ext_tmp_20808;
            ctx_param_ext_17372 = ctx_param_ext_tmp_20809;
            ctx_param_ext_17373 = ctx_param_ext_tmp_20810;
            ctx_param_ext_17375 = ctx_param_ext_tmp_20811;
            ctx_param_ext_17376 = ctx_param_ext_tmp_20812;
            ctx_param_ext_17377 = ctx_param_ext_tmp_20813;
            ctx_param_ext_17378 = ctx_param_ext_tmp_20814;
            ctx_param_ext_17380 = ctx_param_ext_tmp_20815;
            ctx_param_ext_17381 = ctx_param_ext_tmp_20816;
            ctx_param_ext_17382 = ctx_param_ext_tmp_20817;
            ctx_param_ext_17383 = ctx_param_ext_tmp_20818;
            if (memblock_set(ctx, &mem_param_17369, &mem_param_tmp_20819,
                             "mem_param_tmp_20819") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17374, &mem_param_tmp_20820,
                             "mem_param_tmp_20820") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17379, &mem_param_tmp_20821,
                             "mem_param_tmp_20821") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17384, &mem_param_tmp_20822,
                             "mem_param_tmp_20822") != 0)
                return 1;
        }
        ext_17535 = ctx_param_ext_17365;
        ext_17534 = ctx_param_ext_17366;
        ext_17533 = ctx_param_ext_17367;
        ext_17532 = ctx_param_ext_17368;
        ext_17531 = ctx_param_ext_17370;
        ext_17530 = ctx_param_ext_17371;
        ext_17529 = ctx_param_ext_17372;
        ext_17528 = ctx_param_ext_17373;
        ext_17527 = ctx_param_ext_17375;
        ext_17526 = ctx_param_ext_17376;
        ext_17525 = ctx_param_ext_17377;
        ext_17524 = ctx_param_ext_17378;
        ext_17523 = ctx_param_ext_17380;
        ext_17522 = ctx_param_ext_17381;
        ext_17521 = ctx_param_ext_17382;
        ext_17520 = ctx_param_ext_17383;
        if (memblock_set(ctx, &ext_mem_17519, &mem_param_17369,
                         "mem_param_17369") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17518, &mem_param_17374,
                         "mem_param_17374") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17517, &mem_param_17379,
                         "mem_param_17379") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17516, &mem_param_17384,
                         "mem_param_17384") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17538.mem + (int64_t) 0, mem_17331.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17541.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_17712;
        int64_t ext_17711;
        int64_t ext_17710;
        int64_t ext_17709;
        int64_t ext_17708;
        int64_t ext_17707;
        int64_t ext_17706;
        int64_t ext_17705;
        int64_t ext_17704;
        int64_t ext_17703;
        int64_t ext_17702;
        int64_t ext_17701;
        int64_t ext_17700;
        int64_t ext_17699;
        int64_t ext_17698;
        int64_t ext_17697;
        int64_t ctx_param_ext_17542;
        int64_t ctx_param_ext_17543;
        int64_t ctx_param_ext_17544;
        int64_t ctx_param_ext_17545;
        int64_t ctx_param_ext_17547;
        int64_t ctx_param_ext_17548;
        int64_t ctx_param_ext_17549;
        int64_t ctx_param_ext_17550;
        int64_t ctx_param_ext_17552;
        int64_t ctx_param_ext_17553;
        int64_t ctx_param_ext_17554;
        int64_t ctx_param_ext_17555;
        int64_t ctx_param_ext_17557;
        int64_t ctx_param_ext_17558;
        int64_t ctx_param_ext_17559;
        int64_t ctx_param_ext_17560;
        
        ctx_param_ext_17542 = m_11476;
        ctx_param_ext_17543 = (int64_t) 0;
        ctx_param_ext_17544 = (int64_t) 1;
        ctx_param_ext_17545 = m_11476;
        ctx_param_ext_17547 = m_11476;
        ctx_param_ext_17548 = (int64_t) 0;
        ctx_param_ext_17549 = (int64_t) 1;
        ctx_param_ext_17550 = m_11476;
        ctx_param_ext_17552 = m_11476;
        ctx_param_ext_17553 = (int64_t) 0;
        ctx_param_ext_17554 = (int64_t) 1;
        ctx_param_ext_17555 = m_11476;
        ctx_param_ext_17557 = m_11476;
        ctx_param_ext_17558 = (int64_t) 0;
        ctx_param_ext_17559 = (int64_t) 1;
        ctx_param_ext_17560 = m_11476;
        if (memblock_set(ctx, &mem_param_17546, &mem_17331, "mem_17331") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17551, &mem_17223, "mem_17223") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17556, &mem_17538, "mem_17538") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17561, &mem_17541, "mem_17541") != 0)
            return 1;
        
        int32_t ns_15286;
        
        for (int64_t i_15281 = 0; i_15281 < i32_res_15244; i_15281++) {
            ns_15286 = ((int32_t *) mem_17088)[i_15281];
            for (int64_t i_16353 = 0; i_16353 < iota_arg_14709; i_16353++) {
                int32_t defunc_0_f_res_15289 = sext_i64_i32(i_16353);
                
                ((int32_t *) mem_17570)[i_16353] = defunc_0_f_res_15289;
            }
            
            int32_t i32_arg_15290 = mul32(2, ns_15286);
            float i32_res_15291 = sitofp_i32_f32(i32_arg_15290);
            bool zzero_15292 = ns_15286 == 0;
            bool nonzzero_15293 = !zzero_15292;
            bool nonzzero_cert_15294;
            
            if (!nonzzero_15293) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16367 = 0; i_16367 < iota_arg_14709; i_16367++) {
                int32_t x_15301;
                
                x_15301 = ((int32_t *) mem_17570)[i_16367];
                
                int32_t i32_arg_15302 = smod32(x_15301, ns_15286);
                float i32_res_15303 = sitofp_i32_f32(i32_arg_15302);
                float zt_res_15304 = -6.2831855F * i32_res_15303;
                float zs_res_15305 = zt_res_15304 / i32_res_15291;
                int64_t j_15306 = sext_i32_i64(x_15301);
                bool x_15307 = sle64((int64_t) 0, j_15306);
                bool y_15308 = slt64(j_15306, m_11476);
                bool bounds_check_15309 = x_15307 && y_15308;
                bool index_certs_15310;
                
                if (!bounds_check_15309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15306,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15311;
                
                defunc_0_f_res_15311 =
                    ((float *) mem_param_17546.mem)[ctx_param_ext_17543 +
                                                    j_15306 *
                                                    ctx_param_ext_17544];
                
                float defunc_0_f_res_15312;
                
                defunc_0_f_res_15312 =
                    ((float *) mem_param_17551.mem)[ctx_param_ext_17548 +
                                                    j_15306 *
                                                    ctx_param_ext_17549];
                
                float sin_res_15313;
                
                sin_res_15313 = futrts_sin32(zs_res_15305);
                
                float cos_res_15314;
                
                cos_res_15314 = futrts_cos32(zs_res_15305);
                
                int32_t i_15315 = add32(y_14728, x_15301);
                int64_t i_15316 = sext_i32_i64(i_15315);
                bool x_15317 = sle64((int64_t) 0, i_15316);
                bool y_15318 = slt64(i_15316, m_11476);
                bool bounds_check_15319 = x_15317 && y_15318;
                bool index_certs_15320;
                
                if (!bounds_check_15319) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15316,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15321;
                
                zt_arg_15321 =
                    ((float *) mem_param_17546.mem)[ctx_param_ext_17543 +
                                                    i_15316 *
                                                    ctx_param_ext_17544];
                
                float zt_arg_15322;
                
                zt_arg_15322 =
                    ((float *) mem_param_17551.mem)[ctx_param_ext_17548 +
                                                    i_15316 *
                                                    ctx_param_ext_17549];
                
                float zt_res_15323 = sin_res_15313 * zt_arg_15322;
                float zt_res_15324 = cos_res_15314 * zt_arg_15321;
                float zm_res_15325 = zt_res_15324 - zt_res_15323;
                float zt_res_15326 = sin_res_15313 * zt_arg_15321;
                float zt_res_15327 = cos_res_15314 * zt_arg_15322;
                float zp_res_15328 = zt_res_15326 + zt_res_15327;
                float zp_res_15329 = defunc_0_f_res_15311 + zm_res_15325;
                float zp_res_15330 = defunc_0_f_res_15312 + zp_res_15328;
                float zm_res_15331 = defunc_0_f_res_15311 - zm_res_15325;
                float zm_res_15332 = defunc_0_f_res_15312 - zp_res_15328;
                int32_t x_15333 = sdiv32(x_15301, ns_15286);
                int32_t x_15334 = mul32(ns_15286, x_15333);
                int32_t x_15335 = mul32(2, x_15334);
                int32_t idxD_15336 = add32(i32_arg_15302, x_15335);
                int64_t i32_res_15337 = sext_i32_i64(idxD_15336);
                int32_t i32_arg_15338 = add32(ns_15286, idxD_15336);
                int64_t i32_res_15339 = sext_i32_i64(i32_arg_15338);
                
                ((int64_t *) mem_17585)[i_16367] = i32_res_15337;
                ((float *) mem_17588)[i_16367] = zp_res_15329;
                ((float *) mem_17591)[i_16367] = zp_res_15330;
                ((int64_t *) mem_17594)[i_16367] = i32_res_15339;
                ((float *) mem_17597)[i_16367] = zm_res_15331;
                ((float *) mem_17600)[i_16367] = zm_res_15332;
            }
            for (int64_t write_iter_16374 = 0; write_iter_16374 <
                 iota_arg_14709; write_iter_16374++) {
                int64_t write_iv_16377;
                
                write_iv_16377 = ((int64_t *) mem_17585)[write_iter_16374];
                
                int64_t write_iv_16380;
                
                write_iv_16380 = ((int64_t *) mem_17594)[write_iter_16374];
                if (sle64((int64_t) 0, write_iv_16377) && slt64(write_iv_16377,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17556.mem + (ctx_param_ext_17553 +
                                                       ctx_param_ext_17554 *
                                                       write_iv_16377) *
                                (int64_t) 4, mem_17588 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16380) && slt64(write_iv_16380,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17556.mem + (ctx_param_ext_17553 +
                                                       ctx_param_ext_17554 *
                                                       write_iv_16380) *
                                (int64_t) 4, mem_17597 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16377) && slt64(write_iv_16377,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17561.mem + (ctx_param_ext_17558 +
                                                       ctx_param_ext_17559 *
                                                       write_iv_16377) *
                                (int64_t) 4, mem_17591 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16380) && slt64(write_iv_16380,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17561.mem + (ctx_param_ext_17558 +
                                                       ctx_param_ext_17559 *
                                                       write_iv_16380) *
                                (int64_t) 4, mem_17600 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20836 = ctx_param_ext_17552;
            int64_t ctx_param_ext_tmp_20837 = ctx_param_ext_17553;
            int64_t ctx_param_ext_tmp_20838 = ctx_param_ext_17554;
            int64_t ctx_param_ext_tmp_20839 = ctx_param_ext_17555;
            int64_t ctx_param_ext_tmp_20840 = ctx_param_ext_17557;
            int64_t ctx_param_ext_tmp_20841 = ctx_param_ext_17558;
            int64_t ctx_param_ext_tmp_20842 = ctx_param_ext_17559;
            int64_t ctx_param_ext_tmp_20843 = ctx_param_ext_17560;
            int64_t ctx_param_ext_tmp_20844 = ctx_param_ext_17542;
            int64_t ctx_param_ext_tmp_20845 = ctx_param_ext_17543;
            int64_t ctx_param_ext_tmp_20846 = ctx_param_ext_17544;
            int64_t ctx_param_ext_tmp_20847 = ctx_param_ext_17545;
            int64_t ctx_param_ext_tmp_20848 = ctx_param_ext_17547;
            int64_t ctx_param_ext_tmp_20849 = ctx_param_ext_17548;
            int64_t ctx_param_ext_tmp_20850 = ctx_param_ext_17549;
            int64_t ctx_param_ext_tmp_20851 = ctx_param_ext_17550;
            
            if (memblock_set(ctx, &mem_param_tmp_20852, &mem_param_17556,
                             "mem_param_17556") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20853, &mem_param_17561,
                             "mem_param_17561") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20854, &mem_param_17546,
                             "mem_param_17546") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20855, &mem_param_17551,
                             "mem_param_17551") != 0)
                return 1;
            ctx_param_ext_17542 = ctx_param_ext_tmp_20836;
            ctx_param_ext_17543 = ctx_param_ext_tmp_20837;
            ctx_param_ext_17544 = ctx_param_ext_tmp_20838;
            ctx_param_ext_17545 = ctx_param_ext_tmp_20839;
            ctx_param_ext_17547 = ctx_param_ext_tmp_20840;
            ctx_param_ext_17548 = ctx_param_ext_tmp_20841;
            ctx_param_ext_17549 = ctx_param_ext_tmp_20842;
            ctx_param_ext_17550 = ctx_param_ext_tmp_20843;
            ctx_param_ext_17552 = ctx_param_ext_tmp_20844;
            ctx_param_ext_17553 = ctx_param_ext_tmp_20845;
            ctx_param_ext_17554 = ctx_param_ext_tmp_20846;
            ctx_param_ext_17555 = ctx_param_ext_tmp_20847;
            ctx_param_ext_17557 = ctx_param_ext_tmp_20848;
            ctx_param_ext_17558 = ctx_param_ext_tmp_20849;
            ctx_param_ext_17559 = ctx_param_ext_tmp_20850;
            ctx_param_ext_17560 = ctx_param_ext_tmp_20851;
            if (memblock_set(ctx, &mem_param_17546, &mem_param_tmp_20852,
                             "mem_param_tmp_20852") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17551, &mem_param_tmp_20853,
                             "mem_param_tmp_20853") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17556, &mem_param_tmp_20854,
                             "mem_param_tmp_20854") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17561, &mem_param_tmp_20855,
                             "mem_param_tmp_20855") != 0)
                return 1;
        }
        ext_17712 = ctx_param_ext_17542;
        ext_17711 = ctx_param_ext_17543;
        ext_17710 = ctx_param_ext_17544;
        ext_17709 = ctx_param_ext_17545;
        ext_17708 = ctx_param_ext_17547;
        ext_17707 = ctx_param_ext_17548;
        ext_17706 = ctx_param_ext_17549;
        ext_17705 = ctx_param_ext_17550;
        ext_17704 = ctx_param_ext_17552;
        ext_17703 = ctx_param_ext_17553;
        ext_17702 = ctx_param_ext_17554;
        ext_17701 = ctx_param_ext_17555;
        ext_17700 = ctx_param_ext_17557;
        ext_17699 = ctx_param_ext_17558;
        ext_17698 = ctx_param_ext_17559;
        ext_17697 = ctx_param_ext_17560;
        if (memblock_set(ctx, &ext_mem_17696, &mem_param_17546,
                         "mem_param_17546") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17695, &mem_param_17551,
                         "mem_param_17551") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17694, &mem_param_17556,
                         "mem_param_17556") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17693, &mem_param_17561,
                         "mem_param_17561") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17715.mem + (int64_t) 0, mem_17346.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17718.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_17889;
        int64_t ext_17888;
        int64_t ext_17887;
        int64_t ext_17886;
        int64_t ext_17885;
        int64_t ext_17884;
        int64_t ext_17883;
        int64_t ext_17882;
        int64_t ext_17881;
        int64_t ext_17880;
        int64_t ext_17879;
        int64_t ext_17878;
        int64_t ext_17877;
        int64_t ext_17876;
        int64_t ext_17875;
        int64_t ext_17874;
        int64_t ctx_param_ext_17719;
        int64_t ctx_param_ext_17720;
        int64_t ctx_param_ext_17721;
        int64_t ctx_param_ext_17722;
        int64_t ctx_param_ext_17724;
        int64_t ctx_param_ext_17725;
        int64_t ctx_param_ext_17726;
        int64_t ctx_param_ext_17727;
        int64_t ctx_param_ext_17729;
        int64_t ctx_param_ext_17730;
        int64_t ctx_param_ext_17731;
        int64_t ctx_param_ext_17732;
        int64_t ctx_param_ext_17734;
        int64_t ctx_param_ext_17735;
        int64_t ctx_param_ext_17736;
        int64_t ctx_param_ext_17737;
        
        ctx_param_ext_17719 = m_11476;
        ctx_param_ext_17720 = (int64_t) 0;
        ctx_param_ext_17721 = (int64_t) 1;
        ctx_param_ext_17722 = m_11476;
        ctx_param_ext_17724 = m_11476;
        ctx_param_ext_17725 = (int64_t) 0;
        ctx_param_ext_17726 = (int64_t) 1;
        ctx_param_ext_17727 = m_11476;
        ctx_param_ext_17729 = m_11476;
        ctx_param_ext_17730 = (int64_t) 0;
        ctx_param_ext_17731 = (int64_t) 1;
        ctx_param_ext_17732 = m_11476;
        ctx_param_ext_17734 = m_11476;
        ctx_param_ext_17735 = (int64_t) 0;
        ctx_param_ext_17736 = (int64_t) 1;
        ctx_param_ext_17737 = m_11476;
        if (memblock_set(ctx, &mem_param_17723, &mem_17346, "mem_17346") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17728, &mem_17220, "mem_17220") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17733, &mem_17715, "mem_17715") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17738, &mem_17718, "mem_17718") != 0)
            return 1;
        
        int32_t ns_14750;
        
        for (int64_t i_14745 = 0; i_14745 < i32_res_14708; i_14745++) {
            ns_14750 = ((int32_t *) mem_17103)[i_14745];
            for (int64_t i_16389 = 0; i_16389 < iota_arg_14709; i_16389++) {
                int32_t defunc_0_f_res_14753 = sext_i64_i32(i_16389);
                
                ((int32_t *) mem_17747)[i_16389] = defunc_0_f_res_14753;
            }
            
            int32_t i32_arg_14754 = mul32(2, ns_14750);
            float i32_res_14755 = sitofp_i32_f32(i32_arg_14754);
            bool zzero_14756 = ns_14750 == 0;
            bool nonzzero_14757 = !zzero_14756;
            bool nonzzero_cert_14758;
            
            if (!nonzzero_14757) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16403 = 0; i_16403 < iota_arg_14709; i_16403++) {
                int32_t x_14765;
                
                x_14765 = ((int32_t *) mem_17747)[i_16403];
                
                int32_t i32_arg_14766 = smod32(x_14765, ns_14750);
                float i32_res_14767 = sitofp_i32_f32(i32_arg_14766);
                float zt_res_14768 = -6.2831855F * i32_res_14767;
                float zs_res_14769 = zt_res_14768 / i32_res_14755;
                int64_t j_14770 = sext_i32_i64(x_14765);
                bool x_14771 = sle64((int64_t) 0, j_14770);
                bool y_14772 = slt64(j_14770, m_11476);
                bool bounds_check_14773 = x_14771 && y_14772;
                bool index_certs_14774;
                
                if (!bounds_check_14773) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_14770,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_14775;
                
                defunc_0_f_res_14775 =
                    ((float *) mem_param_17723.mem)[ctx_param_ext_17720 +
                                                    j_14770 *
                                                    ctx_param_ext_17721];
                
                float defunc_0_f_res_14776;
                
                defunc_0_f_res_14776 =
                    ((float *) mem_param_17728.mem)[ctx_param_ext_17725 +
                                                    j_14770 *
                                                    ctx_param_ext_17726];
                
                float sin_res_14777;
                
                sin_res_14777 = futrts_sin32(zs_res_14769);
                
                float cos_res_14778;
                
                cos_res_14778 = futrts_cos32(zs_res_14769);
                
                int32_t i_14779 = add32(y_14728, x_14765);
                int64_t i_14780 = sext_i32_i64(i_14779);
                bool x_14781 = sle64((int64_t) 0, i_14780);
                bool y_14782 = slt64(i_14780, m_11476);
                bool bounds_check_14783 = x_14781 && y_14782;
                bool index_certs_14784;
                
                if (!bounds_check_14783) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_14780,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_14785;
                
                zt_arg_14785 =
                    ((float *) mem_param_17723.mem)[ctx_param_ext_17720 +
                                                    i_14780 *
                                                    ctx_param_ext_17721];
                
                float zt_arg_14786;
                
                zt_arg_14786 =
                    ((float *) mem_param_17728.mem)[ctx_param_ext_17725 +
                                                    i_14780 *
                                                    ctx_param_ext_17726];
                
                float zt_res_14787 = sin_res_14777 * zt_arg_14786;
                float zt_res_14788 = cos_res_14778 * zt_arg_14785;
                float zm_res_14789 = zt_res_14788 - zt_res_14787;
                float zt_res_14790 = sin_res_14777 * zt_arg_14785;
                float zt_res_14791 = cos_res_14778 * zt_arg_14786;
                float zp_res_14792 = zt_res_14790 + zt_res_14791;
                float zp_res_14793 = defunc_0_f_res_14775 + zm_res_14789;
                float zp_res_14794 = defunc_0_f_res_14776 + zp_res_14792;
                float zm_res_14795 = defunc_0_f_res_14775 - zm_res_14789;
                float zm_res_14796 = defunc_0_f_res_14776 - zp_res_14792;
                int32_t x_14797 = sdiv32(x_14765, ns_14750);
                int32_t x_14798 = mul32(ns_14750, x_14797);
                int32_t x_14799 = mul32(2, x_14798);
                int32_t idxD_14800 = add32(i32_arg_14766, x_14799);
                int64_t i32_res_14801 = sext_i32_i64(idxD_14800);
                int32_t i32_arg_14802 = add32(ns_14750, idxD_14800);
                int64_t i32_res_14803 = sext_i32_i64(i32_arg_14802);
                
                ((int64_t *) mem_17762)[i_16403] = i32_res_14801;
                ((float *) mem_17765)[i_16403] = zp_res_14793;
                ((float *) mem_17768)[i_16403] = zp_res_14794;
                ((int64_t *) mem_17771)[i_16403] = i32_res_14803;
                ((float *) mem_17774)[i_16403] = zm_res_14795;
                ((float *) mem_17777)[i_16403] = zm_res_14796;
            }
            for (int64_t write_iter_16410 = 0; write_iter_16410 <
                 iota_arg_14709; write_iter_16410++) {
                int64_t write_iv_16413;
                
                write_iv_16413 = ((int64_t *) mem_17762)[write_iter_16410];
                
                int64_t write_iv_16416;
                
                write_iv_16416 = ((int64_t *) mem_17771)[write_iter_16410];
                if (sle64((int64_t) 0, write_iv_16413) && slt64(write_iv_16413,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17733.mem + (ctx_param_ext_17730 +
                                                       ctx_param_ext_17731 *
                                                       write_iv_16413) *
                                (int64_t) 4, mem_17765 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16416) && slt64(write_iv_16416,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17733.mem + (ctx_param_ext_17730 +
                                                       ctx_param_ext_17731 *
                                                       write_iv_16416) *
                                (int64_t) 4, mem_17774 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16413) && slt64(write_iv_16413,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17738.mem + (ctx_param_ext_17735 +
                                                       ctx_param_ext_17736 *
                                                       write_iv_16413) *
                                (int64_t) 4, mem_17768 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16416) && slt64(write_iv_16416,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17738.mem + (ctx_param_ext_17735 +
                                                       ctx_param_ext_17736 *
                                                       write_iv_16416) *
                                (int64_t) 4, mem_17777 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20869 = ctx_param_ext_17729;
            int64_t ctx_param_ext_tmp_20870 = ctx_param_ext_17730;
            int64_t ctx_param_ext_tmp_20871 = ctx_param_ext_17731;
            int64_t ctx_param_ext_tmp_20872 = ctx_param_ext_17732;
            int64_t ctx_param_ext_tmp_20873 = ctx_param_ext_17734;
            int64_t ctx_param_ext_tmp_20874 = ctx_param_ext_17735;
            int64_t ctx_param_ext_tmp_20875 = ctx_param_ext_17736;
            int64_t ctx_param_ext_tmp_20876 = ctx_param_ext_17737;
            int64_t ctx_param_ext_tmp_20877 = ctx_param_ext_17719;
            int64_t ctx_param_ext_tmp_20878 = ctx_param_ext_17720;
            int64_t ctx_param_ext_tmp_20879 = ctx_param_ext_17721;
            int64_t ctx_param_ext_tmp_20880 = ctx_param_ext_17722;
            int64_t ctx_param_ext_tmp_20881 = ctx_param_ext_17724;
            int64_t ctx_param_ext_tmp_20882 = ctx_param_ext_17725;
            int64_t ctx_param_ext_tmp_20883 = ctx_param_ext_17726;
            int64_t ctx_param_ext_tmp_20884 = ctx_param_ext_17727;
            
            if (memblock_set(ctx, &mem_param_tmp_20885, &mem_param_17733,
                             "mem_param_17733") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20886, &mem_param_17738,
                             "mem_param_17738") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20887, &mem_param_17723,
                             "mem_param_17723") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20888, &mem_param_17728,
                             "mem_param_17728") != 0)
                return 1;
            ctx_param_ext_17719 = ctx_param_ext_tmp_20869;
            ctx_param_ext_17720 = ctx_param_ext_tmp_20870;
            ctx_param_ext_17721 = ctx_param_ext_tmp_20871;
            ctx_param_ext_17722 = ctx_param_ext_tmp_20872;
            ctx_param_ext_17724 = ctx_param_ext_tmp_20873;
            ctx_param_ext_17725 = ctx_param_ext_tmp_20874;
            ctx_param_ext_17726 = ctx_param_ext_tmp_20875;
            ctx_param_ext_17727 = ctx_param_ext_tmp_20876;
            ctx_param_ext_17729 = ctx_param_ext_tmp_20877;
            ctx_param_ext_17730 = ctx_param_ext_tmp_20878;
            ctx_param_ext_17731 = ctx_param_ext_tmp_20879;
            ctx_param_ext_17732 = ctx_param_ext_tmp_20880;
            ctx_param_ext_17734 = ctx_param_ext_tmp_20881;
            ctx_param_ext_17735 = ctx_param_ext_tmp_20882;
            ctx_param_ext_17736 = ctx_param_ext_tmp_20883;
            ctx_param_ext_17737 = ctx_param_ext_tmp_20884;
            if (memblock_set(ctx, &mem_param_17723, &mem_param_tmp_20885,
                             "mem_param_tmp_20885") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17728, &mem_param_tmp_20886,
                             "mem_param_tmp_20886") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17733, &mem_param_tmp_20887,
                             "mem_param_tmp_20887") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17738, &mem_param_tmp_20888,
                             "mem_param_tmp_20888") != 0)
                return 1;
        }
        ext_17889 = ctx_param_ext_17719;
        ext_17888 = ctx_param_ext_17720;
        ext_17887 = ctx_param_ext_17721;
        ext_17886 = ctx_param_ext_17722;
        ext_17885 = ctx_param_ext_17724;
        ext_17884 = ctx_param_ext_17725;
        ext_17883 = ctx_param_ext_17726;
        ext_17882 = ctx_param_ext_17727;
        ext_17881 = ctx_param_ext_17729;
        ext_17880 = ctx_param_ext_17730;
        ext_17879 = ctx_param_ext_17731;
        ext_17878 = ctx_param_ext_17732;
        ext_17877 = ctx_param_ext_17734;
        ext_17876 = ctx_param_ext_17735;
        ext_17875 = ctx_param_ext_17736;
        ext_17874 = ctx_param_ext_17737;
        if (memblock_set(ctx, &ext_mem_17873, &mem_param_17723,
                         "mem_param_17723") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17872, &mem_param_17728,
                         "mem_param_17728") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17871, &mem_param_17733,
                         "mem_param_17733") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17870, &mem_param_17738,
                         "mem_param_17738") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17137 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17519.mem + ext_17534 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17519, "ext_mem_17519") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17141 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17518.mem + ext_17530 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17518, "ext_mem_17518") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17145 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17696.mem + ext_17711 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17696, "ext_mem_17696") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17149 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17695.mem + ext_17707 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17695, "ext_mem_17695") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17153 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17873.mem + ext_17888 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17873, "ext_mem_17873") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_17157 + i_16435 * m_11476 * (int64_t) 4,
                    ext_mem_17872.mem + ext_17884 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17872, "ext_mem_17872") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_17220, "mem_17220") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17223, "mem_17223") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17226, "mem_17226") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17316, "mem_17316") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17331, "mem_17331") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17346, "mem_17346") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17361, "mem_17361") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17364, "mem_17364") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17538, "mem_17538") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17541, "mem_17541") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17715, "mem_17715") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17718, "mem_17718") != 0)
        return 1;
    
    bool loop_cond_14688 = slt64((int64_t) 1, n_11475);
    bool r_14689;
    int32_t r_14690;
    int64_t r_14691;
    bool loop_while_14692;
    int32_t r_14693;
    int64_t n_14694;
    
    loop_while_14692 = loop_cond_14688;
    r_14693 = 0;
    n_14694 = n_11475;
    while (loop_while_14692) {
        int64_t n_14695 = sdiv64(n_14694, (int64_t) 2);
        int32_t r_14696 = add32(1, r_14693);
        bool loop_cond_14697 = slt64((int64_t) 1, n_14695);
        bool loop_while_tmp_20902 = loop_cond_14697;
        int32_t r_tmp_20903 = r_14696;
        int64_t n_tmp_20904 = n_14695;
        
        loop_while_14692 = loop_while_tmp_20902;
        r_14693 = r_tmp_20903;
        n_14694 = n_tmp_20904;
    }
    r_14689 = loop_while_14692;
    r_14690 = r_14693;
    r_14691 = n_14694;
    
    int64_t i32_res_14816 = sext_i32_i64(r_14690);
    int64_t iota_arg_14817 = sdiv64(n_11475, (int64_t) 2);
    bool bounds_invalid_upwards_14818 = slt64(iota_arg_14817, (int64_t) 0);
    bool valid_14819 = !bounds_invalid_upwards_14818;
    bool range_valid_c_14820;
    
    if (!valid_14819) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) iota_arg_14817, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:34:14-34\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_14822 = slt64(i32_res_14816, (int64_t) 0);
    bool valid_14823 = !bounds_invalid_upwards_14822;
    bool range_valid_c_14824;
    
    if (!valid_14823) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14816, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17938 = (int64_t) 4 * i32_res_14816;
    int64_t bytes_17939 = smax64((int64_t) 0, binop_y_17938);
    
    if (mem_17940_cached_sizze_21360 < bytes_17939) {
        err = lexical_realloc(&ctx->error, &mem_17940,
                              &mem_17940_cached_sizze_21360, bytes_17939);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16938 = 0; i_16938 < r_14690; i_16938++) {
        int64_t i_16444 = sext_i32_i64(i_16938);
        bool nonnegative_14831 = sle32(0, i_16938);
        bool nonzzero_cert_14832;
        
        if (!nonnegative_14831) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14833 = shl32(1, i_16938);
        
        ((int32_t *) mem_17940)[i_16444] = defunc_0_f_res_14833;
    }
    
    bool loop_nonempty_14834 = slt64((int64_t) 0, i32_res_14816);
    int32_t i64_res_14835 = sext_i64_i32(n_11475);
    int32_t y_14836 = sdiv32(i64_res_14835, 2);
    int64_t conc_tmp_14837 = iota_arg_14817 + iota_arg_14817;
    bool dim_match_14838 = n_11475 == conc_tmp_14837;
    bool loop_not_taken_14839 = !loop_nonempty_14834;
    bool protect_assert_disj_14840 = dim_match_14838 || loop_not_taken_14839;
    bool empty_or_match_cert_14841;
    
    if (!protect_assert_disj_14840) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14842;
    
    if (!protect_assert_disj_14840) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_15761;
    int32_t r_15762;
    int64_t r_15763;
    bool loop_while_15764;
    int32_t r_15765;
    int64_t n_15766;
    
    loop_while_15764 = loop_cond_14688;
    r_15765 = 0;
    n_15766 = n_11475;
    while (loop_while_15764) {
        int64_t n_15767 = sdiv64(n_15766, (int64_t) 2);
        int32_t r_15768 = add32(1, r_15765);
        bool loop_cond_15769 = slt64((int64_t) 1, n_15767);
        bool loop_while_tmp_20906 = loop_cond_15769;
        int32_t r_tmp_20907 = r_15768;
        int64_t n_tmp_20908 = n_15767;
        
        loop_while_15764 = loop_while_tmp_20906;
        r_15765 = r_tmp_20907;
        n_15766 = n_tmp_20908;
    }
    r_15761 = loop_while_15764;
    r_15762 = r_15765;
    r_15763 = n_15766;
    
    int64_t i32_res_15888 = sext_i32_i64(r_15762);
    bool loop_nonempty_15906 = slt64((int64_t) 0, i32_res_15888);
    bool loop_not_taken_15911 = !loop_nonempty_15906;
    bool protect_assert_disj_15912 = dim_match_14838 || loop_not_taken_15911;
    bool empty_or_match_cert_15914;
    
    if (!protect_assert_disj_15912) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15913;
    
    if (!protect_assert_disj_15912) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15894 = slt64(i32_res_15888, (int64_t) 0);
    bool valid_15895 = !bounds_invalid_upwards_15894;
    bool range_valid_c_15896;
    
    if (!valid_15895) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15888, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17953 = (int64_t) 4 * i32_res_15888;
    int64_t bytes_17954 = smax64((int64_t) 0, binop_y_17953);
    
    if (mem_17955_cached_sizze_21361 < bytes_17954) {
        err = lexical_realloc(&ctx->error, &mem_17955,
                              &mem_17955_cached_sizze_21361, bytes_17954);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16939 = 0; i_16939 < r_15762; i_16939++) {
        int64_t i_16448 = sext_i32_i64(i_16939);
        bool nonnegative_15903 = sle32(0, i_16939);
        bool nonzzero_cert_15904;
        
        if (!nonnegative_15903) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15905 = shl32(1, i_16939);
        
        ((int32_t *) mem_17955)[i_16448] = defunc_0_f_res_15905;
    }
    
    bool r_15225;
    int32_t r_15226;
    int64_t r_15227;
    bool loop_while_15228;
    int32_t r_15229;
    int64_t n_15230;
    
    loop_while_15228 = loop_cond_14688;
    r_15229 = 0;
    n_15230 = n_11475;
    while (loop_while_15228) {
        int64_t n_15231 = sdiv64(n_15230, (int64_t) 2);
        int32_t r_15232 = add32(1, r_15229);
        bool loop_cond_15233 = slt64((int64_t) 1, n_15231);
        bool loop_while_tmp_20910 = loop_cond_15233;
        int32_t r_tmp_20911 = r_15232;
        int64_t n_tmp_20912 = n_15231;
        
        loop_while_15228 = loop_while_tmp_20910;
        r_15229 = r_tmp_20911;
        n_15230 = n_tmp_20912;
    }
    r_15225 = loop_while_15228;
    r_15226 = r_15229;
    r_15227 = n_15230;
    
    int64_t i32_res_15352 = sext_i32_i64(r_15226);
    bool loop_nonempty_15370 = slt64((int64_t) 0, i32_res_15352);
    bool loop_not_taken_15375 = !loop_nonempty_15370;
    bool protect_assert_disj_15376 = dim_match_14838 || loop_not_taken_15375;
    bool empty_or_match_cert_15378;
    
    if (!protect_assert_disj_15376) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15377;
    
    if (!protect_assert_disj_15376) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15358 = slt64(i32_res_15352, (int64_t) 0);
    bool valid_15359 = !bounds_invalid_upwards_15358;
    bool range_valid_c_15360;
    
    if (!valid_15359) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15352, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17968 = (int64_t) 4 * i32_res_15352;
    int64_t bytes_17969 = smax64((int64_t) 0, binop_y_17968);
    
    if (mem_17970_cached_sizze_21362 < bytes_17969) {
        err = lexical_realloc(&ctx->error, &mem_17970,
                              &mem_17970_cached_sizze_21362, bytes_17969);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16940 = 0; i_16940 < r_15226; i_16940++) {
        int64_t i_16452 = sext_i32_i64(i_16940);
        bool nonnegative_15367 = sle32(0, i_16940);
        bool nonzzero_cert_15368;
        
        if (!nonnegative_15367) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15369 = shl32(1, i_16940);
        
        ((int32_t *) mem_17970)[i_16452] = defunc_0_f_res_15369;
    }
    
    int64_t binop_x_17983 = n_11475 * m_11476;
    int64_t binop_y_17984 = (int64_t) 4 * binop_x_17983;
    int64_t bytes_17985 = smax64((int64_t) 0, binop_y_17984);
    
    if (mem_17986_cached_sizze_21363 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17986,
                              &mem_17986_cached_sizze_21363, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17990_cached_sizze_21364 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17990,
                              &mem_17990_cached_sizze_21364, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17994_cached_sizze_21365 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17994,
                              &mem_17994_cached_sizze_21365, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17998_cached_sizze_21366 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17998,
                              &mem_17998_cached_sizze_21366, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18002_cached_sizze_21367 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_18002,
                              &mem_18002_cached_sizze_21367, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18006_cached_sizze_21368 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_18006,
                              &mem_18006_cached_sizze_21368, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18067 = (int64_t) 4 * n_11475;
    int64_t bytes_18068 = smax64((int64_t) 0, binop_y_18067);
    
    if (memblock_alloc(ctx, &mem_18069, bytes_18068, "mem_18069")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18072, bytes_18068, "mem_18072")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18075, bytes_18068, "mem_18075")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18078, bytes_18068, "mem_18078")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18081, bytes_18068, "mem_18081")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18084, bytes_18068, "mem_18084")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18087, bytes_18068, "mem_18087")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18090, bytes_18068, "mem_18090")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18119 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18120 = smax64((int64_t) 0, binop_y_18119);
    
    if (mem_18121_cached_sizze_21369 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18121,
                              &mem_18121_cached_sizze_21369, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18134 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18135 = smax64((int64_t) 0, binop_y_18134);
    
    if (mem_18136_cached_sizze_21370 < bytes_18135) {
        err = lexical_realloc(&ctx->error, &mem_18136,
                              &mem_18136_cached_sizze_21370, bytes_18135);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18139_cached_sizze_21371 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18139,
                              &mem_18139_cached_sizze_21371, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18142_cached_sizze_21372 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18142,
                              &mem_18142_cached_sizze_21372, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18145_cached_sizze_21373 < bytes_18135) {
        err = lexical_realloc(&ctx->error, &mem_18145,
                              &mem_18145_cached_sizze_21373, bytes_18135);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18148_cached_sizze_21374 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18148,
                              &mem_18148_cached_sizze_21374, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18151_cached_sizze_21375 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18151,
                              &mem_18151_cached_sizze_21375, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18266, bytes_18068, "mem_18266")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18269, bytes_18068, "mem_18269")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18298 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18299 = smax64((int64_t) 0, binop_y_18298);
    
    if (mem_18300_cached_sizze_21376 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18300,
                              &mem_18300_cached_sizze_21376, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18313 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18314 = smax64((int64_t) 0, binop_y_18313);
    
    if (mem_18315_cached_sizze_21377 < bytes_18314) {
        err = lexical_realloc(&ctx->error, &mem_18315,
                              &mem_18315_cached_sizze_21377, bytes_18314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18318_cached_sizze_21378 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18318,
                              &mem_18318_cached_sizze_21378, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18321_cached_sizze_21379 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18321,
                              &mem_18321_cached_sizze_21379, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18324_cached_sizze_21380 < bytes_18314) {
        err = lexical_realloc(&ctx->error, &mem_18324,
                              &mem_18324_cached_sizze_21380, bytes_18314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18327_cached_sizze_21381 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18327,
                              &mem_18327_cached_sizze_21381, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18330_cached_sizze_21382 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18330,
                              &mem_18330_cached_sizze_21382, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18445, bytes_18068, "mem_18445")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18448, bytes_18068, "mem_18448")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18477 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18478 = smax64((int64_t) 0, binop_y_18477);
    
    if (mem_18479_cached_sizze_21383 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18479,
                              &mem_18479_cached_sizze_21383, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18492 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18493 = smax64((int64_t) 0, binop_y_18492);
    
    if (mem_18494_cached_sizze_21384 < bytes_18493) {
        err = lexical_realloc(&ctx->error, &mem_18494,
                              &mem_18494_cached_sizze_21384, bytes_18493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18497_cached_sizze_21385 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18497,
                              &mem_18497_cached_sizze_21385, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18500_cached_sizze_21386 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18500,
                              &mem_18500_cached_sizze_21386, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18503_cached_sizze_21387 < bytes_18493) {
        err = lexical_realloc(&ctx->error, &mem_18503,
                              &mem_18503_cached_sizze_21387, bytes_18493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18506_cached_sizze_21388 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18506,
                              &mem_18506_cached_sizze_21388, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18509_cached_sizze_21389 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18509,
                              &mem_18509_cached_sizze_21389, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16574 = 0; i_16574 < m_11476; i_16574++) {
        for (int64_t i_20920 = 0; i_20920 < n_11475; i_20920++) {
            float tmp_20921;
            
            tmp_20921 = ((float *) mem_17153)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20920 * m_11476];
            ((float *) mem_18069.mem)[i_20920] = tmp_20921;
        }
        for (int64_t i_20922 = 0; i_20922 < n_11475; i_20922++) {
            float tmp_20923;
            
            tmp_20923 = ((float *) mem_17157)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20922 * m_11476];
            ((float *) mem_18072.mem)[i_20922] = tmp_20923;
        }
        for (int64_t i_20924 = 0; i_20924 < n_11475; i_20924++) {
            float tmp_20925;
            
            tmp_20925 = ((float *) mem_17145)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20924 * m_11476];
            ((float *) mem_18075.mem)[i_20924] = tmp_20925;
        }
        for (int64_t i_20926 = 0; i_20926 < n_11475; i_20926++) {
            float tmp_20927;
            
            tmp_20927 = ((float *) mem_17149)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20926 * m_11476];
            ((float *) mem_18078.mem)[i_20926] = tmp_20927;
        }
        for (int64_t i_20928 = 0; i_20928 < n_11475; i_20928++) {
            float tmp_20929;
            
            tmp_20929 = ((float *) mem_17137)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20928 * m_11476];
            ((float *) mem_18081.mem)[i_20928] = tmp_20929;
        }
        for (int64_t i_20930 = 0; i_20930 < n_11475; i_20930++) {
            float tmp_20931;
            
            tmp_20931 = ((float *) mem_17141)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20930 * m_11476];
            ((float *) mem_18084.mem)[i_20930] = tmp_20931;
        }
        for (int64_t i_20932 = 0; i_20932 < n_11475; i_20932++) {
            float tmp_20933;
            
            tmp_20933 = ((float *) mem_17153)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20932 * m_11476];
            ((float *) mem_18087.mem)[i_20932] = tmp_20933;
        }
        for (int64_t i_20934 = 0; i_20934 < n_11475; i_20934++) {
            float tmp_20935;
            
            tmp_20935 = ((float *) mem_17157)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20934 * m_11476];
            ((float *) mem_18090.mem)[i_20934] = tmp_20935;
        }
        
        int64_t ext_18263;
        int64_t ext_18262;
        int64_t ext_18261;
        int64_t ext_18260;
        int64_t ext_18259;
        int64_t ext_18258;
        int64_t ext_18257;
        int64_t ext_18256;
        int64_t ext_18255;
        int64_t ext_18254;
        int64_t ext_18253;
        int64_t ext_18252;
        int64_t ext_18251;
        int64_t ext_18250;
        int64_t ext_18249;
        int64_t ext_18248;
        int64_t ctx_param_ext_18091;
        int64_t ctx_param_ext_18092;
        int64_t ctx_param_ext_18093;
        int64_t ctx_param_ext_18094;
        int64_t ctx_param_ext_18096;
        int64_t ctx_param_ext_18097;
        int64_t ctx_param_ext_18098;
        int64_t ctx_param_ext_18099;
        int64_t ctx_param_ext_18101;
        int64_t ctx_param_ext_18102;
        int64_t ctx_param_ext_18103;
        int64_t ctx_param_ext_18104;
        int64_t ctx_param_ext_18106;
        int64_t ctx_param_ext_18107;
        int64_t ctx_param_ext_18108;
        int64_t ctx_param_ext_18109;
        
        ctx_param_ext_18091 = n_11475;
        ctx_param_ext_18092 = (int64_t) 0;
        ctx_param_ext_18093 = (int64_t) 1;
        ctx_param_ext_18094 = n_11475;
        ctx_param_ext_18096 = n_11475;
        ctx_param_ext_18097 = (int64_t) 0;
        ctx_param_ext_18098 = (int64_t) 1;
        ctx_param_ext_18099 = n_11475;
        ctx_param_ext_18101 = n_11475;
        ctx_param_ext_18102 = (int64_t) 0;
        ctx_param_ext_18103 = (int64_t) 1;
        ctx_param_ext_18104 = n_11475;
        ctx_param_ext_18106 = n_11475;
        ctx_param_ext_18107 = (int64_t) 0;
        ctx_param_ext_18108 = (int64_t) 1;
        ctx_param_ext_18109 = n_11475;
        if (memblock_set(ctx, &mem_param_18095, &mem_18069, "mem_18069") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18100, &mem_18072, "mem_18072") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18105, &mem_18087, "mem_18087") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18110, &mem_18090, "mem_18090") != 0)
            return 1;
        
        int32_t ns_14858;
        
        for (int64_t i_14853 = 0; i_14853 < i32_res_14816; i_14853++) {
            ns_14858 = ((int32_t *) mem_17940)[i_14853];
            for (int64_t i_16456 = 0; i_16456 < iota_arg_14817; i_16456++) {
                int32_t defunc_0_f_res_14861 = sext_i64_i32(i_16456);
                
                ((int32_t *) mem_18121)[i_16456] = defunc_0_f_res_14861;
            }
            
            int32_t i32_arg_14862 = mul32(2, ns_14858);
            float i32_res_14863 = sitofp_i32_f32(i32_arg_14862);
            bool zzero_14864 = ns_14858 == 0;
            bool nonzzero_14865 = !zzero_14864;
            bool nonzzero_cert_14866;
            
            if (!nonzzero_14865) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16470 = 0; i_16470 < iota_arg_14817; i_16470++) {
                int32_t x_14873;
                
                x_14873 = ((int32_t *) mem_18121)[i_16470];
                
                int32_t i32_arg_14874 = smod32(x_14873, ns_14858);
                float i32_res_14875 = sitofp_i32_f32(i32_arg_14874);
                float zt_res_14876 = -6.2831855F * i32_res_14875;
                float zs_res_14877 = zt_res_14876 / i32_res_14863;
                int64_t j_14878 = sext_i32_i64(x_14873);
                bool x_14879 = sle64((int64_t) 0, j_14878);
                bool y_14880 = slt64(j_14878, n_11475);
                bool bounds_check_14881 = x_14879 && y_14880;
                bool index_certs_14882;
                
                if (!bounds_check_14881) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_14878,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_14883;
                
                defunc_0_f_res_14883 =
                    ((float *) mem_param_18095.mem)[ctx_param_ext_18092 +
                                                    j_14878 *
                                                    ctx_param_ext_18093];
                
                float defunc_0_f_res_14884;
                
                defunc_0_f_res_14884 =
                    ((float *) mem_param_18100.mem)[ctx_param_ext_18097 +
                                                    j_14878 *
                                                    ctx_param_ext_18098];
                
                float sin_res_14885;
                
                sin_res_14885 = futrts_sin32(zs_res_14877);
                
                float cos_res_14886;
                
                cos_res_14886 = futrts_cos32(zs_res_14877);
                
                int32_t i_14887 = add32(y_14836, x_14873);
                int64_t i_14888 = sext_i32_i64(i_14887);
                bool x_14889 = sle64((int64_t) 0, i_14888);
                bool y_14890 = slt64(i_14888, n_11475);
                bool bounds_check_14891 = x_14889 && y_14890;
                bool index_certs_14892;
                
                if (!bounds_check_14891) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_14888,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_14893;
                
                zt_arg_14893 =
                    ((float *) mem_param_18095.mem)[ctx_param_ext_18092 +
                                                    i_14888 *
                                                    ctx_param_ext_18093];
                
                float zt_arg_14894;
                
                zt_arg_14894 =
                    ((float *) mem_param_18100.mem)[ctx_param_ext_18097 +
                                                    i_14888 *
                                                    ctx_param_ext_18098];
                
                float zt_res_14895 = sin_res_14885 * zt_arg_14894;
                float zt_res_14896 = cos_res_14886 * zt_arg_14893;
                float zm_res_14897 = zt_res_14896 - zt_res_14895;
                float zt_res_14898 = sin_res_14885 * zt_arg_14893;
                float zt_res_14899 = cos_res_14886 * zt_arg_14894;
                float zp_res_14900 = zt_res_14898 + zt_res_14899;
                float zp_res_14901 = defunc_0_f_res_14883 + zm_res_14897;
                float zp_res_14902 = defunc_0_f_res_14884 + zp_res_14900;
                float zm_res_14903 = defunc_0_f_res_14883 - zm_res_14897;
                float zm_res_14904 = defunc_0_f_res_14884 - zp_res_14900;
                int32_t x_14905 = sdiv32(x_14873, ns_14858);
                int32_t x_14906 = mul32(ns_14858, x_14905);
                int32_t x_14907 = mul32(2, x_14906);
                int32_t idxD_14908 = add32(i32_arg_14874, x_14907);
                int64_t i32_res_14909 = sext_i32_i64(idxD_14908);
                int32_t i32_arg_14910 = add32(ns_14858, idxD_14908);
                int64_t i32_res_14911 = sext_i32_i64(i32_arg_14910);
                
                ((int64_t *) mem_18136)[i_16470] = i32_res_14909;
                ((float *) mem_18139)[i_16470] = zp_res_14901;
                ((float *) mem_18142)[i_16470] = zp_res_14902;
                ((int64_t *) mem_18145)[i_16470] = i32_res_14911;
                ((float *) mem_18148)[i_16470] = zm_res_14903;
                ((float *) mem_18151)[i_16470] = zm_res_14904;
            }
            for (int64_t write_iter_16477 = 0; write_iter_16477 <
                 iota_arg_14817; write_iter_16477++) {
                int64_t write_iv_16480;
                
                write_iv_16480 = ((int64_t *) mem_18136)[write_iter_16477];
                
                int64_t write_iv_16483;
                
                write_iv_16483 = ((int64_t *) mem_18145)[write_iter_16477];
                if (sle64((int64_t) 0, write_iv_16480) && slt64(write_iv_16480,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18105.mem + (ctx_param_ext_18102 +
                                                       ctx_param_ext_18103 *
                                                       write_iv_16480) *
                                (int64_t) 4, mem_18139 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16483) && slt64(write_iv_16483,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18105.mem + (ctx_param_ext_18102 +
                                                       ctx_param_ext_18103 *
                                                       write_iv_16483) *
                                (int64_t) 4, mem_18148 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16480) && slt64(write_iv_16480,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18110.mem + (ctx_param_ext_18107 +
                                                       ctx_param_ext_18108 *
                                                       write_iv_16480) *
                                (int64_t) 4, mem_18142 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16483) && slt64(write_iv_16483,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18110.mem + (ctx_param_ext_18107 +
                                                       ctx_param_ext_18108 *
                                                       write_iv_16483) *
                                (int64_t) 4, mem_18151 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20936 = ctx_param_ext_18101;
            int64_t ctx_param_ext_tmp_20937 = ctx_param_ext_18102;
            int64_t ctx_param_ext_tmp_20938 = ctx_param_ext_18103;
            int64_t ctx_param_ext_tmp_20939 = ctx_param_ext_18104;
            int64_t ctx_param_ext_tmp_20940 = ctx_param_ext_18106;
            int64_t ctx_param_ext_tmp_20941 = ctx_param_ext_18107;
            int64_t ctx_param_ext_tmp_20942 = ctx_param_ext_18108;
            int64_t ctx_param_ext_tmp_20943 = ctx_param_ext_18109;
            int64_t ctx_param_ext_tmp_20944 = ctx_param_ext_18091;
            int64_t ctx_param_ext_tmp_20945 = ctx_param_ext_18092;
            int64_t ctx_param_ext_tmp_20946 = ctx_param_ext_18093;
            int64_t ctx_param_ext_tmp_20947 = ctx_param_ext_18094;
            int64_t ctx_param_ext_tmp_20948 = ctx_param_ext_18096;
            int64_t ctx_param_ext_tmp_20949 = ctx_param_ext_18097;
            int64_t ctx_param_ext_tmp_20950 = ctx_param_ext_18098;
            int64_t ctx_param_ext_tmp_20951 = ctx_param_ext_18099;
            
            if (memblock_set(ctx, &mem_param_tmp_20952, &mem_param_18105,
                             "mem_param_18105") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20953, &mem_param_18110,
                             "mem_param_18110") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20954, &mem_param_18095,
                             "mem_param_18095") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20955, &mem_param_18100,
                             "mem_param_18100") != 0)
                return 1;
            ctx_param_ext_18091 = ctx_param_ext_tmp_20936;
            ctx_param_ext_18092 = ctx_param_ext_tmp_20937;
            ctx_param_ext_18093 = ctx_param_ext_tmp_20938;
            ctx_param_ext_18094 = ctx_param_ext_tmp_20939;
            ctx_param_ext_18096 = ctx_param_ext_tmp_20940;
            ctx_param_ext_18097 = ctx_param_ext_tmp_20941;
            ctx_param_ext_18098 = ctx_param_ext_tmp_20942;
            ctx_param_ext_18099 = ctx_param_ext_tmp_20943;
            ctx_param_ext_18101 = ctx_param_ext_tmp_20944;
            ctx_param_ext_18102 = ctx_param_ext_tmp_20945;
            ctx_param_ext_18103 = ctx_param_ext_tmp_20946;
            ctx_param_ext_18104 = ctx_param_ext_tmp_20947;
            ctx_param_ext_18106 = ctx_param_ext_tmp_20948;
            ctx_param_ext_18107 = ctx_param_ext_tmp_20949;
            ctx_param_ext_18108 = ctx_param_ext_tmp_20950;
            ctx_param_ext_18109 = ctx_param_ext_tmp_20951;
            if (memblock_set(ctx, &mem_param_18095, &mem_param_tmp_20952,
                             "mem_param_tmp_20952") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18100, &mem_param_tmp_20953,
                             "mem_param_tmp_20953") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18105, &mem_param_tmp_20954,
                             "mem_param_tmp_20954") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18110, &mem_param_tmp_20955,
                             "mem_param_tmp_20955") != 0)
                return 1;
        }
        ext_18263 = ctx_param_ext_18091;
        ext_18262 = ctx_param_ext_18092;
        ext_18261 = ctx_param_ext_18093;
        ext_18260 = ctx_param_ext_18094;
        ext_18259 = ctx_param_ext_18096;
        ext_18258 = ctx_param_ext_18097;
        ext_18257 = ctx_param_ext_18098;
        ext_18256 = ctx_param_ext_18099;
        ext_18255 = ctx_param_ext_18101;
        ext_18254 = ctx_param_ext_18102;
        ext_18253 = ctx_param_ext_18103;
        ext_18252 = ctx_param_ext_18104;
        ext_18251 = ctx_param_ext_18106;
        ext_18250 = ctx_param_ext_18107;
        ext_18249 = ctx_param_ext_18108;
        ext_18248 = ctx_param_ext_18109;
        if (memblock_set(ctx, &ext_mem_18247, &mem_param_18095,
                         "mem_param_18095") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18246, &mem_param_18100,
                         "mem_param_18100") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18245, &mem_param_18105,
                         "mem_param_18105") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18244, &mem_param_18110,
                         "mem_param_18110") != 0)
            return 1;
        for (int64_t i_20969 = 0; i_20969 < n_11475; i_20969++) {
            float tmp_20970;
            
            tmp_20970 = ((float *) mem_17145)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20969 * m_11476];
            ((float *) mem_18266.mem)[i_20969] = tmp_20970;
        }
        for (int64_t i_20971 = 0; i_20971 < n_11475; i_20971++) {
            float tmp_20972;
            
            tmp_20972 = ((float *) mem_17149)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20971 * m_11476];
            ((float *) mem_18269.mem)[i_20971] = tmp_20972;
        }
        
        int64_t ext_18442;
        int64_t ext_18441;
        int64_t ext_18440;
        int64_t ext_18439;
        int64_t ext_18438;
        int64_t ext_18437;
        int64_t ext_18436;
        int64_t ext_18435;
        int64_t ext_18434;
        int64_t ext_18433;
        int64_t ext_18432;
        int64_t ext_18431;
        int64_t ext_18430;
        int64_t ext_18429;
        int64_t ext_18428;
        int64_t ext_18427;
        int64_t ctx_param_ext_18270;
        int64_t ctx_param_ext_18271;
        int64_t ctx_param_ext_18272;
        int64_t ctx_param_ext_18273;
        int64_t ctx_param_ext_18275;
        int64_t ctx_param_ext_18276;
        int64_t ctx_param_ext_18277;
        int64_t ctx_param_ext_18278;
        int64_t ctx_param_ext_18280;
        int64_t ctx_param_ext_18281;
        int64_t ctx_param_ext_18282;
        int64_t ctx_param_ext_18283;
        int64_t ctx_param_ext_18285;
        int64_t ctx_param_ext_18286;
        int64_t ctx_param_ext_18287;
        int64_t ctx_param_ext_18288;
        
        ctx_param_ext_18270 = n_11475;
        ctx_param_ext_18271 = (int64_t) 0;
        ctx_param_ext_18272 = (int64_t) 1;
        ctx_param_ext_18273 = n_11475;
        ctx_param_ext_18275 = n_11475;
        ctx_param_ext_18276 = (int64_t) 0;
        ctx_param_ext_18277 = (int64_t) 1;
        ctx_param_ext_18278 = n_11475;
        ctx_param_ext_18280 = n_11475;
        ctx_param_ext_18281 = (int64_t) 0;
        ctx_param_ext_18282 = (int64_t) 1;
        ctx_param_ext_18283 = n_11475;
        ctx_param_ext_18285 = n_11475;
        ctx_param_ext_18286 = (int64_t) 0;
        ctx_param_ext_18287 = (int64_t) 1;
        ctx_param_ext_18288 = n_11475;
        if (memblock_set(ctx, &mem_param_18274, &mem_18075, "mem_18075") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18279, &mem_18078, "mem_18078") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18284, &mem_18266, "mem_18266") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18289, &mem_18269, "mem_18269") != 0)
            return 1;
        
        int32_t ns_15394;
        
        for (int64_t i_15389 = 0; i_15389 < i32_res_15352; i_15389++) {
            ns_15394 = ((int32_t *) mem_17970)[i_15389];
            for (int64_t i_16492 = 0; i_16492 < iota_arg_14817; i_16492++) {
                int32_t defunc_0_f_res_15397 = sext_i64_i32(i_16492);
                
                ((int32_t *) mem_18300)[i_16492] = defunc_0_f_res_15397;
            }
            
            int32_t i32_arg_15398 = mul32(2, ns_15394);
            float i32_res_15399 = sitofp_i32_f32(i32_arg_15398);
            bool zzero_15400 = ns_15394 == 0;
            bool nonzzero_15401 = !zzero_15400;
            bool nonzzero_cert_15402;
            
            if (!nonzzero_15401) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16506 = 0; i_16506 < iota_arg_14817; i_16506++) {
                int32_t x_15409;
                
                x_15409 = ((int32_t *) mem_18300)[i_16506];
                
                int32_t i32_arg_15410 = smod32(x_15409, ns_15394);
                float i32_res_15411 = sitofp_i32_f32(i32_arg_15410);
                float zt_res_15412 = -6.2831855F * i32_res_15411;
                float zs_res_15413 = zt_res_15412 / i32_res_15399;
                int64_t j_15414 = sext_i32_i64(x_15409);
                bool x_15415 = sle64((int64_t) 0, j_15414);
                bool y_15416 = slt64(j_15414, n_11475);
                bool bounds_check_15417 = x_15415 && y_15416;
                bool index_certs_15418;
                
                if (!bounds_check_15417) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15414,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15419;
                
                defunc_0_f_res_15419 =
                    ((float *) mem_param_18274.mem)[ctx_param_ext_18271 +
                                                    j_15414 *
                                                    ctx_param_ext_18272];
                
                float defunc_0_f_res_15420;
                
                defunc_0_f_res_15420 =
                    ((float *) mem_param_18279.mem)[ctx_param_ext_18276 +
                                                    j_15414 *
                                                    ctx_param_ext_18277];
                
                float sin_res_15421;
                
                sin_res_15421 = futrts_sin32(zs_res_15413);
                
                float cos_res_15422;
                
                cos_res_15422 = futrts_cos32(zs_res_15413);
                
                int32_t i_15423 = add32(y_14836, x_15409);
                int64_t i_15424 = sext_i32_i64(i_15423);
                bool x_15425 = sle64((int64_t) 0, i_15424);
                bool y_15426 = slt64(i_15424, n_11475);
                bool bounds_check_15427 = x_15425 && y_15426;
                bool index_certs_15428;
                
                if (!bounds_check_15427) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15424,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15429;
                
                zt_arg_15429 =
                    ((float *) mem_param_18274.mem)[ctx_param_ext_18271 +
                                                    i_15424 *
                                                    ctx_param_ext_18272];
                
                float zt_arg_15430;
                
                zt_arg_15430 =
                    ((float *) mem_param_18279.mem)[ctx_param_ext_18276 +
                                                    i_15424 *
                                                    ctx_param_ext_18277];
                
                float zt_res_15431 = sin_res_15421 * zt_arg_15430;
                float zt_res_15432 = cos_res_15422 * zt_arg_15429;
                float zm_res_15433 = zt_res_15432 - zt_res_15431;
                float zt_res_15434 = sin_res_15421 * zt_arg_15429;
                float zt_res_15435 = cos_res_15422 * zt_arg_15430;
                float zp_res_15436 = zt_res_15434 + zt_res_15435;
                float zp_res_15437 = defunc_0_f_res_15419 + zm_res_15433;
                float zp_res_15438 = defunc_0_f_res_15420 + zp_res_15436;
                float zm_res_15439 = defunc_0_f_res_15419 - zm_res_15433;
                float zm_res_15440 = defunc_0_f_res_15420 - zp_res_15436;
                int32_t x_15441 = sdiv32(x_15409, ns_15394);
                int32_t x_15442 = mul32(ns_15394, x_15441);
                int32_t x_15443 = mul32(2, x_15442);
                int32_t idxD_15444 = add32(i32_arg_15410, x_15443);
                int64_t i32_res_15445 = sext_i32_i64(idxD_15444);
                int32_t i32_arg_15446 = add32(ns_15394, idxD_15444);
                int64_t i32_res_15447 = sext_i32_i64(i32_arg_15446);
                
                ((int64_t *) mem_18315)[i_16506] = i32_res_15445;
                ((float *) mem_18318)[i_16506] = zp_res_15437;
                ((float *) mem_18321)[i_16506] = zp_res_15438;
                ((int64_t *) mem_18324)[i_16506] = i32_res_15447;
                ((float *) mem_18327)[i_16506] = zm_res_15439;
                ((float *) mem_18330)[i_16506] = zm_res_15440;
            }
            for (int64_t write_iter_16513 = 0; write_iter_16513 <
                 iota_arg_14817; write_iter_16513++) {
                int64_t write_iv_16516;
                
                write_iv_16516 = ((int64_t *) mem_18315)[write_iter_16513];
                
                int64_t write_iv_16519;
                
                write_iv_16519 = ((int64_t *) mem_18324)[write_iter_16513];
                if (sle64((int64_t) 0, write_iv_16516) && slt64(write_iv_16516,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18284.mem + (ctx_param_ext_18281 +
                                                       ctx_param_ext_18282 *
                                                       write_iv_16516) *
                                (int64_t) 4, mem_18318 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16519) && slt64(write_iv_16519,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18284.mem + (ctx_param_ext_18281 +
                                                       ctx_param_ext_18282 *
                                                       write_iv_16519) *
                                (int64_t) 4, mem_18327 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16516) && slt64(write_iv_16516,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18289.mem + (ctx_param_ext_18286 +
                                                       ctx_param_ext_18287 *
                                                       write_iv_16516) *
                                (int64_t) 4, mem_18321 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16519) && slt64(write_iv_16519,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18289.mem + (ctx_param_ext_18286 +
                                                       ctx_param_ext_18287 *
                                                       write_iv_16519) *
                                (int64_t) 4, mem_18330 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20973 = ctx_param_ext_18280;
            int64_t ctx_param_ext_tmp_20974 = ctx_param_ext_18281;
            int64_t ctx_param_ext_tmp_20975 = ctx_param_ext_18282;
            int64_t ctx_param_ext_tmp_20976 = ctx_param_ext_18283;
            int64_t ctx_param_ext_tmp_20977 = ctx_param_ext_18285;
            int64_t ctx_param_ext_tmp_20978 = ctx_param_ext_18286;
            int64_t ctx_param_ext_tmp_20979 = ctx_param_ext_18287;
            int64_t ctx_param_ext_tmp_20980 = ctx_param_ext_18288;
            int64_t ctx_param_ext_tmp_20981 = ctx_param_ext_18270;
            int64_t ctx_param_ext_tmp_20982 = ctx_param_ext_18271;
            int64_t ctx_param_ext_tmp_20983 = ctx_param_ext_18272;
            int64_t ctx_param_ext_tmp_20984 = ctx_param_ext_18273;
            int64_t ctx_param_ext_tmp_20985 = ctx_param_ext_18275;
            int64_t ctx_param_ext_tmp_20986 = ctx_param_ext_18276;
            int64_t ctx_param_ext_tmp_20987 = ctx_param_ext_18277;
            int64_t ctx_param_ext_tmp_20988 = ctx_param_ext_18278;
            
            if (memblock_set(ctx, &mem_param_tmp_20989, &mem_param_18284,
                             "mem_param_18284") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20990, &mem_param_18289,
                             "mem_param_18289") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20991, &mem_param_18274,
                             "mem_param_18274") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20992, &mem_param_18279,
                             "mem_param_18279") != 0)
                return 1;
            ctx_param_ext_18270 = ctx_param_ext_tmp_20973;
            ctx_param_ext_18271 = ctx_param_ext_tmp_20974;
            ctx_param_ext_18272 = ctx_param_ext_tmp_20975;
            ctx_param_ext_18273 = ctx_param_ext_tmp_20976;
            ctx_param_ext_18275 = ctx_param_ext_tmp_20977;
            ctx_param_ext_18276 = ctx_param_ext_tmp_20978;
            ctx_param_ext_18277 = ctx_param_ext_tmp_20979;
            ctx_param_ext_18278 = ctx_param_ext_tmp_20980;
            ctx_param_ext_18280 = ctx_param_ext_tmp_20981;
            ctx_param_ext_18281 = ctx_param_ext_tmp_20982;
            ctx_param_ext_18282 = ctx_param_ext_tmp_20983;
            ctx_param_ext_18283 = ctx_param_ext_tmp_20984;
            ctx_param_ext_18285 = ctx_param_ext_tmp_20985;
            ctx_param_ext_18286 = ctx_param_ext_tmp_20986;
            ctx_param_ext_18287 = ctx_param_ext_tmp_20987;
            ctx_param_ext_18288 = ctx_param_ext_tmp_20988;
            if (memblock_set(ctx, &mem_param_18274, &mem_param_tmp_20989,
                             "mem_param_tmp_20989") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18279, &mem_param_tmp_20990,
                             "mem_param_tmp_20990") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18284, &mem_param_tmp_20991,
                             "mem_param_tmp_20991") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18289, &mem_param_tmp_20992,
                             "mem_param_tmp_20992") != 0)
                return 1;
        }
        ext_18442 = ctx_param_ext_18270;
        ext_18441 = ctx_param_ext_18271;
        ext_18440 = ctx_param_ext_18272;
        ext_18439 = ctx_param_ext_18273;
        ext_18438 = ctx_param_ext_18275;
        ext_18437 = ctx_param_ext_18276;
        ext_18436 = ctx_param_ext_18277;
        ext_18435 = ctx_param_ext_18278;
        ext_18434 = ctx_param_ext_18280;
        ext_18433 = ctx_param_ext_18281;
        ext_18432 = ctx_param_ext_18282;
        ext_18431 = ctx_param_ext_18283;
        ext_18430 = ctx_param_ext_18285;
        ext_18429 = ctx_param_ext_18286;
        ext_18428 = ctx_param_ext_18287;
        ext_18427 = ctx_param_ext_18288;
        if (memblock_set(ctx, &ext_mem_18426, &mem_param_18274,
                         "mem_param_18274") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18425, &mem_param_18279,
                         "mem_param_18279") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18424, &mem_param_18284,
                         "mem_param_18284") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18423, &mem_param_18289,
                         "mem_param_18289") != 0)
            return 1;
        for (int64_t i_21006 = 0; i_21006 < n_11475; i_21006++) {
            float tmp_21007;
            
            tmp_21007 = ((float *) mem_17137)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_21006 * m_11476];
            ((float *) mem_18445.mem)[i_21006] = tmp_21007;
        }
        for (int64_t i_21008 = 0; i_21008 < n_11475; i_21008++) {
            float tmp_21009;
            
            tmp_21009 = ((float *) mem_17141)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_21008 * m_11476];
            ((float *) mem_18448.mem)[i_21008] = tmp_21009;
        }
        
        int64_t ext_18621;
        int64_t ext_18620;
        int64_t ext_18619;
        int64_t ext_18618;
        int64_t ext_18617;
        int64_t ext_18616;
        int64_t ext_18615;
        int64_t ext_18614;
        int64_t ext_18613;
        int64_t ext_18612;
        int64_t ext_18611;
        int64_t ext_18610;
        int64_t ext_18609;
        int64_t ext_18608;
        int64_t ext_18607;
        int64_t ext_18606;
        int64_t ctx_param_ext_18449;
        int64_t ctx_param_ext_18450;
        int64_t ctx_param_ext_18451;
        int64_t ctx_param_ext_18452;
        int64_t ctx_param_ext_18454;
        int64_t ctx_param_ext_18455;
        int64_t ctx_param_ext_18456;
        int64_t ctx_param_ext_18457;
        int64_t ctx_param_ext_18459;
        int64_t ctx_param_ext_18460;
        int64_t ctx_param_ext_18461;
        int64_t ctx_param_ext_18462;
        int64_t ctx_param_ext_18464;
        int64_t ctx_param_ext_18465;
        int64_t ctx_param_ext_18466;
        int64_t ctx_param_ext_18467;
        
        ctx_param_ext_18449 = n_11475;
        ctx_param_ext_18450 = (int64_t) 0;
        ctx_param_ext_18451 = (int64_t) 1;
        ctx_param_ext_18452 = n_11475;
        ctx_param_ext_18454 = n_11475;
        ctx_param_ext_18455 = (int64_t) 0;
        ctx_param_ext_18456 = (int64_t) 1;
        ctx_param_ext_18457 = n_11475;
        ctx_param_ext_18459 = n_11475;
        ctx_param_ext_18460 = (int64_t) 0;
        ctx_param_ext_18461 = (int64_t) 1;
        ctx_param_ext_18462 = n_11475;
        ctx_param_ext_18464 = n_11475;
        ctx_param_ext_18465 = (int64_t) 0;
        ctx_param_ext_18466 = (int64_t) 1;
        ctx_param_ext_18467 = n_11475;
        if (memblock_set(ctx, &mem_param_18453, &mem_18081, "mem_18081") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18458, &mem_18084, "mem_18084") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18463, &mem_18445, "mem_18445") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18468, &mem_18448, "mem_18448") != 0)
            return 1;
        
        int32_t ns_15930;
        
        for (int64_t i_15925 = 0; i_15925 < i32_res_15888; i_15925++) {
            ns_15930 = ((int32_t *) mem_17955)[i_15925];
            for (int64_t i_16528 = 0; i_16528 < iota_arg_14817; i_16528++) {
                int32_t defunc_0_f_res_15933 = sext_i64_i32(i_16528);
                
                ((int32_t *) mem_18479)[i_16528] = defunc_0_f_res_15933;
            }
            
            int32_t i32_arg_15934 = mul32(2, ns_15930);
            float i32_res_15935 = sitofp_i32_f32(i32_arg_15934);
            bool zzero_15936 = ns_15930 == 0;
            bool nonzzero_15937 = !zzero_15936;
            bool nonzzero_cert_15938;
            
            if (!nonzzero_15937) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16542 = 0; i_16542 < iota_arg_14817; i_16542++) {
                int32_t x_15945;
                
                x_15945 = ((int32_t *) mem_18479)[i_16542];
                
                int32_t i32_arg_15946 = smod32(x_15945, ns_15930);
                float i32_res_15947 = sitofp_i32_f32(i32_arg_15946);
                float zt_res_15948 = -6.2831855F * i32_res_15947;
                float zs_res_15949 = zt_res_15948 / i32_res_15935;
                int64_t j_15950 = sext_i32_i64(x_15945);
                bool x_15951 = sle64((int64_t) 0, j_15950);
                bool y_15952 = slt64(j_15950, n_11475);
                bool bounds_check_15953 = x_15951 && y_15952;
                bool index_certs_15954;
                
                if (!bounds_check_15953) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15950,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15955;
                
                defunc_0_f_res_15955 =
                    ((float *) mem_param_18453.mem)[ctx_param_ext_18450 +
                                                    j_15950 *
                                                    ctx_param_ext_18451];
                
                float defunc_0_f_res_15956;
                
                defunc_0_f_res_15956 =
                    ((float *) mem_param_18458.mem)[ctx_param_ext_18455 +
                                                    j_15950 *
                                                    ctx_param_ext_18456];
                
                float sin_res_15957;
                
                sin_res_15957 = futrts_sin32(zs_res_15949);
                
                float cos_res_15958;
                
                cos_res_15958 = futrts_cos32(zs_res_15949);
                
                int32_t i_15959 = add32(y_14836, x_15945);
                int64_t i_15960 = sext_i32_i64(i_15959);
                bool x_15961 = sle64((int64_t) 0, i_15960);
                bool y_15962 = slt64(i_15960, n_11475);
                bool bounds_check_15963 = x_15961 && y_15962;
                bool index_certs_15964;
                
                if (!bounds_check_15963) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15960,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15965;
                
                zt_arg_15965 =
                    ((float *) mem_param_18453.mem)[ctx_param_ext_18450 +
                                                    i_15960 *
                                                    ctx_param_ext_18451];
                
                float zt_arg_15966;
                
                zt_arg_15966 =
                    ((float *) mem_param_18458.mem)[ctx_param_ext_18455 +
                                                    i_15960 *
                                                    ctx_param_ext_18456];
                
                float zt_res_15967 = sin_res_15957 * zt_arg_15966;
                float zt_res_15968 = cos_res_15958 * zt_arg_15965;
                float zm_res_15969 = zt_res_15968 - zt_res_15967;
                float zt_res_15970 = sin_res_15957 * zt_arg_15965;
                float zt_res_15971 = cos_res_15958 * zt_arg_15966;
                float zp_res_15972 = zt_res_15970 + zt_res_15971;
                float zp_res_15973 = defunc_0_f_res_15955 + zm_res_15969;
                float zp_res_15974 = defunc_0_f_res_15956 + zp_res_15972;
                float zm_res_15975 = defunc_0_f_res_15955 - zm_res_15969;
                float zm_res_15976 = defunc_0_f_res_15956 - zp_res_15972;
                int32_t x_15977 = sdiv32(x_15945, ns_15930);
                int32_t x_15978 = mul32(ns_15930, x_15977);
                int32_t x_15979 = mul32(2, x_15978);
                int32_t idxD_15980 = add32(i32_arg_15946, x_15979);
                int64_t i32_res_15981 = sext_i32_i64(idxD_15980);
                int32_t i32_arg_15982 = add32(ns_15930, idxD_15980);
                int64_t i32_res_15983 = sext_i32_i64(i32_arg_15982);
                
                ((int64_t *) mem_18494)[i_16542] = i32_res_15981;
                ((float *) mem_18497)[i_16542] = zp_res_15973;
                ((float *) mem_18500)[i_16542] = zp_res_15974;
                ((int64_t *) mem_18503)[i_16542] = i32_res_15983;
                ((float *) mem_18506)[i_16542] = zm_res_15975;
                ((float *) mem_18509)[i_16542] = zm_res_15976;
            }
            for (int64_t write_iter_16549 = 0; write_iter_16549 <
                 iota_arg_14817; write_iter_16549++) {
                int64_t write_iv_16552;
                
                write_iv_16552 = ((int64_t *) mem_18494)[write_iter_16549];
                
                int64_t write_iv_16555;
                
                write_iv_16555 = ((int64_t *) mem_18503)[write_iter_16549];
                if (sle64((int64_t) 0, write_iv_16552) && slt64(write_iv_16552,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18463.mem + (ctx_param_ext_18460 +
                                                       ctx_param_ext_18461 *
                                                       write_iv_16552) *
                                (int64_t) 4, mem_18497 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16555) && slt64(write_iv_16555,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18463.mem + (ctx_param_ext_18460 +
                                                       ctx_param_ext_18461 *
                                                       write_iv_16555) *
                                (int64_t) 4, mem_18506 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16552) && slt64(write_iv_16552,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18468.mem + (ctx_param_ext_18465 +
                                                       ctx_param_ext_18466 *
                                                       write_iv_16552) *
                                (int64_t) 4, mem_18500 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16555) && slt64(write_iv_16555,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18468.mem + (ctx_param_ext_18465 +
                                                       ctx_param_ext_18466 *
                                                       write_iv_16555) *
                                (int64_t) 4, mem_18509 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21010 = ctx_param_ext_18459;
            int64_t ctx_param_ext_tmp_21011 = ctx_param_ext_18460;
            int64_t ctx_param_ext_tmp_21012 = ctx_param_ext_18461;
            int64_t ctx_param_ext_tmp_21013 = ctx_param_ext_18462;
            int64_t ctx_param_ext_tmp_21014 = ctx_param_ext_18464;
            int64_t ctx_param_ext_tmp_21015 = ctx_param_ext_18465;
            int64_t ctx_param_ext_tmp_21016 = ctx_param_ext_18466;
            int64_t ctx_param_ext_tmp_21017 = ctx_param_ext_18467;
            int64_t ctx_param_ext_tmp_21018 = ctx_param_ext_18449;
            int64_t ctx_param_ext_tmp_21019 = ctx_param_ext_18450;
            int64_t ctx_param_ext_tmp_21020 = ctx_param_ext_18451;
            int64_t ctx_param_ext_tmp_21021 = ctx_param_ext_18452;
            int64_t ctx_param_ext_tmp_21022 = ctx_param_ext_18454;
            int64_t ctx_param_ext_tmp_21023 = ctx_param_ext_18455;
            int64_t ctx_param_ext_tmp_21024 = ctx_param_ext_18456;
            int64_t ctx_param_ext_tmp_21025 = ctx_param_ext_18457;
            
            if (memblock_set(ctx, &mem_param_tmp_21026, &mem_param_18463,
                             "mem_param_18463") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21027, &mem_param_18468,
                             "mem_param_18468") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21028, &mem_param_18453,
                             "mem_param_18453") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21029, &mem_param_18458,
                             "mem_param_18458") != 0)
                return 1;
            ctx_param_ext_18449 = ctx_param_ext_tmp_21010;
            ctx_param_ext_18450 = ctx_param_ext_tmp_21011;
            ctx_param_ext_18451 = ctx_param_ext_tmp_21012;
            ctx_param_ext_18452 = ctx_param_ext_tmp_21013;
            ctx_param_ext_18454 = ctx_param_ext_tmp_21014;
            ctx_param_ext_18455 = ctx_param_ext_tmp_21015;
            ctx_param_ext_18456 = ctx_param_ext_tmp_21016;
            ctx_param_ext_18457 = ctx_param_ext_tmp_21017;
            ctx_param_ext_18459 = ctx_param_ext_tmp_21018;
            ctx_param_ext_18460 = ctx_param_ext_tmp_21019;
            ctx_param_ext_18461 = ctx_param_ext_tmp_21020;
            ctx_param_ext_18462 = ctx_param_ext_tmp_21021;
            ctx_param_ext_18464 = ctx_param_ext_tmp_21022;
            ctx_param_ext_18465 = ctx_param_ext_tmp_21023;
            ctx_param_ext_18466 = ctx_param_ext_tmp_21024;
            ctx_param_ext_18467 = ctx_param_ext_tmp_21025;
            if (memblock_set(ctx, &mem_param_18453, &mem_param_tmp_21026,
                             "mem_param_tmp_21026") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18458, &mem_param_tmp_21027,
                             "mem_param_tmp_21027") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18463, &mem_param_tmp_21028,
                             "mem_param_tmp_21028") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18468, &mem_param_tmp_21029,
                             "mem_param_tmp_21029") != 0)
                return 1;
        }
        ext_18621 = ctx_param_ext_18449;
        ext_18620 = ctx_param_ext_18450;
        ext_18619 = ctx_param_ext_18451;
        ext_18618 = ctx_param_ext_18452;
        ext_18617 = ctx_param_ext_18454;
        ext_18616 = ctx_param_ext_18455;
        ext_18615 = ctx_param_ext_18456;
        ext_18614 = ctx_param_ext_18457;
        ext_18613 = ctx_param_ext_18459;
        ext_18612 = ctx_param_ext_18460;
        ext_18611 = ctx_param_ext_18461;
        ext_18610 = ctx_param_ext_18462;
        ext_18609 = ctx_param_ext_18464;
        ext_18608 = ctx_param_ext_18465;
        ext_18607 = ctx_param_ext_18466;
        ext_18606 = ctx_param_ext_18467;
        if (memblock_set(ctx, &ext_mem_18605, &mem_param_18453,
                         "mem_param_18453") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18604, &mem_param_18458,
                         "mem_param_18458") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18603, &mem_param_18463,
                         "mem_param_18463") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18602, &mem_param_18468,
                         "mem_param_18468") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_17986 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18247.mem + ext_18262 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18247, "ext_mem_18247") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_17990 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18246.mem + ext_18258 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18246, "ext_mem_18246") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_17994 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18426.mem + ext_18441 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18426, "ext_mem_18426") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_17998 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18425.mem + ext_18437 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18425, "ext_mem_18425") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_18002 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18605.mem + ext_18620 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18605, "ext_mem_18605") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_18006 + i_16574 * n_11475 * (int64_t) 4,
                    ext_mem_18604.mem + ext_18616 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18604, "ext_mem_18604") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_18069, "mem_18069") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18072, "mem_18072") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18075, "mem_18075") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18078, "mem_18078") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18081, "mem_18081") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18084, "mem_18084") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18087, "mem_18087") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18090, "mem_18090") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18266, "mem_18266") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18269, "mem_18269") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18445, "mem_18445") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18448, "mem_18448") != 0)
        return 1;
    
    bool r_16034;
    int32_t r_16035;
    int64_t r_16036;
    bool loop_while_16037;
    int32_t r_16038;
    int64_t n_16039;
    
    loop_while_16037 = loop_cond_14698;
    r_16038 = 0;
    n_16039 = m_11476;
    while (loop_while_16037) {
        int64_t n_16040 = sdiv64(n_16039, (int64_t) 2);
        int32_t r_16041 = add32(1, r_16038);
        bool loop_cond_16042 = slt64((int64_t) 1, n_16040);
        bool loop_while_tmp_21043 = loop_cond_16042;
        int32_t r_tmp_21044 = r_16041;
        int64_t n_tmp_21045 = n_16040;
        
        loop_while_16037 = loop_while_tmp_21043;
        r_16038 = r_tmp_21044;
        n_16039 = n_tmp_21045;
    }
    r_16034 = loop_while_16037;
    r_16035 = r_16038;
    r_16036 = n_16039;
    
    int64_t i32_res_16043 = sext_i32_i64(r_16035);
    bool loop_nonempty_16056 = slt64((int64_t) 0, i32_res_16043);
    bool loop_not_taken_16057 = !loop_nonempty_16056;
    bool protect_assert_disj_16058 = dim_match_14730 || loop_not_taken_16057;
    bool empty_or_match_cert_16060;
    
    if (!protect_assert_disj_16058) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_16059;
    
    if (!protect_assert_disj_16058) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_16044 = slt64(i32_res_16043, (int64_t) 0);
    bool valid_16045 = !bounds_invalid_upwards_16044;
    bool range_valid_c_16046;
    
    if (!valid_16045) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_16043, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18670 = (int64_t) 4 * i32_res_16043;
    int64_t bytes_18671 = smax64((int64_t) 0, binop_y_18670);
    
    if (mem_18672_cached_sizze_21390 < bytes_18671) {
        err = lexical_realloc(&ctx->error, &mem_18672,
                              &mem_18672_cached_sizze_21390, bytes_18671);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16941 = 0; i_16941 < r_16035; i_16941++) {
        int64_t i_16589 = sext_i32_i64(i_16941);
        bool nonnegative_16053 = sle32(0, i_16941);
        bool nonzzero_cert_16054;
        
        if (!nonnegative_16053) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_16055 = shl32(1, i_16941);
        
        ((int32_t *) mem_18672)[i_16589] = defunc_0_f_res_16055;
    }
    
    bool r_15498;
    int32_t r_15499;
    int64_t r_15500;
    bool loop_while_15501;
    int32_t r_15502;
    int64_t n_15503;
    
    loop_while_15501 = loop_cond_14698;
    r_15502 = 0;
    n_15503 = m_11476;
    while (loop_while_15501) {
        int64_t n_15504 = sdiv64(n_15503, (int64_t) 2);
        int32_t r_15505 = add32(1, r_15502);
        bool loop_cond_15506 = slt64((int64_t) 1, n_15504);
        bool loop_while_tmp_21047 = loop_cond_15506;
        int32_t r_tmp_21048 = r_15505;
        int64_t n_tmp_21049 = n_15504;
        
        loop_while_15501 = loop_while_tmp_21047;
        r_15502 = r_tmp_21048;
        n_15503 = n_tmp_21049;
    }
    r_15498 = loop_while_15501;
    r_15499 = r_15502;
    r_15500 = n_15503;
    
    int64_t i32_res_15507 = sext_i32_i64(r_15499);
    bool loop_nonempty_15520 = slt64((int64_t) 0, i32_res_15507);
    bool loop_not_taken_15521 = !loop_nonempty_15520;
    bool protect_assert_disj_15522 = dim_match_14730 || loop_not_taken_15521;
    bool empty_or_match_cert_15524;
    
    if (!protect_assert_disj_15522) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15523;
    
    if (!protect_assert_disj_15522) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15508 = slt64(i32_res_15507, (int64_t) 0);
    bool valid_15509 = !bounds_invalid_upwards_15508;
    bool range_valid_c_15510;
    
    if (!valid_15509) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15507, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18685 = (int64_t) 4 * i32_res_15507;
    int64_t bytes_18686 = smax64((int64_t) 0, binop_y_18685);
    
    if (mem_18687_cached_sizze_21391 < bytes_18686) {
        err = lexical_realloc(&ctx->error, &mem_18687,
                              &mem_18687_cached_sizze_21391, bytes_18686);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16942 = 0; i_16942 < r_15499; i_16942++) {
        int64_t i_16593 = sext_i32_i64(i_16942);
        bool nonnegative_15517 = sle32(0, i_16942);
        bool nonzzero_cert_15518;
        
        if (!nonnegative_15517) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15519 = shl32(1, i_16942);
        
        ((int32_t *) mem_18687)[i_16593] = defunc_0_f_res_15519;
    }
    
    bool r_14962;
    int32_t r_14963;
    int64_t r_14964;
    bool loop_while_14965;
    int32_t r_14966;
    int64_t n_14967;
    
    loop_while_14965 = loop_cond_14698;
    r_14966 = 0;
    n_14967 = m_11476;
    while (loop_while_14965) {
        int64_t n_14968 = sdiv64(n_14967, (int64_t) 2);
        int32_t r_14969 = add32(1, r_14966);
        bool loop_cond_14970 = slt64((int64_t) 1, n_14968);
        bool loop_while_tmp_21051 = loop_cond_14970;
        int32_t r_tmp_21052 = r_14969;
        int64_t n_tmp_21053 = n_14968;
        
        loop_while_14965 = loop_while_tmp_21051;
        r_14966 = r_tmp_21052;
        n_14967 = n_tmp_21053;
    }
    r_14962 = loop_while_14965;
    r_14963 = r_14966;
    r_14964 = n_14967;
    
    int64_t i32_res_14971 = sext_i32_i64(r_14963);
    bool loop_nonempty_14984 = slt64((int64_t) 0, i32_res_14971);
    bool loop_not_taken_14985 = !loop_nonempty_14984;
    bool protect_assert_disj_14986 = dim_match_14730 || loop_not_taken_14985;
    bool empty_or_match_cert_14988;
    
    if (!protect_assert_disj_14986) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14987;
    
    if (!protect_assert_disj_14986) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11476, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_14972 = slt64(i32_res_14971, (int64_t) 0);
    bool valid_14973 = !bounds_invalid_upwards_14972;
    bool range_valid_c_14974;
    
    if (!valid_14973) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14971, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18700 = (int64_t) 4 * i32_res_14971;
    int64_t bytes_18701 = smax64((int64_t) 0, binop_y_18700);
    
    if (mem_18702_cached_sizze_21392 < bytes_18701) {
        err = lexical_realloc(&ctx->error, &mem_18702,
                              &mem_18702_cached_sizze_21392, bytes_18701);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16943 = 0; i_16943 < r_14963; i_16943++) {
        int64_t i_16597 = sext_i32_i64(i_16943);
        bool nonnegative_14981 = sle32(0, i_16943);
        bool nonzzero_cert_14982;
        
        if (!nonnegative_14981) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14983 = shl32(1, i_16943);
        
        ((int32_t *) mem_18702)[i_16597] = defunc_0_f_res_14983;
    }
    
    int32_t y_14931 = add32(cutoff_11477, y_14728);
    int32_t y_14930 = sub32(y_14728, cutoff_11477);
    int32_t y_14929 = add32(cutoff_11477, y_14836);
    int32_t y_14928 = sub32(y_14836, cutoff_11477);
    
    if (mem_18718_cached_sizze_21393 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18718,
                              &mem_18718_cached_sizze_21393, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18722_cached_sizze_21394 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18722,
                              &mem_18722_cached_sizze_21394, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18726_cached_sizze_21395 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18726,
                              &mem_18726_cached_sizze_21395, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18730_cached_sizze_21396 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18730,
                              &mem_18730_cached_sizze_21396, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18734_cached_sizze_21397 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18734,
                              &mem_18734_cached_sizze_21397, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18738_cached_sizze_21398 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18738,
                              &mem_18738_cached_sizze_21398, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18801, bytes_17117, "mem_18801")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18804, bytes_17117, "mem_18804")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18831, bytes_17117, "mem_18831")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18834, bytes_17117, "mem_18834")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18859 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_18860 = smax64((int64_t) 0, binop_y_18859);
    
    if (mem_18861_cached_sizze_21399 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18861,
                              &mem_18861_cached_sizze_21399, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18874 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_18875 = smax64((int64_t) 0, binop_y_18874);
    
    if (mem_18876_cached_sizze_21400 < bytes_18875) {
        err = lexical_realloc(&ctx->error, &mem_18876,
                              &mem_18876_cached_sizze_21400, bytes_18875);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18879_cached_sizze_21401 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18879,
                              &mem_18879_cached_sizze_21401, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18882_cached_sizze_21402 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18882,
                              &mem_18882_cached_sizze_21402, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18885_cached_sizze_21403 < bytes_18875) {
        err = lexical_realloc(&ctx->error, &mem_18885,
                              &mem_18885_cached_sizze_21403, bytes_18875);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18888_cached_sizze_21404 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18888,
                              &mem_18888_cached_sizze_21404, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18891_cached_sizze_21405 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18891,
                              &mem_18891_cached_sizze_21405, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19006, bytes_17117, "mem_19006")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19009, bytes_17117, "mem_19009")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19036, bytes_17117, "mem_19036")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19039, bytes_17117, "mem_19039")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19064 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_19065 = smax64((int64_t) 0, binop_y_19064);
    
    if (mem_19066_cached_sizze_21406 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19066,
                              &mem_19066_cached_sizze_21406, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19079 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_19080 = smax64((int64_t) 0, binop_y_19079);
    
    if (mem_19081_cached_sizze_21407 < bytes_19080) {
        err = lexical_realloc(&ctx->error, &mem_19081,
                              &mem_19081_cached_sizze_21407, bytes_19080);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19084_cached_sizze_21408 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19084,
                              &mem_19084_cached_sizze_21408, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19087_cached_sizze_21409 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19087,
                              &mem_19087_cached_sizze_21409, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19090_cached_sizze_21410 < bytes_19080) {
        err = lexical_realloc(&ctx->error, &mem_19090,
                              &mem_19090_cached_sizze_21410, bytes_19080);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19093_cached_sizze_21411 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19093,
                              &mem_19093_cached_sizze_21411, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19096_cached_sizze_21412 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19096,
                              &mem_19096_cached_sizze_21412, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19211, bytes_17117, "mem_19211")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19214, bytes_17117, "mem_19214")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19241, bytes_17117, "mem_19241")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19244, bytes_17117, "mem_19244")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19269 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_19270 = smax64((int64_t) 0, binop_y_19269);
    
    if (mem_19271_cached_sizze_21413 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19271,
                              &mem_19271_cached_sizze_21413, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19284 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_19285 = smax64((int64_t) 0, binop_y_19284);
    
    if (mem_19286_cached_sizze_21414 < bytes_19285) {
        err = lexical_realloc(&ctx->error, &mem_19286,
                              &mem_19286_cached_sizze_21414, bytes_19285);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19289_cached_sizze_21415 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19289,
                              &mem_19289_cached_sizze_21415, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19292_cached_sizze_21416 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19292,
                              &mem_19292_cached_sizze_21416, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19295_cached_sizze_21417 < bytes_19285) {
        err = lexical_realloc(&ctx->error, &mem_19295,
                              &mem_19295_cached_sizze_21417, bytes_19285);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19298_cached_sizze_21418 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19298,
                              &mem_19298_cached_sizze_21418, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19301_cached_sizze_21419 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19301,
                              &mem_19301_cached_sizze_21419, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16740 = 0; i_16740 < n_11475; i_16740++) {
        int32_t defunc_0_f_res_14924 = sext_i64_i32(i_16740);
        bool cond_14937 = slt32(y_14928, defunc_0_f_res_14924);
        bool cond_t_res_14938 = slt32(defunc_0_f_res_14924, y_14929);
        bool x_14939 = cond_14937 && cond_t_res_14938;
        
        for (int64_t i_16603 = 0; i_16603 < m_11476; i_16603++) {
            int32_t x_14942;
            
            x_14942 = ((int32_t *) mem_17118)[i_16603];
            
            float x_14943;
            
            x_14943 = ((float *) mem_17986)[i_16603 * n_11475 + i_16740];
            
            float x_14944;
            
            x_14944 = ((float *) mem_17990)[i_16603 * n_11475 + i_16740];
            
            bool cond_t_res_14945 = slt32(y_14930, x_14942);
            bool x_14946 = x_14939 && cond_t_res_14945;
            bool cond_t_res_14947 = slt32(x_14942, y_14931);
            bool x_14948 = x_14946 && cond_t_res_14947;
            float defunc_1_f_res_14949;
            
            if (x_14948) {
                defunc_1_f_res_14949 = 0.0F;
            } else {
                defunc_1_f_res_14949 = x_14943;
            }
            
            float defunc_1_f_res_14950;
            
            if (x_14948) {
                defunc_1_f_res_14950 = 0.0F;
            } else {
                defunc_1_f_res_14950 = x_14944;
            }
            ((float *) mem_18801.mem)[i_16603] = defunc_1_f_res_14949;
            ((float *) mem_18804.mem)[i_16603] = defunc_1_f_res_14950;
        }
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18831.mem + (int64_t) 0, mem_18801.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18834.mem + (int64_t) 0, mem_18804.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_19003;
        int64_t ext_19002;
        int64_t ext_19001;
        int64_t ext_19000;
        int64_t ext_18999;
        int64_t ext_18998;
        int64_t ext_18997;
        int64_t ext_18996;
        int64_t ext_18995;
        int64_t ext_18994;
        int64_t ext_18993;
        int64_t ext_18992;
        int64_t ext_18991;
        int64_t ext_18990;
        int64_t ext_18989;
        int64_t ext_18988;
        int64_t ctx_param_ext_18835;
        int64_t ctx_param_ext_18836;
        int64_t ctx_param_ext_18837;
        int64_t ctx_param_ext_18838;
        int64_t ctx_param_ext_18840;
        int64_t ctx_param_ext_18841;
        int64_t ctx_param_ext_18842;
        int64_t ctx_param_ext_18843;
        int64_t ctx_param_ext_18845;
        int64_t ctx_param_ext_18846;
        int64_t ctx_param_ext_18847;
        int64_t ctx_param_ext_18848;
        int64_t ctx_param_ext_18850;
        int64_t ctx_param_ext_18851;
        int64_t ctx_param_ext_18852;
        int64_t ctx_param_ext_18853;
        
        ctx_param_ext_18835 = m_11476;
        ctx_param_ext_18836 = (int64_t) 0;
        ctx_param_ext_18837 = (int64_t) 1;
        ctx_param_ext_18838 = m_11476;
        ctx_param_ext_18840 = m_11476;
        ctx_param_ext_18841 = (int64_t) 0;
        ctx_param_ext_18842 = (int64_t) 1;
        ctx_param_ext_18843 = m_11476;
        ctx_param_ext_18845 = m_11476;
        ctx_param_ext_18846 = (int64_t) 0;
        ctx_param_ext_18847 = (int64_t) 1;
        ctx_param_ext_18848 = m_11476;
        ctx_param_ext_18850 = m_11476;
        ctx_param_ext_18851 = (int64_t) 0;
        ctx_param_ext_18852 = (int64_t) 1;
        ctx_param_ext_18853 = m_11476;
        if (memblock_set(ctx, &mem_param_18839, &mem_18801, "mem_18801") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18844, &mem_18804, "mem_18804") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18849, &mem_18831, "mem_18831") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18854, &mem_18834, "mem_18834") != 0)
            return 1;
        
        int32_t ns_15004;
        
        for (int64_t i_14999 = 0; i_14999 < i32_res_14971; i_14999++) {
            ns_15004 = ((int32_t *) mem_18702)[i_14999];
            for (int64_t i_16608 = 0; i_16608 < iota_arg_14709; i_16608++) {
                int32_t defunc_0_f_res_15007 = sext_i64_i32(i_16608);
                
                ((int32_t *) mem_18861)[i_16608] = defunc_0_f_res_15007;
            }
            
            int32_t i32_arg_15008 = mul32(2, ns_15004);
            float i32_res_15009 = sitofp_i32_f32(i32_arg_15008);
            bool zzero_15010 = ns_15004 == 0;
            bool nonzzero_15011 = !zzero_15010;
            bool nonzzero_cert_15012;
            
            if (!nonzzero_15011) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16622 = 0; i_16622 < iota_arg_14709; i_16622++) {
                int32_t x_15019;
                
                x_15019 = ((int32_t *) mem_18861)[i_16622];
                
                int32_t i32_arg_15020 = smod32(x_15019, ns_15004);
                float i32_res_15021 = sitofp_i32_f32(i32_arg_15020);
                float zt_res_15022 = 6.2831855F * i32_res_15021;
                float zs_res_15023 = zt_res_15022 / i32_res_15009;
                int64_t j_15024 = sext_i32_i64(x_15019);
                bool x_15025 = sle64((int64_t) 0, j_15024);
                bool y_15026 = slt64(j_15024, m_11476);
                bool bounds_check_15027 = x_15025 && y_15026;
                bool index_certs_15028;
                
                if (!bounds_check_15027) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15024,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15029;
                
                defunc_0_f_res_15029 =
                    ((float *) mem_param_18839.mem)[ctx_param_ext_18836 +
                                                    j_15024 *
                                                    ctx_param_ext_18837];
                
                float defunc_0_f_res_15030;
                
                defunc_0_f_res_15030 =
                    ((float *) mem_param_18844.mem)[ctx_param_ext_18841 +
                                                    j_15024 *
                                                    ctx_param_ext_18842];
                
                float sin_res_15031;
                
                sin_res_15031 = futrts_sin32(zs_res_15023);
                
                float cos_res_15032;
                
                cos_res_15032 = futrts_cos32(zs_res_15023);
                
                int32_t i_15033 = add32(y_14728, x_15019);
                int64_t i_15034 = sext_i32_i64(i_15033);
                bool x_15035 = sle64((int64_t) 0, i_15034);
                bool y_15036 = slt64(i_15034, m_11476);
                bool bounds_check_15037 = x_15035 && y_15036;
                bool index_certs_15038;
                
                if (!bounds_check_15037) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15034,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15039;
                
                zt_arg_15039 =
                    ((float *) mem_param_18839.mem)[ctx_param_ext_18836 +
                                                    i_15034 *
                                                    ctx_param_ext_18837];
                
                float zt_arg_15040;
                
                zt_arg_15040 =
                    ((float *) mem_param_18844.mem)[ctx_param_ext_18841 +
                                                    i_15034 *
                                                    ctx_param_ext_18842];
                
                float zt_res_15041 = sin_res_15031 * zt_arg_15040;
                float zt_res_15042 = cos_res_15032 * zt_arg_15039;
                float zm_res_15043 = zt_res_15042 - zt_res_15041;
                float zt_res_15044 = sin_res_15031 * zt_arg_15039;
                float zt_res_15045 = cos_res_15032 * zt_arg_15040;
                float zp_res_15046 = zt_res_15044 + zt_res_15045;
                float zp_res_15047 = defunc_0_f_res_15029 + zm_res_15043;
                float zp_res_15048 = defunc_0_f_res_15030 + zp_res_15046;
                float zm_res_15049 = defunc_0_f_res_15029 - zm_res_15043;
                float zm_res_15050 = defunc_0_f_res_15030 - zp_res_15046;
                int32_t x_15051 = sdiv32(x_15019, ns_15004);
                int32_t x_15052 = mul32(ns_15004, x_15051);
                int32_t x_15053 = mul32(2, x_15052);
                int32_t idxD_15054 = add32(i32_arg_15020, x_15053);
                int64_t i32_res_15055 = sext_i32_i64(idxD_15054);
                int32_t i32_arg_15056 = add32(ns_15004, idxD_15054);
                int64_t i32_res_15057 = sext_i32_i64(i32_arg_15056);
                
                ((int64_t *) mem_18876)[i_16622] = i32_res_15055;
                ((float *) mem_18879)[i_16622] = zp_res_15047;
                ((float *) mem_18882)[i_16622] = zp_res_15048;
                ((int64_t *) mem_18885)[i_16622] = i32_res_15057;
                ((float *) mem_18888)[i_16622] = zm_res_15049;
                ((float *) mem_18891)[i_16622] = zm_res_15050;
            }
            for (int64_t write_iter_16629 = 0; write_iter_16629 <
                 iota_arg_14709; write_iter_16629++) {
                int64_t write_iv_16632;
                
                write_iv_16632 = ((int64_t *) mem_18876)[write_iter_16629];
                
                int64_t write_iv_16635;
                
                write_iv_16635 = ((int64_t *) mem_18885)[write_iter_16629];
                if (sle64((int64_t) 0, write_iv_16632) && slt64(write_iv_16632,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18849.mem + (ctx_param_ext_18846 +
                                                       ctx_param_ext_18847 *
                                                       write_iv_16632) *
                                (int64_t) 4, mem_18879 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16635) && slt64(write_iv_16635,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18849.mem + (ctx_param_ext_18846 +
                                                       ctx_param_ext_18847 *
                                                       write_iv_16635) *
                                (int64_t) 4, mem_18888 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16632) && slt64(write_iv_16632,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18854.mem + (ctx_param_ext_18851 +
                                                       ctx_param_ext_18852 *
                                                       write_iv_16632) *
                                (int64_t) 4, mem_18882 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16635) && slt64(write_iv_16635,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18854.mem + (ctx_param_ext_18851 +
                                                       ctx_param_ext_18852 *
                                                       write_iv_16635) *
                                (int64_t) 4, mem_18891 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21063 = ctx_param_ext_18845;
            int64_t ctx_param_ext_tmp_21064 = ctx_param_ext_18846;
            int64_t ctx_param_ext_tmp_21065 = ctx_param_ext_18847;
            int64_t ctx_param_ext_tmp_21066 = ctx_param_ext_18848;
            int64_t ctx_param_ext_tmp_21067 = ctx_param_ext_18850;
            int64_t ctx_param_ext_tmp_21068 = ctx_param_ext_18851;
            int64_t ctx_param_ext_tmp_21069 = ctx_param_ext_18852;
            int64_t ctx_param_ext_tmp_21070 = ctx_param_ext_18853;
            int64_t ctx_param_ext_tmp_21071 = ctx_param_ext_18835;
            int64_t ctx_param_ext_tmp_21072 = ctx_param_ext_18836;
            int64_t ctx_param_ext_tmp_21073 = ctx_param_ext_18837;
            int64_t ctx_param_ext_tmp_21074 = ctx_param_ext_18838;
            int64_t ctx_param_ext_tmp_21075 = ctx_param_ext_18840;
            int64_t ctx_param_ext_tmp_21076 = ctx_param_ext_18841;
            int64_t ctx_param_ext_tmp_21077 = ctx_param_ext_18842;
            int64_t ctx_param_ext_tmp_21078 = ctx_param_ext_18843;
            
            if (memblock_set(ctx, &mem_param_tmp_21079, &mem_param_18849,
                             "mem_param_18849") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21080, &mem_param_18854,
                             "mem_param_18854") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21081, &mem_param_18839,
                             "mem_param_18839") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21082, &mem_param_18844,
                             "mem_param_18844") != 0)
                return 1;
            ctx_param_ext_18835 = ctx_param_ext_tmp_21063;
            ctx_param_ext_18836 = ctx_param_ext_tmp_21064;
            ctx_param_ext_18837 = ctx_param_ext_tmp_21065;
            ctx_param_ext_18838 = ctx_param_ext_tmp_21066;
            ctx_param_ext_18840 = ctx_param_ext_tmp_21067;
            ctx_param_ext_18841 = ctx_param_ext_tmp_21068;
            ctx_param_ext_18842 = ctx_param_ext_tmp_21069;
            ctx_param_ext_18843 = ctx_param_ext_tmp_21070;
            ctx_param_ext_18845 = ctx_param_ext_tmp_21071;
            ctx_param_ext_18846 = ctx_param_ext_tmp_21072;
            ctx_param_ext_18847 = ctx_param_ext_tmp_21073;
            ctx_param_ext_18848 = ctx_param_ext_tmp_21074;
            ctx_param_ext_18850 = ctx_param_ext_tmp_21075;
            ctx_param_ext_18851 = ctx_param_ext_tmp_21076;
            ctx_param_ext_18852 = ctx_param_ext_tmp_21077;
            ctx_param_ext_18853 = ctx_param_ext_tmp_21078;
            if (memblock_set(ctx, &mem_param_18839, &mem_param_tmp_21079,
                             "mem_param_tmp_21079") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18844, &mem_param_tmp_21080,
                             "mem_param_tmp_21080") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18849, &mem_param_tmp_21081,
                             "mem_param_tmp_21081") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18854, &mem_param_tmp_21082,
                             "mem_param_tmp_21082") != 0)
                return 1;
        }
        ext_19003 = ctx_param_ext_18835;
        ext_19002 = ctx_param_ext_18836;
        ext_19001 = ctx_param_ext_18837;
        ext_19000 = ctx_param_ext_18838;
        ext_18999 = ctx_param_ext_18840;
        ext_18998 = ctx_param_ext_18841;
        ext_18997 = ctx_param_ext_18842;
        ext_18996 = ctx_param_ext_18843;
        ext_18995 = ctx_param_ext_18845;
        ext_18994 = ctx_param_ext_18846;
        ext_18993 = ctx_param_ext_18847;
        ext_18992 = ctx_param_ext_18848;
        ext_18991 = ctx_param_ext_18850;
        ext_18990 = ctx_param_ext_18851;
        ext_18989 = ctx_param_ext_18852;
        ext_18988 = ctx_param_ext_18853;
        if (memblock_set(ctx, &ext_mem_18987, &mem_param_18839,
                         "mem_param_18839") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18986, &mem_param_18844,
                         "mem_param_18844") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18985, &mem_param_18849,
                         "mem_param_18849") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18984, &mem_param_18854,
                         "mem_param_18854") != 0)
            return 1;
        for (int64_t i_16646 = 0; i_16646 < m_11476; i_16646++) {
            int32_t x_15478;
            
            x_15478 = ((int32_t *) mem_17118)[i_16646];
            
            float x_15479;
            
            x_15479 = ((float *) mem_17994)[i_16646 * n_11475 + i_16740];
            
            float x_15480;
            
            x_15480 = ((float *) mem_17998)[i_16646 * n_11475 + i_16740];
            
            bool cond_t_res_15481 = slt32(y_14930, x_15478);
            bool x_15482 = x_14939 && cond_t_res_15481;
            bool cond_t_res_15483 = slt32(x_15478, y_14931);
            bool x_15484 = x_15482 && cond_t_res_15483;
            float defunc_1_f_res_15485;
            
            if (x_15484) {
                defunc_1_f_res_15485 = 0.0F;
            } else {
                defunc_1_f_res_15485 = x_15479;
            }
            
            float defunc_1_f_res_15486;
            
            if (x_15484) {
                defunc_1_f_res_15486 = 0.0F;
            } else {
                defunc_1_f_res_15486 = x_15480;
            }
            ((float *) mem_19006.mem)[i_16646] = defunc_1_f_res_15485;
            ((float *) mem_19009.mem)[i_16646] = defunc_1_f_res_15486;
        }
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_19036.mem + (int64_t) 0, mem_19006.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_19039.mem + (int64_t) 0, mem_19009.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_19208;
        int64_t ext_19207;
        int64_t ext_19206;
        int64_t ext_19205;
        int64_t ext_19204;
        int64_t ext_19203;
        int64_t ext_19202;
        int64_t ext_19201;
        int64_t ext_19200;
        int64_t ext_19199;
        int64_t ext_19198;
        int64_t ext_19197;
        int64_t ext_19196;
        int64_t ext_19195;
        int64_t ext_19194;
        int64_t ext_19193;
        int64_t ctx_param_ext_19040;
        int64_t ctx_param_ext_19041;
        int64_t ctx_param_ext_19042;
        int64_t ctx_param_ext_19043;
        int64_t ctx_param_ext_19045;
        int64_t ctx_param_ext_19046;
        int64_t ctx_param_ext_19047;
        int64_t ctx_param_ext_19048;
        int64_t ctx_param_ext_19050;
        int64_t ctx_param_ext_19051;
        int64_t ctx_param_ext_19052;
        int64_t ctx_param_ext_19053;
        int64_t ctx_param_ext_19055;
        int64_t ctx_param_ext_19056;
        int64_t ctx_param_ext_19057;
        int64_t ctx_param_ext_19058;
        
        ctx_param_ext_19040 = m_11476;
        ctx_param_ext_19041 = (int64_t) 0;
        ctx_param_ext_19042 = (int64_t) 1;
        ctx_param_ext_19043 = m_11476;
        ctx_param_ext_19045 = m_11476;
        ctx_param_ext_19046 = (int64_t) 0;
        ctx_param_ext_19047 = (int64_t) 1;
        ctx_param_ext_19048 = m_11476;
        ctx_param_ext_19050 = m_11476;
        ctx_param_ext_19051 = (int64_t) 0;
        ctx_param_ext_19052 = (int64_t) 1;
        ctx_param_ext_19053 = m_11476;
        ctx_param_ext_19055 = m_11476;
        ctx_param_ext_19056 = (int64_t) 0;
        ctx_param_ext_19057 = (int64_t) 1;
        ctx_param_ext_19058 = m_11476;
        if (memblock_set(ctx, &mem_param_19044, &mem_19006, "mem_19006") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19049, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19054, &mem_19036, "mem_19036") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19059, &mem_19039, "mem_19039") != 0)
            return 1;
        
        int32_t ns_15540;
        
        for (int64_t i_15535 = 0; i_15535 < i32_res_15507; i_15535++) {
            ns_15540 = ((int32_t *) mem_18687)[i_15535];
            for (int64_t i_16651 = 0; i_16651 < iota_arg_14709; i_16651++) {
                int32_t defunc_0_f_res_15543 = sext_i64_i32(i_16651);
                
                ((int32_t *) mem_19066)[i_16651] = defunc_0_f_res_15543;
            }
            
            int32_t i32_arg_15544 = mul32(2, ns_15540);
            float i32_res_15545 = sitofp_i32_f32(i32_arg_15544);
            bool zzero_15546 = ns_15540 == 0;
            bool nonzzero_15547 = !zzero_15546;
            bool nonzzero_cert_15548;
            
            if (!nonzzero_15547) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16665 = 0; i_16665 < iota_arg_14709; i_16665++) {
                int32_t x_15555;
                
                x_15555 = ((int32_t *) mem_19066)[i_16665];
                
                int32_t i32_arg_15556 = smod32(x_15555, ns_15540);
                float i32_res_15557 = sitofp_i32_f32(i32_arg_15556);
                float zt_res_15558 = 6.2831855F * i32_res_15557;
                float zs_res_15559 = zt_res_15558 / i32_res_15545;
                int64_t j_15560 = sext_i32_i64(x_15555);
                bool x_15561 = sle64((int64_t) 0, j_15560);
                bool y_15562 = slt64(j_15560, m_11476);
                bool bounds_check_15563 = x_15561 && y_15562;
                bool index_certs_15564;
                
                if (!bounds_check_15563) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15560,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15565;
                
                defunc_0_f_res_15565 =
                    ((float *) mem_param_19044.mem)[ctx_param_ext_19041 +
                                                    j_15560 *
                                                    ctx_param_ext_19042];
                
                float defunc_0_f_res_15566;
                
                defunc_0_f_res_15566 =
                    ((float *) mem_param_19049.mem)[ctx_param_ext_19046 +
                                                    j_15560 *
                                                    ctx_param_ext_19047];
                
                float sin_res_15567;
                
                sin_res_15567 = futrts_sin32(zs_res_15559);
                
                float cos_res_15568;
                
                cos_res_15568 = futrts_cos32(zs_res_15559);
                
                int32_t i_15569 = add32(y_14728, x_15555);
                int64_t i_15570 = sext_i32_i64(i_15569);
                bool x_15571 = sle64((int64_t) 0, i_15570);
                bool y_15572 = slt64(i_15570, m_11476);
                bool bounds_check_15573 = x_15571 && y_15572;
                bool index_certs_15574;
                
                if (!bounds_check_15573) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15570,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15575;
                
                zt_arg_15575 =
                    ((float *) mem_param_19044.mem)[ctx_param_ext_19041 +
                                                    i_15570 *
                                                    ctx_param_ext_19042];
                
                float zt_arg_15576;
                
                zt_arg_15576 =
                    ((float *) mem_param_19049.mem)[ctx_param_ext_19046 +
                                                    i_15570 *
                                                    ctx_param_ext_19047];
                
                float zt_res_15577 = sin_res_15567 * zt_arg_15576;
                float zt_res_15578 = cos_res_15568 * zt_arg_15575;
                float zm_res_15579 = zt_res_15578 - zt_res_15577;
                float zt_res_15580 = sin_res_15567 * zt_arg_15575;
                float zt_res_15581 = cos_res_15568 * zt_arg_15576;
                float zp_res_15582 = zt_res_15580 + zt_res_15581;
                float zp_res_15583 = defunc_0_f_res_15565 + zm_res_15579;
                float zp_res_15584 = defunc_0_f_res_15566 + zp_res_15582;
                float zm_res_15585 = defunc_0_f_res_15565 - zm_res_15579;
                float zm_res_15586 = defunc_0_f_res_15566 - zp_res_15582;
                int32_t x_15587 = sdiv32(x_15555, ns_15540);
                int32_t x_15588 = mul32(ns_15540, x_15587);
                int32_t x_15589 = mul32(2, x_15588);
                int32_t idxD_15590 = add32(i32_arg_15556, x_15589);
                int64_t i32_res_15591 = sext_i32_i64(idxD_15590);
                int32_t i32_arg_15592 = add32(ns_15540, idxD_15590);
                int64_t i32_res_15593 = sext_i32_i64(i32_arg_15592);
                
                ((int64_t *) mem_19081)[i_16665] = i32_res_15591;
                ((float *) mem_19084)[i_16665] = zp_res_15583;
                ((float *) mem_19087)[i_16665] = zp_res_15584;
                ((int64_t *) mem_19090)[i_16665] = i32_res_15593;
                ((float *) mem_19093)[i_16665] = zm_res_15585;
                ((float *) mem_19096)[i_16665] = zm_res_15586;
            }
            for (int64_t write_iter_16672 = 0; write_iter_16672 <
                 iota_arg_14709; write_iter_16672++) {
                int64_t write_iv_16675;
                
                write_iv_16675 = ((int64_t *) mem_19081)[write_iter_16672];
                
                int64_t write_iv_16678;
                
                write_iv_16678 = ((int64_t *) mem_19090)[write_iter_16672];
                if (sle64((int64_t) 0, write_iv_16675) && slt64(write_iv_16675,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19054.mem + (ctx_param_ext_19051 +
                                                       ctx_param_ext_19052 *
                                                       write_iv_16675) *
                                (int64_t) 4, mem_19084 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16678) && slt64(write_iv_16678,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19054.mem + (ctx_param_ext_19051 +
                                                       ctx_param_ext_19052 *
                                                       write_iv_16678) *
                                (int64_t) 4, mem_19093 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16675) && slt64(write_iv_16675,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19059.mem + (ctx_param_ext_19056 +
                                                       ctx_param_ext_19057 *
                                                       write_iv_16675) *
                                (int64_t) 4, mem_19087 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16678) && slt64(write_iv_16678,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19059.mem + (ctx_param_ext_19056 +
                                                       ctx_param_ext_19057 *
                                                       write_iv_16678) *
                                (int64_t) 4, mem_19096 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21098 = ctx_param_ext_19050;
            int64_t ctx_param_ext_tmp_21099 = ctx_param_ext_19051;
            int64_t ctx_param_ext_tmp_21100 = ctx_param_ext_19052;
            int64_t ctx_param_ext_tmp_21101 = ctx_param_ext_19053;
            int64_t ctx_param_ext_tmp_21102 = ctx_param_ext_19055;
            int64_t ctx_param_ext_tmp_21103 = ctx_param_ext_19056;
            int64_t ctx_param_ext_tmp_21104 = ctx_param_ext_19057;
            int64_t ctx_param_ext_tmp_21105 = ctx_param_ext_19058;
            int64_t ctx_param_ext_tmp_21106 = ctx_param_ext_19040;
            int64_t ctx_param_ext_tmp_21107 = ctx_param_ext_19041;
            int64_t ctx_param_ext_tmp_21108 = ctx_param_ext_19042;
            int64_t ctx_param_ext_tmp_21109 = ctx_param_ext_19043;
            int64_t ctx_param_ext_tmp_21110 = ctx_param_ext_19045;
            int64_t ctx_param_ext_tmp_21111 = ctx_param_ext_19046;
            int64_t ctx_param_ext_tmp_21112 = ctx_param_ext_19047;
            int64_t ctx_param_ext_tmp_21113 = ctx_param_ext_19048;
            
            if (memblock_set(ctx, &mem_param_tmp_21114, &mem_param_19054,
                             "mem_param_19054") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21115, &mem_param_19059,
                             "mem_param_19059") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21116, &mem_param_19044,
                             "mem_param_19044") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21117, &mem_param_19049,
                             "mem_param_19049") != 0)
                return 1;
            ctx_param_ext_19040 = ctx_param_ext_tmp_21098;
            ctx_param_ext_19041 = ctx_param_ext_tmp_21099;
            ctx_param_ext_19042 = ctx_param_ext_tmp_21100;
            ctx_param_ext_19043 = ctx_param_ext_tmp_21101;
            ctx_param_ext_19045 = ctx_param_ext_tmp_21102;
            ctx_param_ext_19046 = ctx_param_ext_tmp_21103;
            ctx_param_ext_19047 = ctx_param_ext_tmp_21104;
            ctx_param_ext_19048 = ctx_param_ext_tmp_21105;
            ctx_param_ext_19050 = ctx_param_ext_tmp_21106;
            ctx_param_ext_19051 = ctx_param_ext_tmp_21107;
            ctx_param_ext_19052 = ctx_param_ext_tmp_21108;
            ctx_param_ext_19053 = ctx_param_ext_tmp_21109;
            ctx_param_ext_19055 = ctx_param_ext_tmp_21110;
            ctx_param_ext_19056 = ctx_param_ext_tmp_21111;
            ctx_param_ext_19057 = ctx_param_ext_tmp_21112;
            ctx_param_ext_19058 = ctx_param_ext_tmp_21113;
            if (memblock_set(ctx, &mem_param_19044, &mem_param_tmp_21114,
                             "mem_param_tmp_21114") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19049, &mem_param_tmp_21115,
                             "mem_param_tmp_21115") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19054, &mem_param_tmp_21116,
                             "mem_param_tmp_21116") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19059, &mem_param_tmp_21117,
                             "mem_param_tmp_21117") != 0)
                return 1;
        }
        ext_19208 = ctx_param_ext_19040;
        ext_19207 = ctx_param_ext_19041;
        ext_19206 = ctx_param_ext_19042;
        ext_19205 = ctx_param_ext_19043;
        ext_19204 = ctx_param_ext_19045;
        ext_19203 = ctx_param_ext_19046;
        ext_19202 = ctx_param_ext_19047;
        ext_19201 = ctx_param_ext_19048;
        ext_19200 = ctx_param_ext_19050;
        ext_19199 = ctx_param_ext_19051;
        ext_19198 = ctx_param_ext_19052;
        ext_19197 = ctx_param_ext_19053;
        ext_19196 = ctx_param_ext_19055;
        ext_19195 = ctx_param_ext_19056;
        ext_19194 = ctx_param_ext_19057;
        ext_19193 = ctx_param_ext_19058;
        if (memblock_set(ctx, &ext_mem_19192, &mem_param_19044,
                         "mem_param_19044") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19191, &mem_param_19049,
                         "mem_param_19049") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19190, &mem_param_19054,
                         "mem_param_19054") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19189, &mem_param_19059,
                         "mem_param_19059") != 0)
            return 1;
        for (int64_t i_16689 = 0; i_16689 < m_11476; i_16689++) {
            int32_t x_16014;
            
            x_16014 = ((int32_t *) mem_17118)[i_16689];
            
            float x_16015;
            
            x_16015 = ((float *) mem_18002)[i_16689 * n_11475 + i_16740];
            
            float x_16016;
            
            x_16016 = ((float *) mem_18006)[i_16689 * n_11475 + i_16740];
            
            bool cond_t_res_16017 = slt32(y_14930, x_16014);
            bool x_16018 = x_14939 && cond_t_res_16017;
            bool cond_t_res_16019 = slt32(x_16014, y_14931);
            bool x_16020 = x_16018 && cond_t_res_16019;
            float defunc_1_f_res_16021;
            
            if (x_16020) {
                defunc_1_f_res_16021 = 0.0F;
            } else {
                defunc_1_f_res_16021 = x_16015;
            }
            
            float defunc_1_f_res_16022;
            
            if (x_16020) {
                defunc_1_f_res_16022 = 0.0F;
            } else {
                defunc_1_f_res_16022 = x_16016;
            }
            ((float *) mem_19211.mem)[i_16689] = defunc_1_f_res_16021;
            ((float *) mem_19214.mem)[i_16689] = defunc_1_f_res_16022;
        }
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_19241.mem + (int64_t) 0, mem_19211.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_19244.mem + (int64_t) 0, mem_19214.mem + (int64_t) 0,
                    m_11476 * (int64_t) 4);
        
        int64_t ext_19413;
        int64_t ext_19412;
        int64_t ext_19411;
        int64_t ext_19410;
        int64_t ext_19409;
        int64_t ext_19408;
        int64_t ext_19407;
        int64_t ext_19406;
        int64_t ext_19405;
        int64_t ext_19404;
        int64_t ext_19403;
        int64_t ext_19402;
        int64_t ext_19401;
        int64_t ext_19400;
        int64_t ext_19399;
        int64_t ext_19398;
        int64_t ctx_param_ext_19245;
        int64_t ctx_param_ext_19246;
        int64_t ctx_param_ext_19247;
        int64_t ctx_param_ext_19248;
        int64_t ctx_param_ext_19250;
        int64_t ctx_param_ext_19251;
        int64_t ctx_param_ext_19252;
        int64_t ctx_param_ext_19253;
        int64_t ctx_param_ext_19255;
        int64_t ctx_param_ext_19256;
        int64_t ctx_param_ext_19257;
        int64_t ctx_param_ext_19258;
        int64_t ctx_param_ext_19260;
        int64_t ctx_param_ext_19261;
        int64_t ctx_param_ext_19262;
        int64_t ctx_param_ext_19263;
        
        ctx_param_ext_19245 = m_11476;
        ctx_param_ext_19246 = (int64_t) 0;
        ctx_param_ext_19247 = (int64_t) 1;
        ctx_param_ext_19248 = m_11476;
        ctx_param_ext_19250 = m_11476;
        ctx_param_ext_19251 = (int64_t) 0;
        ctx_param_ext_19252 = (int64_t) 1;
        ctx_param_ext_19253 = m_11476;
        ctx_param_ext_19255 = m_11476;
        ctx_param_ext_19256 = (int64_t) 0;
        ctx_param_ext_19257 = (int64_t) 1;
        ctx_param_ext_19258 = m_11476;
        ctx_param_ext_19260 = m_11476;
        ctx_param_ext_19261 = (int64_t) 0;
        ctx_param_ext_19262 = (int64_t) 1;
        ctx_param_ext_19263 = m_11476;
        if (memblock_set(ctx, &mem_param_19249, &mem_19211, "mem_19211") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19254, &mem_19214, "mem_19214") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19259, &mem_19241, "mem_19241") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19264, &mem_19244, "mem_19244") != 0)
            return 1;
        
        int32_t ns_16076;
        
        for (int64_t i_16071 = 0; i_16071 < i32_res_16043; i_16071++) {
            ns_16076 = ((int32_t *) mem_18672)[i_16071];
            for (int64_t i_16694 = 0; i_16694 < iota_arg_14709; i_16694++) {
                int32_t defunc_0_f_res_16079 = sext_i64_i32(i_16694);
                
                ((int32_t *) mem_19271)[i_16694] = defunc_0_f_res_16079;
            }
            
            int32_t i32_arg_16080 = mul32(2, ns_16076);
            float i32_res_16081 = sitofp_i32_f32(i32_arg_16080);
            bool zzero_16082 = ns_16076 == 0;
            bool nonzzero_16083 = !zzero_16082;
            bool nonzzero_cert_16084;
            
            if (!nonzzero_16083) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16708 = 0; i_16708 < iota_arg_14709; i_16708++) {
                int32_t x_16091;
                
                x_16091 = ((int32_t *) mem_19271)[i_16708];
                
                int32_t i32_arg_16092 = smod32(x_16091, ns_16076);
                float i32_res_16093 = sitofp_i32_f32(i32_arg_16092);
                float zt_res_16094 = 6.2831855F * i32_res_16093;
                float zs_res_16095 = zt_res_16094 / i32_res_16081;
                int64_t j_16096 = sext_i32_i64(x_16091);
                bool x_16097 = sle64((int64_t) 0, j_16096);
                bool y_16098 = slt64(j_16096, m_11476);
                bool bounds_check_16099 = x_16097 && y_16098;
                bool index_certs_16100;
                
                if (!bounds_check_16099) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_16096,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_16101;
                
                defunc_0_f_res_16101 =
                    ((float *) mem_param_19249.mem)[ctx_param_ext_19246 +
                                                    j_16096 *
                                                    ctx_param_ext_19247];
                
                float defunc_0_f_res_16102;
                
                defunc_0_f_res_16102 =
                    ((float *) mem_param_19254.mem)[ctx_param_ext_19251 +
                                                    j_16096 *
                                                    ctx_param_ext_19252];
                
                float sin_res_16103;
                
                sin_res_16103 = futrts_sin32(zs_res_16095);
                
                float cos_res_16104;
                
                cos_res_16104 = futrts_cos32(zs_res_16095);
                
                int32_t i_16105 = add32(y_14728, x_16091);
                int64_t i_16106 = sext_i32_i64(i_16105);
                bool x_16107 = sle64((int64_t) 0, i_16106);
                bool y_16108 = slt64(i_16106, m_11476);
                bool bounds_check_16109 = x_16107 && y_16108;
                bool index_certs_16110;
                
                if (!bounds_check_16109) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_16106,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11476, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_16111;
                
                zt_arg_16111 =
                    ((float *) mem_param_19249.mem)[ctx_param_ext_19246 +
                                                    i_16106 *
                                                    ctx_param_ext_19247];
                
                float zt_arg_16112;
                
                zt_arg_16112 =
                    ((float *) mem_param_19254.mem)[ctx_param_ext_19251 +
                                                    i_16106 *
                                                    ctx_param_ext_19252];
                
                float zt_res_16113 = sin_res_16103 * zt_arg_16112;
                float zt_res_16114 = cos_res_16104 * zt_arg_16111;
                float zm_res_16115 = zt_res_16114 - zt_res_16113;
                float zt_res_16116 = sin_res_16103 * zt_arg_16111;
                float zt_res_16117 = cos_res_16104 * zt_arg_16112;
                float zp_res_16118 = zt_res_16116 + zt_res_16117;
                float zp_res_16119 = defunc_0_f_res_16101 + zm_res_16115;
                float zp_res_16120 = defunc_0_f_res_16102 + zp_res_16118;
                float zm_res_16121 = defunc_0_f_res_16101 - zm_res_16115;
                float zm_res_16122 = defunc_0_f_res_16102 - zp_res_16118;
                int32_t x_16123 = sdiv32(x_16091, ns_16076);
                int32_t x_16124 = mul32(ns_16076, x_16123);
                int32_t x_16125 = mul32(2, x_16124);
                int32_t idxD_16126 = add32(i32_arg_16092, x_16125);
                int64_t i32_res_16127 = sext_i32_i64(idxD_16126);
                int32_t i32_arg_16128 = add32(ns_16076, idxD_16126);
                int64_t i32_res_16129 = sext_i32_i64(i32_arg_16128);
                
                ((int64_t *) mem_19286)[i_16708] = i32_res_16127;
                ((float *) mem_19289)[i_16708] = zp_res_16119;
                ((float *) mem_19292)[i_16708] = zp_res_16120;
                ((int64_t *) mem_19295)[i_16708] = i32_res_16129;
                ((float *) mem_19298)[i_16708] = zm_res_16121;
                ((float *) mem_19301)[i_16708] = zm_res_16122;
            }
            for (int64_t write_iter_16715 = 0; write_iter_16715 <
                 iota_arg_14709; write_iter_16715++) {
                int64_t write_iv_16718;
                
                write_iv_16718 = ((int64_t *) mem_19286)[write_iter_16715];
                
                int64_t write_iv_16721;
                
                write_iv_16721 = ((int64_t *) mem_19295)[write_iter_16715];
                if (sle64((int64_t) 0, write_iv_16718) && slt64(write_iv_16718,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19259.mem + (ctx_param_ext_19256 +
                                                       ctx_param_ext_19257 *
                                                       write_iv_16718) *
                                (int64_t) 4, mem_19289 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16721) && slt64(write_iv_16721,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19259.mem + (ctx_param_ext_19256 +
                                                       ctx_param_ext_19257 *
                                                       write_iv_16721) *
                                (int64_t) 4, mem_19298 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16718) && slt64(write_iv_16718,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19264.mem + (ctx_param_ext_19261 +
                                                       ctx_param_ext_19262 *
                                                       write_iv_16718) *
                                (int64_t) 4, mem_19292 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16721) && slt64(write_iv_16721,
                                                                m_11476)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19264.mem + (ctx_param_ext_19261 +
                                                       ctx_param_ext_19262 *
                                                       write_iv_16721) *
                                (int64_t) 4, mem_19301 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21133 = ctx_param_ext_19255;
            int64_t ctx_param_ext_tmp_21134 = ctx_param_ext_19256;
            int64_t ctx_param_ext_tmp_21135 = ctx_param_ext_19257;
            int64_t ctx_param_ext_tmp_21136 = ctx_param_ext_19258;
            int64_t ctx_param_ext_tmp_21137 = ctx_param_ext_19260;
            int64_t ctx_param_ext_tmp_21138 = ctx_param_ext_19261;
            int64_t ctx_param_ext_tmp_21139 = ctx_param_ext_19262;
            int64_t ctx_param_ext_tmp_21140 = ctx_param_ext_19263;
            int64_t ctx_param_ext_tmp_21141 = ctx_param_ext_19245;
            int64_t ctx_param_ext_tmp_21142 = ctx_param_ext_19246;
            int64_t ctx_param_ext_tmp_21143 = ctx_param_ext_19247;
            int64_t ctx_param_ext_tmp_21144 = ctx_param_ext_19248;
            int64_t ctx_param_ext_tmp_21145 = ctx_param_ext_19250;
            int64_t ctx_param_ext_tmp_21146 = ctx_param_ext_19251;
            int64_t ctx_param_ext_tmp_21147 = ctx_param_ext_19252;
            int64_t ctx_param_ext_tmp_21148 = ctx_param_ext_19253;
            
            if (memblock_set(ctx, &mem_param_tmp_21149, &mem_param_19259,
                             "mem_param_19259") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21150, &mem_param_19264,
                             "mem_param_19264") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21151, &mem_param_19249,
                             "mem_param_19249") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21152, &mem_param_19254,
                             "mem_param_19254") != 0)
                return 1;
            ctx_param_ext_19245 = ctx_param_ext_tmp_21133;
            ctx_param_ext_19246 = ctx_param_ext_tmp_21134;
            ctx_param_ext_19247 = ctx_param_ext_tmp_21135;
            ctx_param_ext_19248 = ctx_param_ext_tmp_21136;
            ctx_param_ext_19250 = ctx_param_ext_tmp_21137;
            ctx_param_ext_19251 = ctx_param_ext_tmp_21138;
            ctx_param_ext_19252 = ctx_param_ext_tmp_21139;
            ctx_param_ext_19253 = ctx_param_ext_tmp_21140;
            ctx_param_ext_19255 = ctx_param_ext_tmp_21141;
            ctx_param_ext_19256 = ctx_param_ext_tmp_21142;
            ctx_param_ext_19257 = ctx_param_ext_tmp_21143;
            ctx_param_ext_19258 = ctx_param_ext_tmp_21144;
            ctx_param_ext_19260 = ctx_param_ext_tmp_21145;
            ctx_param_ext_19261 = ctx_param_ext_tmp_21146;
            ctx_param_ext_19262 = ctx_param_ext_tmp_21147;
            ctx_param_ext_19263 = ctx_param_ext_tmp_21148;
            if (memblock_set(ctx, &mem_param_19249, &mem_param_tmp_21149,
                             "mem_param_tmp_21149") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19254, &mem_param_tmp_21150,
                             "mem_param_tmp_21150") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19259, &mem_param_tmp_21151,
                             "mem_param_tmp_21151") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19264, &mem_param_tmp_21152,
                             "mem_param_tmp_21152") != 0)
                return 1;
        }
        ext_19413 = ctx_param_ext_19245;
        ext_19412 = ctx_param_ext_19246;
        ext_19411 = ctx_param_ext_19247;
        ext_19410 = ctx_param_ext_19248;
        ext_19409 = ctx_param_ext_19250;
        ext_19408 = ctx_param_ext_19251;
        ext_19407 = ctx_param_ext_19252;
        ext_19406 = ctx_param_ext_19253;
        ext_19405 = ctx_param_ext_19255;
        ext_19404 = ctx_param_ext_19256;
        ext_19403 = ctx_param_ext_19257;
        ext_19402 = ctx_param_ext_19258;
        ext_19401 = ctx_param_ext_19260;
        ext_19400 = ctx_param_ext_19261;
        ext_19399 = ctx_param_ext_19262;
        ext_19398 = ctx_param_ext_19263;
        if (memblock_set(ctx, &ext_mem_19397, &mem_param_19249,
                         "mem_param_19249") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19396, &mem_param_19254,
                         "mem_param_19254") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19395, &mem_param_19259,
                         "mem_param_19259") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19394, &mem_param_19264,
                         "mem_param_19264") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18718 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_18987.mem + ext_19002 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18987, "ext_mem_18987") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18722 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_18986.mem + ext_18998 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18986, "ext_mem_18986") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18726 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_19192.mem + ext_19207 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19192, "ext_mem_19192") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18730 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_19191.mem + ext_19203 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19191, "ext_mem_19191") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18734 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_19397.mem + ext_19412 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19397, "ext_mem_19397") != 0)
            return 1;
        if (m_11476 * (int64_t) 4 > 0)
            memmove(mem_18738 + i_16740 * m_11476 * (int64_t) 4,
                    ext_mem_19396.mem + ext_19408 * (int64_t) 4, m_11476 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19396, "ext_mem_19396") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_18801, "mem_18801") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18804, "mem_18804") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18831, "mem_18831") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18834, "mem_18834") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19006, "mem_19006") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19009, "mem_19009") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19036, "mem_19036") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19039, "mem_19039") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19211, "mem_19211") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19214, "mem_19214") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19241, "mem_19241") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19244, "mem_19244") != 0)
        return 1;
    
    float i64_res_14952 = sitofp_i64_f32(binop_x_17134);
    bool r_14953;
    int32_t r_14954;
    int64_t r_14955;
    bool loop_while_14956;
    int32_t r_14957;
    int64_t n_14958;
    
    loop_while_14956 = loop_cond_14688;
    r_14957 = 0;
    n_14958 = n_11475;
    while (loop_while_14956) {
        int64_t n_14959 = sdiv64(n_14958, (int64_t) 2);
        int32_t r_14960 = add32(1, r_14957);
        bool loop_cond_14961 = slt64((int64_t) 1, n_14959);
        bool loop_while_tmp_21166 = loop_cond_14961;
        int32_t r_tmp_21167 = r_14960;
        int64_t n_tmp_21168 = n_14959;
        
        loop_while_14956 = loop_while_tmp_21166;
        r_14957 = r_tmp_21167;
        n_14958 = n_tmp_21168;
    }
    r_14953 = loop_while_14956;
    r_14954 = r_14957;
    r_14955 = n_14958;
    
    int64_t i32_res_15070 = sext_i32_i64(r_14954);
    bool bounds_invalid_upwards_15071 = slt64(i32_res_15070, (int64_t) 0);
    bool valid_15072 = !bounds_invalid_upwards_15071;
    bool range_valid_c_15073;
    
    if (!valid_15072) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15070, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19462 = (int64_t) 4 * i32_res_15070;
    int64_t bytes_19463 = smax64((int64_t) 0, binop_y_19462);
    
    if (mem_19464_cached_sizze_21420 < bytes_19463) {
        err = lexical_realloc(&ctx->error, &mem_19464,
                              &mem_19464_cached_sizze_21420, bytes_19463);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16944 = 0; i_16944 < r_14954; i_16944++) {
        int64_t i_16749 = sext_i32_i64(i_16944);
        bool nonnegative_15080 = sle32(0, i_16944);
        bool nonzzero_cert_15081;
        
        if (!nonnegative_15080) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15082 = shl32(1, i_16944);
        
        ((int32_t *) mem_19464)[i_16749] = defunc_0_f_res_15082;
    }
    
    bool loop_nonempty_15083 = slt64((int64_t) 0, i32_res_15070);
    bool loop_not_taken_15084 = !loop_nonempty_15083;
    bool protect_assert_disj_15085 = dim_match_14838 || loop_not_taken_15084;
    bool empty_or_match_cert_15086;
    
    if (!protect_assert_disj_15085) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15087;
    
    if (!protect_assert_disj_15085) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_16025;
    int32_t r_16026;
    int64_t r_16027;
    bool loop_while_16028;
    int32_t r_16029;
    int64_t n_16030;
    
    loop_while_16028 = loop_cond_14688;
    r_16029 = 0;
    n_16030 = n_11475;
    while (loop_while_16028) {
        int64_t n_16031 = sdiv64(n_16030, (int64_t) 2);
        int32_t r_16032 = add32(1, r_16029);
        bool loop_cond_16033 = slt64((int64_t) 1, n_16031);
        bool loop_while_tmp_21170 = loop_cond_16033;
        int32_t r_tmp_21171 = r_16032;
        int64_t n_tmp_21172 = n_16031;
        
        loop_while_16028 = loop_while_tmp_21170;
        r_16029 = r_tmp_21171;
        n_16030 = n_tmp_21172;
    }
    r_16025 = loop_while_16028;
    r_16026 = r_16029;
    r_16027 = n_16030;
    
    int64_t i32_res_16142 = sext_i32_i64(r_16026);
    bool loop_nonempty_16155 = slt64((int64_t) 0, i32_res_16142);
    bool loop_not_taken_16156 = !loop_nonempty_16155;
    bool protect_assert_disj_16157 = dim_match_14838 || loop_not_taken_16156;
    bool empty_or_match_cert_16159;
    
    if (!protect_assert_disj_16157) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_16158;
    
    if (!protect_assert_disj_16157) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_16143 = slt64(i32_res_16142, (int64_t) 0);
    bool valid_16144 = !bounds_invalid_upwards_16143;
    bool range_valid_c_16145;
    
    if (!valid_16144) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_16142, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19477 = (int64_t) 4 * i32_res_16142;
    int64_t bytes_19478 = smax64((int64_t) 0, binop_y_19477);
    
    if (mem_19479_cached_sizze_21421 < bytes_19478) {
        err = lexical_realloc(&ctx->error, &mem_19479,
                              &mem_19479_cached_sizze_21421, bytes_19478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16945 = 0; i_16945 < r_16026; i_16945++) {
        int64_t i_16753 = sext_i32_i64(i_16945);
        bool nonnegative_16152 = sle32(0, i_16945);
        bool nonzzero_cert_16153;
        
        if (!nonnegative_16152) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_16154 = shl32(1, i_16945);
        
        ((int32_t *) mem_19479)[i_16753] = defunc_0_f_res_16154;
    }
    
    bool r_15489;
    int32_t r_15490;
    int64_t r_15491;
    bool loop_while_15492;
    int32_t r_15493;
    int64_t n_15494;
    
    loop_while_15492 = loop_cond_14688;
    r_15493 = 0;
    n_15494 = n_11475;
    while (loop_while_15492) {
        int64_t n_15495 = sdiv64(n_15494, (int64_t) 2);
        int32_t r_15496 = add32(1, r_15493);
        bool loop_cond_15497 = slt64((int64_t) 1, n_15495);
        bool loop_while_tmp_21174 = loop_cond_15497;
        int32_t r_tmp_21175 = r_15496;
        int64_t n_tmp_21176 = n_15495;
        
        loop_while_15492 = loop_while_tmp_21174;
        r_15493 = r_tmp_21175;
        n_15494 = n_tmp_21176;
    }
    r_15489 = loop_while_15492;
    r_15490 = r_15493;
    r_15491 = n_15494;
    
    int64_t i32_res_15606 = sext_i32_i64(r_15490);
    bool loop_nonempty_15619 = slt64((int64_t) 0, i32_res_15606);
    bool loop_not_taken_15620 = !loop_nonempty_15619;
    bool protect_assert_disj_15621 = dim_match_14838 || loop_not_taken_15620;
    bool empty_or_match_cert_15623;
    
    if (!protect_assert_disj_15621) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15622;
    
    if (!protect_assert_disj_15621) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11475, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:70:25-39\n   #7  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15607 = slt64(i32_res_15606, (int64_t) 0);
    bool valid_15608 = !bounds_invalid_upwards_15607;
    bool range_valid_c_15609;
    
    if (!valid_15608) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15606, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19492 = (int64_t) 4 * i32_res_15606;
    int64_t bytes_19493 = smax64((int64_t) 0, binop_y_19492);
    
    if (mem_19494_cached_sizze_21422 < bytes_19493) {
        err = lexical_realloc(&ctx->error, &mem_19494,
                              &mem_19494_cached_sizze_21422, bytes_19493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16946 = 0; i_16946 < r_15490; i_16946++) {
        int64_t i_16757 = sext_i32_i64(i_16946);
        bool nonnegative_15616 = sle32(0, i_16946);
        bool nonzzero_cert_15617;
        
        if (!nonnegative_15616) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15618 = shl32(1, i_16946);
        
        ((int32_t *) mem_19494)[i_16757] = defunc_0_f_res_15618;
    }
    if (mem_19510_cached_sizze_21423 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19510,
                              &mem_19510_cached_sizze_21423, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19514_cached_sizze_21424 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19514,
                              &mem_19514_cached_sizze_21424, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19518_cached_sizze_21425 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19518,
                              &mem_19518_cached_sizze_21425, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19522_cached_sizze_21426 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19522,
                              &mem_19522_cached_sizze_21426, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19526_cached_sizze_21427 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19526,
                              &mem_19526_cached_sizze_21427, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19530_cached_sizze_21428 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19530,
                              &mem_19530_cached_sizze_21428, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19591 = (int64_t) 4 * n_11475;
    int64_t bytes_19592 = smax64((int64_t) 0, binop_y_19591);
    
    if (memblock_alloc(ctx, &mem_19593, bytes_19592, "mem_19593")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19596, bytes_19592, "mem_19596")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19599, bytes_19592, "mem_19599")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19602, bytes_19592, "mem_19602")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19605, bytes_19592, "mem_19605")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19608, bytes_19592, "mem_19608")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19611, bytes_19592, "mem_19611")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19614, bytes_19592, "mem_19614")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19643 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_19644 = smax64((int64_t) 0, binop_y_19643);
    
    if (mem_19645_cached_sizze_21429 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19645,
                              &mem_19645_cached_sizze_21429, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19658 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_19659 = smax64((int64_t) 0, binop_y_19658);
    
    if (mem_19660_cached_sizze_21430 < bytes_19659) {
        err = lexical_realloc(&ctx->error, &mem_19660,
                              &mem_19660_cached_sizze_21430, bytes_19659);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19663_cached_sizze_21431 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19663,
                              &mem_19663_cached_sizze_21431, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19666_cached_sizze_21432 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19666,
                              &mem_19666_cached_sizze_21432, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19669_cached_sizze_21433 < bytes_19659) {
        err = lexical_realloc(&ctx->error, &mem_19669,
                              &mem_19669_cached_sizze_21433, bytes_19659);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19672_cached_sizze_21434 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19672,
                              &mem_19672_cached_sizze_21434, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19675_cached_sizze_21435 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19675,
                              &mem_19675_cached_sizze_21435, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19790, bytes_19592, "mem_19790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19793, bytes_19592, "mem_19793")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19822 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_19823 = smax64((int64_t) 0, binop_y_19822);
    
    if (mem_19824_cached_sizze_21436 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19824,
                              &mem_19824_cached_sizze_21436, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19837 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_19838 = smax64((int64_t) 0, binop_y_19837);
    
    if (mem_19839_cached_sizze_21437 < bytes_19838) {
        err = lexical_realloc(&ctx->error, &mem_19839,
                              &mem_19839_cached_sizze_21437, bytes_19838);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19842_cached_sizze_21438 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19842,
                              &mem_19842_cached_sizze_21438, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19845_cached_sizze_21439 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19845,
                              &mem_19845_cached_sizze_21439, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19848_cached_sizze_21440 < bytes_19838) {
        err = lexical_realloc(&ctx->error, &mem_19848,
                              &mem_19848_cached_sizze_21440, bytes_19838);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19851_cached_sizze_21441 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19851,
                              &mem_19851_cached_sizze_21441, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19854_cached_sizze_21442 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19854,
                              &mem_19854_cached_sizze_21442, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19969, bytes_19592, "mem_19969")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19972, bytes_19592, "mem_19972")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_20001 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_20002 = smax64((int64_t) 0, binop_y_20001);
    
    if (mem_20003_cached_sizze_21443 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20003,
                              &mem_20003_cached_sizze_21443, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_20016 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_20017 = smax64((int64_t) 0, binop_y_20016);
    
    if (mem_20018_cached_sizze_21444 < bytes_20017) {
        err = lexical_realloc(&ctx->error, &mem_20018,
                              &mem_20018_cached_sizze_21444, bytes_20017);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20021_cached_sizze_21445 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20021,
                              &mem_20021_cached_sizze_21445, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20024_cached_sizze_21446 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20024,
                              &mem_20024_cached_sizze_21446, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20027_cached_sizze_21447 < bytes_20017) {
        err = lexical_realloc(&ctx->error, &mem_20027,
                              &mem_20027_cached_sizze_21447, bytes_20017);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20030_cached_sizze_21448 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20030,
                              &mem_20030_cached_sizze_21448, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20033_cached_sizze_21449 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20033,
                              &mem_20033_cached_sizze_21449, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16879 = 0; i_16879 < m_11476; i_16879++) {
        for (int64_t i_21184 = 0; i_21184 < n_11475; i_21184++) {
            float tmp_21185;
            
            tmp_21185 = ((float *) mem_18718)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21184 * m_11476];
            ((float *) mem_19593.mem)[i_21184] = tmp_21185;
        }
        for (int64_t i_21186 = 0; i_21186 < n_11475; i_21186++) {
            float tmp_21187;
            
            tmp_21187 = ((float *) mem_18722)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21186 * m_11476];
            ((float *) mem_19596.mem)[i_21186] = tmp_21187;
        }
        for (int64_t i_21188 = 0; i_21188 < n_11475; i_21188++) {
            float tmp_21189;
            
            tmp_21189 = ((float *) mem_18726)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21188 * m_11476];
            ((float *) mem_19599.mem)[i_21188] = tmp_21189;
        }
        for (int64_t i_21190 = 0; i_21190 < n_11475; i_21190++) {
            float tmp_21191;
            
            tmp_21191 = ((float *) mem_18730)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21190 * m_11476];
            ((float *) mem_19602.mem)[i_21190] = tmp_21191;
        }
        for (int64_t i_21192 = 0; i_21192 < n_11475; i_21192++) {
            float tmp_21193;
            
            tmp_21193 = ((float *) mem_18734)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21192 * m_11476];
            ((float *) mem_19605.mem)[i_21192] = tmp_21193;
        }
        for (int64_t i_21194 = 0; i_21194 < n_11475; i_21194++) {
            float tmp_21195;
            
            tmp_21195 = ((float *) mem_18738)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21194 * m_11476];
            ((float *) mem_19608.mem)[i_21194] = tmp_21195;
        }
        for (int64_t i_21196 = 0; i_21196 < n_11475; i_21196++) {
            float tmp_21197;
            
            tmp_21197 = ((float *) mem_18718)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21196 * m_11476];
            ((float *) mem_19611.mem)[i_21196] = tmp_21197;
        }
        for (int64_t i_21198 = 0; i_21198 < n_11475; i_21198++) {
            float tmp_21199;
            
            tmp_21199 = ((float *) mem_18722)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21198 * m_11476];
            ((float *) mem_19614.mem)[i_21198] = tmp_21199;
        }
        
        int64_t ext_19787;
        int64_t ext_19786;
        int64_t ext_19785;
        int64_t ext_19784;
        int64_t ext_19783;
        int64_t ext_19782;
        int64_t ext_19781;
        int64_t ext_19780;
        int64_t ext_19779;
        int64_t ext_19778;
        int64_t ext_19777;
        int64_t ext_19776;
        int64_t ext_19775;
        int64_t ext_19774;
        int64_t ext_19773;
        int64_t ext_19772;
        int64_t ctx_param_ext_19615;
        int64_t ctx_param_ext_19616;
        int64_t ctx_param_ext_19617;
        int64_t ctx_param_ext_19618;
        int64_t ctx_param_ext_19620;
        int64_t ctx_param_ext_19621;
        int64_t ctx_param_ext_19622;
        int64_t ctx_param_ext_19623;
        int64_t ctx_param_ext_19625;
        int64_t ctx_param_ext_19626;
        int64_t ctx_param_ext_19627;
        int64_t ctx_param_ext_19628;
        int64_t ctx_param_ext_19630;
        int64_t ctx_param_ext_19631;
        int64_t ctx_param_ext_19632;
        int64_t ctx_param_ext_19633;
        
        ctx_param_ext_19615 = n_11475;
        ctx_param_ext_19616 = (int64_t) 0;
        ctx_param_ext_19617 = (int64_t) 1;
        ctx_param_ext_19618 = n_11475;
        ctx_param_ext_19620 = n_11475;
        ctx_param_ext_19621 = (int64_t) 0;
        ctx_param_ext_19622 = (int64_t) 1;
        ctx_param_ext_19623 = n_11475;
        ctx_param_ext_19625 = n_11475;
        ctx_param_ext_19626 = (int64_t) 0;
        ctx_param_ext_19627 = (int64_t) 1;
        ctx_param_ext_19628 = n_11475;
        ctx_param_ext_19630 = n_11475;
        ctx_param_ext_19631 = (int64_t) 0;
        ctx_param_ext_19632 = (int64_t) 1;
        ctx_param_ext_19633 = n_11475;
        if (memblock_set(ctx, &mem_param_19619, &mem_19593, "mem_19593") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19624, &mem_19596, "mem_19596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19629, &mem_19611, "mem_19611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19634, &mem_19614, "mem_19614") != 0)
            return 1;
        
        int32_t ns_15103;
        
        for (int64_t i_15098 = 0; i_15098 < i32_res_15070; i_15098++) {
            ns_15103 = ((int32_t *) mem_19464)[i_15098];
            for (int64_t i_16761 = 0; i_16761 < iota_arg_14817; i_16761++) {
                int32_t defunc_0_f_res_15106 = sext_i64_i32(i_16761);
                
                ((int32_t *) mem_19645)[i_16761] = defunc_0_f_res_15106;
            }
            
            int32_t i32_arg_15107 = mul32(2, ns_15103);
            float i32_res_15108 = sitofp_i32_f32(i32_arg_15107);
            bool zzero_15109 = ns_15103 == 0;
            bool nonzzero_15110 = !zzero_15109;
            bool nonzzero_cert_15111;
            
            if (!nonzzero_15110) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16775 = 0; i_16775 < iota_arg_14817; i_16775++) {
                int32_t x_15118;
                
                x_15118 = ((int32_t *) mem_19645)[i_16775];
                
                int32_t i32_arg_15119 = smod32(x_15118, ns_15103);
                float i32_res_15120 = sitofp_i32_f32(i32_arg_15119);
                float zt_res_15121 = 6.2831855F * i32_res_15120;
                float zs_res_15122 = zt_res_15121 / i32_res_15108;
                int64_t j_15123 = sext_i32_i64(x_15118);
                bool x_15124 = sle64((int64_t) 0, j_15123);
                bool y_15125 = slt64(j_15123, n_11475);
                bool bounds_check_15126 = x_15124 && y_15125;
                bool index_certs_15127;
                
                if (!bounds_check_15126) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15123,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15128;
                
                defunc_0_f_res_15128 =
                    ((float *) mem_param_19619.mem)[ctx_param_ext_19616 +
                                                    j_15123 *
                                                    ctx_param_ext_19617];
                
                float defunc_0_f_res_15129;
                
                defunc_0_f_res_15129 =
                    ((float *) mem_param_19624.mem)[ctx_param_ext_19621 +
                                                    j_15123 *
                                                    ctx_param_ext_19622];
                
                float sin_res_15130;
                
                sin_res_15130 = futrts_sin32(zs_res_15122);
                
                float cos_res_15131;
                
                cos_res_15131 = futrts_cos32(zs_res_15122);
                
                int32_t i_15132 = add32(y_14836, x_15118);
                int64_t i_15133 = sext_i32_i64(i_15132);
                bool x_15134 = sle64((int64_t) 0, i_15133);
                bool y_15135 = slt64(i_15133, n_11475);
                bool bounds_check_15136 = x_15134 && y_15135;
                bool index_certs_15137;
                
                if (!bounds_check_15136) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15133,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15138;
                
                zt_arg_15138 =
                    ((float *) mem_param_19619.mem)[ctx_param_ext_19616 +
                                                    i_15133 *
                                                    ctx_param_ext_19617];
                
                float zt_arg_15139;
                
                zt_arg_15139 =
                    ((float *) mem_param_19624.mem)[ctx_param_ext_19621 +
                                                    i_15133 *
                                                    ctx_param_ext_19622];
                
                float zt_res_15140 = sin_res_15130 * zt_arg_15139;
                float zt_res_15141 = cos_res_15131 * zt_arg_15138;
                float zm_res_15142 = zt_res_15141 - zt_res_15140;
                float zt_res_15143 = sin_res_15130 * zt_arg_15138;
                float zt_res_15144 = cos_res_15131 * zt_arg_15139;
                float zp_res_15145 = zt_res_15143 + zt_res_15144;
                float zp_res_15146 = defunc_0_f_res_15128 + zm_res_15142;
                float zp_res_15147 = defunc_0_f_res_15129 + zp_res_15145;
                float zm_res_15148 = defunc_0_f_res_15128 - zm_res_15142;
                float zm_res_15149 = defunc_0_f_res_15129 - zp_res_15145;
                int32_t x_15150 = sdiv32(x_15118, ns_15103);
                int32_t x_15151 = mul32(ns_15103, x_15150);
                int32_t x_15152 = mul32(2, x_15151);
                int32_t idxD_15153 = add32(i32_arg_15119, x_15152);
                int64_t i32_res_15154 = sext_i32_i64(idxD_15153);
                int32_t i32_arg_15155 = add32(ns_15103, idxD_15153);
                int64_t i32_res_15156 = sext_i32_i64(i32_arg_15155);
                
                ((int64_t *) mem_19660)[i_16775] = i32_res_15154;
                ((float *) mem_19663)[i_16775] = zp_res_15146;
                ((float *) mem_19666)[i_16775] = zp_res_15147;
                ((int64_t *) mem_19669)[i_16775] = i32_res_15156;
                ((float *) mem_19672)[i_16775] = zm_res_15148;
                ((float *) mem_19675)[i_16775] = zm_res_15149;
            }
            for (int64_t write_iter_16782 = 0; write_iter_16782 <
                 iota_arg_14817; write_iter_16782++) {
                int64_t write_iv_16785;
                
                write_iv_16785 = ((int64_t *) mem_19660)[write_iter_16782];
                
                int64_t write_iv_16788;
                
                write_iv_16788 = ((int64_t *) mem_19669)[write_iter_16782];
                if (sle64((int64_t) 0, write_iv_16785) && slt64(write_iv_16785,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19629.mem + (ctx_param_ext_19626 +
                                                       ctx_param_ext_19627 *
                                                       write_iv_16785) *
                                (int64_t) 4, mem_19663 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16788) && slt64(write_iv_16788,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19629.mem + (ctx_param_ext_19626 +
                                                       ctx_param_ext_19627 *
                                                       write_iv_16788) *
                                (int64_t) 4, mem_19672 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16785) && slt64(write_iv_16785,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19634.mem + (ctx_param_ext_19631 +
                                                       ctx_param_ext_19632 *
                                                       write_iv_16785) *
                                (int64_t) 4, mem_19666 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16788) && slt64(write_iv_16788,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19634.mem + (ctx_param_ext_19631 +
                                                       ctx_param_ext_19632 *
                                                       write_iv_16788) *
                                (int64_t) 4, mem_19675 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21200 = ctx_param_ext_19625;
            int64_t ctx_param_ext_tmp_21201 = ctx_param_ext_19626;
            int64_t ctx_param_ext_tmp_21202 = ctx_param_ext_19627;
            int64_t ctx_param_ext_tmp_21203 = ctx_param_ext_19628;
            int64_t ctx_param_ext_tmp_21204 = ctx_param_ext_19630;
            int64_t ctx_param_ext_tmp_21205 = ctx_param_ext_19631;
            int64_t ctx_param_ext_tmp_21206 = ctx_param_ext_19632;
            int64_t ctx_param_ext_tmp_21207 = ctx_param_ext_19633;
            int64_t ctx_param_ext_tmp_21208 = ctx_param_ext_19615;
            int64_t ctx_param_ext_tmp_21209 = ctx_param_ext_19616;
            int64_t ctx_param_ext_tmp_21210 = ctx_param_ext_19617;
            int64_t ctx_param_ext_tmp_21211 = ctx_param_ext_19618;
            int64_t ctx_param_ext_tmp_21212 = ctx_param_ext_19620;
            int64_t ctx_param_ext_tmp_21213 = ctx_param_ext_19621;
            int64_t ctx_param_ext_tmp_21214 = ctx_param_ext_19622;
            int64_t ctx_param_ext_tmp_21215 = ctx_param_ext_19623;
            
            if (memblock_set(ctx, &mem_param_tmp_21216, &mem_param_19629,
                             "mem_param_19629") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21217, &mem_param_19634,
                             "mem_param_19634") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21218, &mem_param_19619,
                             "mem_param_19619") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21219, &mem_param_19624,
                             "mem_param_19624") != 0)
                return 1;
            ctx_param_ext_19615 = ctx_param_ext_tmp_21200;
            ctx_param_ext_19616 = ctx_param_ext_tmp_21201;
            ctx_param_ext_19617 = ctx_param_ext_tmp_21202;
            ctx_param_ext_19618 = ctx_param_ext_tmp_21203;
            ctx_param_ext_19620 = ctx_param_ext_tmp_21204;
            ctx_param_ext_19621 = ctx_param_ext_tmp_21205;
            ctx_param_ext_19622 = ctx_param_ext_tmp_21206;
            ctx_param_ext_19623 = ctx_param_ext_tmp_21207;
            ctx_param_ext_19625 = ctx_param_ext_tmp_21208;
            ctx_param_ext_19626 = ctx_param_ext_tmp_21209;
            ctx_param_ext_19627 = ctx_param_ext_tmp_21210;
            ctx_param_ext_19628 = ctx_param_ext_tmp_21211;
            ctx_param_ext_19630 = ctx_param_ext_tmp_21212;
            ctx_param_ext_19631 = ctx_param_ext_tmp_21213;
            ctx_param_ext_19632 = ctx_param_ext_tmp_21214;
            ctx_param_ext_19633 = ctx_param_ext_tmp_21215;
            if (memblock_set(ctx, &mem_param_19619, &mem_param_tmp_21216,
                             "mem_param_tmp_21216") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19624, &mem_param_tmp_21217,
                             "mem_param_tmp_21217") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19629, &mem_param_tmp_21218,
                             "mem_param_tmp_21218") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19634, &mem_param_tmp_21219,
                             "mem_param_tmp_21219") != 0)
                return 1;
        }
        ext_19787 = ctx_param_ext_19615;
        ext_19786 = ctx_param_ext_19616;
        ext_19785 = ctx_param_ext_19617;
        ext_19784 = ctx_param_ext_19618;
        ext_19783 = ctx_param_ext_19620;
        ext_19782 = ctx_param_ext_19621;
        ext_19781 = ctx_param_ext_19622;
        ext_19780 = ctx_param_ext_19623;
        ext_19779 = ctx_param_ext_19625;
        ext_19778 = ctx_param_ext_19626;
        ext_19777 = ctx_param_ext_19627;
        ext_19776 = ctx_param_ext_19628;
        ext_19775 = ctx_param_ext_19630;
        ext_19774 = ctx_param_ext_19631;
        ext_19773 = ctx_param_ext_19632;
        ext_19772 = ctx_param_ext_19633;
        if (memblock_set(ctx, &ext_mem_19771, &mem_param_19619,
                         "mem_param_19619") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19770, &mem_param_19624,
                         "mem_param_19624") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19769, &mem_param_19629,
                         "mem_param_19629") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19768, &mem_param_19634,
                         "mem_param_19634") != 0)
            return 1;
        for (int64_t i_21233 = 0; i_21233 < n_11475; i_21233++) {
            float tmp_21234;
            
            tmp_21234 = ((float *) mem_18726)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21233 * m_11476];
            ((float *) mem_19790.mem)[i_21233] = tmp_21234;
        }
        for (int64_t i_21235 = 0; i_21235 < n_11475; i_21235++) {
            float tmp_21236;
            
            tmp_21236 = ((float *) mem_18730)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21235 * m_11476];
            ((float *) mem_19793.mem)[i_21235] = tmp_21236;
        }
        
        int64_t ext_19966;
        int64_t ext_19965;
        int64_t ext_19964;
        int64_t ext_19963;
        int64_t ext_19962;
        int64_t ext_19961;
        int64_t ext_19960;
        int64_t ext_19959;
        int64_t ext_19958;
        int64_t ext_19957;
        int64_t ext_19956;
        int64_t ext_19955;
        int64_t ext_19954;
        int64_t ext_19953;
        int64_t ext_19952;
        int64_t ext_19951;
        int64_t ctx_param_ext_19794;
        int64_t ctx_param_ext_19795;
        int64_t ctx_param_ext_19796;
        int64_t ctx_param_ext_19797;
        int64_t ctx_param_ext_19799;
        int64_t ctx_param_ext_19800;
        int64_t ctx_param_ext_19801;
        int64_t ctx_param_ext_19802;
        int64_t ctx_param_ext_19804;
        int64_t ctx_param_ext_19805;
        int64_t ctx_param_ext_19806;
        int64_t ctx_param_ext_19807;
        int64_t ctx_param_ext_19809;
        int64_t ctx_param_ext_19810;
        int64_t ctx_param_ext_19811;
        int64_t ctx_param_ext_19812;
        
        ctx_param_ext_19794 = n_11475;
        ctx_param_ext_19795 = (int64_t) 0;
        ctx_param_ext_19796 = (int64_t) 1;
        ctx_param_ext_19797 = n_11475;
        ctx_param_ext_19799 = n_11475;
        ctx_param_ext_19800 = (int64_t) 0;
        ctx_param_ext_19801 = (int64_t) 1;
        ctx_param_ext_19802 = n_11475;
        ctx_param_ext_19804 = n_11475;
        ctx_param_ext_19805 = (int64_t) 0;
        ctx_param_ext_19806 = (int64_t) 1;
        ctx_param_ext_19807 = n_11475;
        ctx_param_ext_19809 = n_11475;
        ctx_param_ext_19810 = (int64_t) 0;
        ctx_param_ext_19811 = (int64_t) 1;
        ctx_param_ext_19812 = n_11475;
        if (memblock_set(ctx, &mem_param_19798, &mem_19599, "mem_19599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19803, &mem_19602, "mem_19602") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19808, &mem_19790, "mem_19790") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19813, &mem_19793, "mem_19793") != 0)
            return 1;
        
        int32_t ns_15639;
        
        for (int64_t i_15634 = 0; i_15634 < i32_res_15606; i_15634++) {
            ns_15639 = ((int32_t *) mem_19494)[i_15634];
            for (int64_t i_16797 = 0; i_16797 < iota_arg_14817; i_16797++) {
                int32_t defunc_0_f_res_15642 = sext_i64_i32(i_16797);
                
                ((int32_t *) mem_19824)[i_16797] = defunc_0_f_res_15642;
            }
            
            int32_t i32_arg_15643 = mul32(2, ns_15639);
            float i32_res_15644 = sitofp_i32_f32(i32_arg_15643);
            bool zzero_15645 = ns_15639 == 0;
            bool nonzzero_15646 = !zzero_15645;
            bool nonzzero_cert_15647;
            
            if (!nonzzero_15646) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16811 = 0; i_16811 < iota_arg_14817; i_16811++) {
                int32_t x_15654;
                
                x_15654 = ((int32_t *) mem_19824)[i_16811];
                
                int32_t i32_arg_15655 = smod32(x_15654, ns_15639);
                float i32_res_15656 = sitofp_i32_f32(i32_arg_15655);
                float zt_res_15657 = 6.2831855F * i32_res_15656;
                float zs_res_15658 = zt_res_15657 / i32_res_15644;
                int64_t j_15659 = sext_i32_i64(x_15654);
                bool x_15660 = sle64((int64_t) 0, j_15659);
                bool y_15661 = slt64(j_15659, n_11475);
                bool bounds_check_15662 = x_15660 && y_15661;
                bool index_certs_15663;
                
                if (!bounds_check_15662) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15659,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15664;
                
                defunc_0_f_res_15664 =
                    ((float *) mem_param_19798.mem)[ctx_param_ext_19795 +
                                                    j_15659 *
                                                    ctx_param_ext_19796];
                
                float defunc_0_f_res_15665;
                
                defunc_0_f_res_15665 =
                    ((float *) mem_param_19803.mem)[ctx_param_ext_19800 +
                                                    j_15659 *
                                                    ctx_param_ext_19801];
                
                float sin_res_15666;
                
                sin_res_15666 = futrts_sin32(zs_res_15658);
                
                float cos_res_15667;
                
                cos_res_15667 = futrts_cos32(zs_res_15658);
                
                int32_t i_15668 = add32(y_14836, x_15654);
                int64_t i_15669 = sext_i32_i64(i_15668);
                bool x_15670 = sle64((int64_t) 0, i_15669);
                bool y_15671 = slt64(i_15669, n_11475);
                bool bounds_check_15672 = x_15670 && y_15671;
                bool index_certs_15673;
                
                if (!bounds_check_15672) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15669,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15674;
                
                zt_arg_15674 =
                    ((float *) mem_param_19798.mem)[ctx_param_ext_19795 +
                                                    i_15669 *
                                                    ctx_param_ext_19796];
                
                float zt_arg_15675;
                
                zt_arg_15675 =
                    ((float *) mem_param_19803.mem)[ctx_param_ext_19800 +
                                                    i_15669 *
                                                    ctx_param_ext_19801];
                
                float zt_res_15676 = sin_res_15666 * zt_arg_15675;
                float zt_res_15677 = cos_res_15667 * zt_arg_15674;
                float zm_res_15678 = zt_res_15677 - zt_res_15676;
                float zt_res_15679 = sin_res_15666 * zt_arg_15674;
                float zt_res_15680 = cos_res_15667 * zt_arg_15675;
                float zp_res_15681 = zt_res_15679 + zt_res_15680;
                float zp_res_15682 = defunc_0_f_res_15664 + zm_res_15678;
                float zp_res_15683 = defunc_0_f_res_15665 + zp_res_15681;
                float zm_res_15684 = defunc_0_f_res_15664 - zm_res_15678;
                float zm_res_15685 = defunc_0_f_res_15665 - zp_res_15681;
                int32_t x_15686 = sdiv32(x_15654, ns_15639);
                int32_t x_15687 = mul32(ns_15639, x_15686);
                int32_t x_15688 = mul32(2, x_15687);
                int32_t idxD_15689 = add32(i32_arg_15655, x_15688);
                int64_t i32_res_15690 = sext_i32_i64(idxD_15689);
                int32_t i32_arg_15691 = add32(ns_15639, idxD_15689);
                int64_t i32_res_15692 = sext_i32_i64(i32_arg_15691);
                
                ((int64_t *) mem_19839)[i_16811] = i32_res_15690;
                ((float *) mem_19842)[i_16811] = zp_res_15682;
                ((float *) mem_19845)[i_16811] = zp_res_15683;
                ((int64_t *) mem_19848)[i_16811] = i32_res_15692;
                ((float *) mem_19851)[i_16811] = zm_res_15684;
                ((float *) mem_19854)[i_16811] = zm_res_15685;
            }
            for (int64_t write_iter_16818 = 0; write_iter_16818 <
                 iota_arg_14817; write_iter_16818++) {
                int64_t write_iv_16821;
                
                write_iv_16821 = ((int64_t *) mem_19839)[write_iter_16818];
                
                int64_t write_iv_16824;
                
                write_iv_16824 = ((int64_t *) mem_19848)[write_iter_16818];
                if (sle64((int64_t) 0, write_iv_16821) && slt64(write_iv_16821,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19808.mem + (ctx_param_ext_19805 +
                                                       ctx_param_ext_19806 *
                                                       write_iv_16821) *
                                (int64_t) 4, mem_19842 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16824) && slt64(write_iv_16824,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19808.mem + (ctx_param_ext_19805 +
                                                       ctx_param_ext_19806 *
                                                       write_iv_16824) *
                                (int64_t) 4, mem_19851 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16821) && slt64(write_iv_16821,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19813.mem + (ctx_param_ext_19810 +
                                                       ctx_param_ext_19811 *
                                                       write_iv_16821) *
                                (int64_t) 4, mem_19845 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16824) && slt64(write_iv_16824,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19813.mem + (ctx_param_ext_19810 +
                                                       ctx_param_ext_19811 *
                                                       write_iv_16824) *
                                (int64_t) 4, mem_19854 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21237 = ctx_param_ext_19804;
            int64_t ctx_param_ext_tmp_21238 = ctx_param_ext_19805;
            int64_t ctx_param_ext_tmp_21239 = ctx_param_ext_19806;
            int64_t ctx_param_ext_tmp_21240 = ctx_param_ext_19807;
            int64_t ctx_param_ext_tmp_21241 = ctx_param_ext_19809;
            int64_t ctx_param_ext_tmp_21242 = ctx_param_ext_19810;
            int64_t ctx_param_ext_tmp_21243 = ctx_param_ext_19811;
            int64_t ctx_param_ext_tmp_21244 = ctx_param_ext_19812;
            int64_t ctx_param_ext_tmp_21245 = ctx_param_ext_19794;
            int64_t ctx_param_ext_tmp_21246 = ctx_param_ext_19795;
            int64_t ctx_param_ext_tmp_21247 = ctx_param_ext_19796;
            int64_t ctx_param_ext_tmp_21248 = ctx_param_ext_19797;
            int64_t ctx_param_ext_tmp_21249 = ctx_param_ext_19799;
            int64_t ctx_param_ext_tmp_21250 = ctx_param_ext_19800;
            int64_t ctx_param_ext_tmp_21251 = ctx_param_ext_19801;
            int64_t ctx_param_ext_tmp_21252 = ctx_param_ext_19802;
            
            if (memblock_set(ctx, &mem_param_tmp_21253, &mem_param_19808,
                             "mem_param_19808") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21254, &mem_param_19813,
                             "mem_param_19813") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21255, &mem_param_19798,
                             "mem_param_19798") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21256, &mem_param_19803,
                             "mem_param_19803") != 0)
                return 1;
            ctx_param_ext_19794 = ctx_param_ext_tmp_21237;
            ctx_param_ext_19795 = ctx_param_ext_tmp_21238;
            ctx_param_ext_19796 = ctx_param_ext_tmp_21239;
            ctx_param_ext_19797 = ctx_param_ext_tmp_21240;
            ctx_param_ext_19799 = ctx_param_ext_tmp_21241;
            ctx_param_ext_19800 = ctx_param_ext_tmp_21242;
            ctx_param_ext_19801 = ctx_param_ext_tmp_21243;
            ctx_param_ext_19802 = ctx_param_ext_tmp_21244;
            ctx_param_ext_19804 = ctx_param_ext_tmp_21245;
            ctx_param_ext_19805 = ctx_param_ext_tmp_21246;
            ctx_param_ext_19806 = ctx_param_ext_tmp_21247;
            ctx_param_ext_19807 = ctx_param_ext_tmp_21248;
            ctx_param_ext_19809 = ctx_param_ext_tmp_21249;
            ctx_param_ext_19810 = ctx_param_ext_tmp_21250;
            ctx_param_ext_19811 = ctx_param_ext_tmp_21251;
            ctx_param_ext_19812 = ctx_param_ext_tmp_21252;
            if (memblock_set(ctx, &mem_param_19798, &mem_param_tmp_21253,
                             "mem_param_tmp_21253") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19803, &mem_param_tmp_21254,
                             "mem_param_tmp_21254") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19808, &mem_param_tmp_21255,
                             "mem_param_tmp_21255") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19813, &mem_param_tmp_21256,
                             "mem_param_tmp_21256") != 0)
                return 1;
        }
        ext_19966 = ctx_param_ext_19794;
        ext_19965 = ctx_param_ext_19795;
        ext_19964 = ctx_param_ext_19796;
        ext_19963 = ctx_param_ext_19797;
        ext_19962 = ctx_param_ext_19799;
        ext_19961 = ctx_param_ext_19800;
        ext_19960 = ctx_param_ext_19801;
        ext_19959 = ctx_param_ext_19802;
        ext_19958 = ctx_param_ext_19804;
        ext_19957 = ctx_param_ext_19805;
        ext_19956 = ctx_param_ext_19806;
        ext_19955 = ctx_param_ext_19807;
        ext_19954 = ctx_param_ext_19809;
        ext_19953 = ctx_param_ext_19810;
        ext_19952 = ctx_param_ext_19811;
        ext_19951 = ctx_param_ext_19812;
        if (memblock_set(ctx, &ext_mem_19950, &mem_param_19798,
                         "mem_param_19798") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19949, &mem_param_19803,
                         "mem_param_19803") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19948, &mem_param_19808,
                         "mem_param_19808") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19947, &mem_param_19813,
                         "mem_param_19813") != 0)
            return 1;
        for (int64_t i_21270 = 0; i_21270 < n_11475; i_21270++) {
            float tmp_21271;
            
            tmp_21271 = ((float *) mem_18734)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21270 * m_11476];
            ((float *) mem_19969.mem)[i_21270] = tmp_21271;
        }
        for (int64_t i_21272 = 0; i_21272 < n_11475; i_21272++) {
            float tmp_21273;
            
            tmp_21273 = ((float *) mem_18738)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21272 * m_11476];
            ((float *) mem_19972.mem)[i_21272] = tmp_21273;
        }
        
        int64_t ext_20145;
        int64_t ext_20144;
        int64_t ext_20143;
        int64_t ext_20142;
        int64_t ext_20141;
        int64_t ext_20140;
        int64_t ext_20139;
        int64_t ext_20138;
        int64_t ext_20137;
        int64_t ext_20136;
        int64_t ext_20135;
        int64_t ext_20134;
        int64_t ext_20133;
        int64_t ext_20132;
        int64_t ext_20131;
        int64_t ext_20130;
        int64_t ctx_param_ext_19973;
        int64_t ctx_param_ext_19974;
        int64_t ctx_param_ext_19975;
        int64_t ctx_param_ext_19976;
        int64_t ctx_param_ext_19978;
        int64_t ctx_param_ext_19979;
        int64_t ctx_param_ext_19980;
        int64_t ctx_param_ext_19981;
        int64_t ctx_param_ext_19983;
        int64_t ctx_param_ext_19984;
        int64_t ctx_param_ext_19985;
        int64_t ctx_param_ext_19986;
        int64_t ctx_param_ext_19988;
        int64_t ctx_param_ext_19989;
        int64_t ctx_param_ext_19990;
        int64_t ctx_param_ext_19991;
        
        ctx_param_ext_19973 = n_11475;
        ctx_param_ext_19974 = (int64_t) 0;
        ctx_param_ext_19975 = (int64_t) 1;
        ctx_param_ext_19976 = n_11475;
        ctx_param_ext_19978 = n_11475;
        ctx_param_ext_19979 = (int64_t) 0;
        ctx_param_ext_19980 = (int64_t) 1;
        ctx_param_ext_19981 = n_11475;
        ctx_param_ext_19983 = n_11475;
        ctx_param_ext_19984 = (int64_t) 0;
        ctx_param_ext_19985 = (int64_t) 1;
        ctx_param_ext_19986 = n_11475;
        ctx_param_ext_19988 = n_11475;
        ctx_param_ext_19989 = (int64_t) 0;
        ctx_param_ext_19990 = (int64_t) 1;
        ctx_param_ext_19991 = n_11475;
        if (memblock_set(ctx, &mem_param_19977, &mem_19605, "mem_19605") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19982, &mem_19608, "mem_19608") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19987, &mem_19969, "mem_19969") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19992, &mem_19972, "mem_19972") != 0)
            return 1;
        
        int32_t ns_16175;
        
        for (int64_t i_16170 = 0; i_16170 < i32_res_16142; i_16170++) {
            ns_16175 = ((int32_t *) mem_19479)[i_16170];
            for (int64_t i_16833 = 0; i_16833 < iota_arg_14817; i_16833++) {
                int32_t defunc_0_f_res_16178 = sext_i64_i32(i_16833);
                
                ((int32_t *) mem_20003)[i_16833] = defunc_0_f_res_16178;
            }
            
            int32_t i32_arg_16179 = mul32(2, ns_16175);
            float i32_res_16180 = sitofp_i32_f32(i32_arg_16179);
            bool zzero_16181 = ns_16175 == 0;
            bool nonzzero_16182 = !zzero_16181;
            bool nonzzero_cert_16183;
            
            if (!nonzzero_16182) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16847 = 0; i_16847 < iota_arg_14817; i_16847++) {
                int32_t x_16190;
                
                x_16190 = ((int32_t *) mem_20003)[i_16847];
                
                int32_t i32_arg_16191 = smod32(x_16190, ns_16175);
                float i32_res_16192 = sitofp_i32_f32(i32_arg_16191);
                float zt_res_16193 = 6.2831855F * i32_res_16192;
                float zs_res_16194 = zt_res_16193 / i32_res_16180;
                int64_t j_16195 = sext_i32_i64(x_16190);
                bool x_16196 = sle64((int64_t) 0, j_16195);
                bool y_16197 = slt64(j_16195, n_11475);
                bool bounds_check_16198 = x_16196 && y_16197;
                bool index_certs_16199;
                
                if (!bounds_check_16198) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_16195,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_16200;
                
                defunc_0_f_res_16200 =
                    ((float *) mem_param_19977.mem)[ctx_param_ext_19974 +
                                                    j_16195 *
                                                    ctx_param_ext_19975];
                
                float defunc_0_f_res_16201;
                
                defunc_0_f_res_16201 =
                    ((float *) mem_param_19982.mem)[ctx_param_ext_19979 +
                                                    j_16195 *
                                                    ctx_param_ext_19980];
                
                float sin_res_16202;
                
                sin_res_16202 = futrts_sin32(zs_res_16194);
                
                float cos_res_16203;
                
                cos_res_16203 = futrts_cos32(zs_res_16194);
                
                int32_t i_16204 = add32(y_14836, x_16190);
                int64_t i_16205 = sext_i32_i64(i_16204);
                bool x_16206 = sle64((int64_t) 0, i_16205);
                bool y_16207 = slt64(i_16205, n_11475);
                bool bounds_check_16208 = x_16206 && y_16207;
                bool index_certs_16209;
                
                if (!bounds_check_16208) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_16205,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11475, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:70:25-39\n   #8  sample_programs/fft.fut:69:1-71:71\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_16210;
                
                zt_arg_16210 =
                    ((float *) mem_param_19977.mem)[ctx_param_ext_19974 +
                                                    i_16205 *
                                                    ctx_param_ext_19975];
                
                float zt_arg_16211;
                
                zt_arg_16211 =
                    ((float *) mem_param_19982.mem)[ctx_param_ext_19979 +
                                                    i_16205 *
                                                    ctx_param_ext_19980];
                
                float zt_res_16212 = sin_res_16202 * zt_arg_16211;
                float zt_res_16213 = cos_res_16203 * zt_arg_16210;
                float zm_res_16214 = zt_res_16213 - zt_res_16212;
                float zt_res_16215 = sin_res_16202 * zt_arg_16210;
                float zt_res_16216 = cos_res_16203 * zt_arg_16211;
                float zp_res_16217 = zt_res_16215 + zt_res_16216;
                float zp_res_16218 = defunc_0_f_res_16200 + zm_res_16214;
                float zp_res_16219 = defunc_0_f_res_16201 + zp_res_16217;
                float zm_res_16220 = defunc_0_f_res_16200 - zm_res_16214;
                float zm_res_16221 = defunc_0_f_res_16201 - zp_res_16217;
                int32_t x_16222 = sdiv32(x_16190, ns_16175);
                int32_t x_16223 = mul32(ns_16175, x_16222);
                int32_t x_16224 = mul32(2, x_16223);
                int32_t idxD_16225 = add32(i32_arg_16191, x_16224);
                int64_t i32_res_16226 = sext_i32_i64(idxD_16225);
                int32_t i32_arg_16227 = add32(ns_16175, idxD_16225);
                int64_t i32_res_16228 = sext_i32_i64(i32_arg_16227);
                
                ((int64_t *) mem_20018)[i_16847] = i32_res_16226;
                ((float *) mem_20021)[i_16847] = zp_res_16218;
                ((float *) mem_20024)[i_16847] = zp_res_16219;
                ((int64_t *) mem_20027)[i_16847] = i32_res_16228;
                ((float *) mem_20030)[i_16847] = zm_res_16220;
                ((float *) mem_20033)[i_16847] = zm_res_16221;
            }
            for (int64_t write_iter_16854 = 0; write_iter_16854 <
                 iota_arg_14817; write_iter_16854++) {
                int64_t write_iv_16857;
                
                write_iv_16857 = ((int64_t *) mem_20018)[write_iter_16854];
                
                int64_t write_iv_16860;
                
                write_iv_16860 = ((int64_t *) mem_20027)[write_iter_16854];
                if (sle64((int64_t) 0, write_iv_16857) && slt64(write_iv_16857,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19987.mem + (ctx_param_ext_19984 +
                                                       ctx_param_ext_19985 *
                                                       write_iv_16857) *
                                (int64_t) 4, mem_20021 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16860) && slt64(write_iv_16860,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19987.mem + (ctx_param_ext_19984 +
                                                       ctx_param_ext_19985 *
                                                       write_iv_16860) *
                                (int64_t) 4, mem_20030 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16857) && slt64(write_iv_16857,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19992.mem + (ctx_param_ext_19989 +
                                                       ctx_param_ext_19990 *
                                                       write_iv_16857) *
                                (int64_t) 4, mem_20024 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16860) && slt64(write_iv_16860,
                                                                n_11475)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19992.mem + (ctx_param_ext_19989 +
                                                       ctx_param_ext_19990 *
                                                       write_iv_16860) *
                                (int64_t) 4, mem_20033 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21274 = ctx_param_ext_19983;
            int64_t ctx_param_ext_tmp_21275 = ctx_param_ext_19984;
            int64_t ctx_param_ext_tmp_21276 = ctx_param_ext_19985;
            int64_t ctx_param_ext_tmp_21277 = ctx_param_ext_19986;
            int64_t ctx_param_ext_tmp_21278 = ctx_param_ext_19988;
            int64_t ctx_param_ext_tmp_21279 = ctx_param_ext_19989;
            int64_t ctx_param_ext_tmp_21280 = ctx_param_ext_19990;
            int64_t ctx_param_ext_tmp_21281 = ctx_param_ext_19991;
            int64_t ctx_param_ext_tmp_21282 = ctx_param_ext_19973;
            int64_t ctx_param_ext_tmp_21283 = ctx_param_ext_19974;
            int64_t ctx_param_ext_tmp_21284 = ctx_param_ext_19975;
            int64_t ctx_param_ext_tmp_21285 = ctx_param_ext_19976;
            int64_t ctx_param_ext_tmp_21286 = ctx_param_ext_19978;
            int64_t ctx_param_ext_tmp_21287 = ctx_param_ext_19979;
            int64_t ctx_param_ext_tmp_21288 = ctx_param_ext_19980;
            int64_t ctx_param_ext_tmp_21289 = ctx_param_ext_19981;
            
            if (memblock_set(ctx, &mem_param_tmp_21290, &mem_param_19987,
                             "mem_param_19987") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21291, &mem_param_19992,
                             "mem_param_19992") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21292, &mem_param_19977,
                             "mem_param_19977") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21293, &mem_param_19982,
                             "mem_param_19982") != 0)
                return 1;
            ctx_param_ext_19973 = ctx_param_ext_tmp_21274;
            ctx_param_ext_19974 = ctx_param_ext_tmp_21275;
            ctx_param_ext_19975 = ctx_param_ext_tmp_21276;
            ctx_param_ext_19976 = ctx_param_ext_tmp_21277;
            ctx_param_ext_19978 = ctx_param_ext_tmp_21278;
            ctx_param_ext_19979 = ctx_param_ext_tmp_21279;
            ctx_param_ext_19980 = ctx_param_ext_tmp_21280;
            ctx_param_ext_19981 = ctx_param_ext_tmp_21281;
            ctx_param_ext_19983 = ctx_param_ext_tmp_21282;
            ctx_param_ext_19984 = ctx_param_ext_tmp_21283;
            ctx_param_ext_19985 = ctx_param_ext_tmp_21284;
            ctx_param_ext_19986 = ctx_param_ext_tmp_21285;
            ctx_param_ext_19988 = ctx_param_ext_tmp_21286;
            ctx_param_ext_19989 = ctx_param_ext_tmp_21287;
            ctx_param_ext_19990 = ctx_param_ext_tmp_21288;
            ctx_param_ext_19991 = ctx_param_ext_tmp_21289;
            if (memblock_set(ctx, &mem_param_19977, &mem_param_tmp_21290,
                             "mem_param_tmp_21290") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19982, &mem_param_tmp_21291,
                             "mem_param_tmp_21291") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19987, &mem_param_tmp_21292,
                             "mem_param_tmp_21292") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19992, &mem_param_tmp_21293,
                             "mem_param_tmp_21293") != 0)
                return 1;
        }
        ext_20145 = ctx_param_ext_19973;
        ext_20144 = ctx_param_ext_19974;
        ext_20143 = ctx_param_ext_19975;
        ext_20142 = ctx_param_ext_19976;
        ext_20141 = ctx_param_ext_19978;
        ext_20140 = ctx_param_ext_19979;
        ext_20139 = ctx_param_ext_19980;
        ext_20138 = ctx_param_ext_19981;
        ext_20137 = ctx_param_ext_19983;
        ext_20136 = ctx_param_ext_19984;
        ext_20135 = ctx_param_ext_19985;
        ext_20134 = ctx_param_ext_19986;
        ext_20133 = ctx_param_ext_19988;
        ext_20132 = ctx_param_ext_19989;
        ext_20131 = ctx_param_ext_19990;
        ext_20130 = ctx_param_ext_19991;
        if (memblock_set(ctx, &ext_mem_20129, &mem_param_19977,
                         "mem_param_19977") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20128, &mem_param_19982,
                         "mem_param_19982") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20127, &mem_param_19987,
                         "mem_param_19987") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20126, &mem_param_19992,
                         "mem_param_19992") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19510 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_19771.mem + ext_19786 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19771, "ext_mem_19771") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19514 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_19770.mem + ext_19782 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19770, "ext_mem_19770") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19518 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_19950.mem + ext_19965 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19950, "ext_mem_19950") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19522 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_19949.mem + ext_19961 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19949, "ext_mem_19949") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19526 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_20129.mem + ext_20144 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_20129, "ext_mem_20129") != 0)
            return 1;
        if (n_11475 * (int64_t) 4 > 0)
            memmove(mem_19530 + i_16879 * n_11475 * (int64_t) 4,
                    ext_mem_20128.mem + ext_20140 * (int64_t) 4, n_11475 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_20128, "ext_mem_20128") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_19593, "mem_19593") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19596, "mem_19596") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19599, "mem_19599") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19602, "mem_19602") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19605, "mem_19605") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19608, "mem_19608") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19611, "mem_19611") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19614, "mem_19614") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19790, "mem_19790") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19793, "mem_19793") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19969, "mem_19969") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19972, "mem_19972") != 0)
        return 1;
    
    float zt_res_15167 = i64_res_14952 * i64_res_14952;
    int64_t binop_y_20195 = (int64_t) 3 * binop_x_17134;
    int64_t bytes_20196 = smax64((int64_t) 0, binop_y_20195);
    
    if (mem_20197_cached_sizze_21450 < bytes_20196) {
        err = lexical_realloc(&ctx->error, &mem_20197,
                              &mem_20197_cached_sizze_21450, bytes_20196);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t ctx_val_20211 = (int64_t) 3 * m_11476;
    
    if (mem_20217_cached_sizze_21451 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20217,
                              &mem_20217_cached_sizze_21451, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20220_cached_sizze_21452 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20220,
                              &mem_20220_cached_sizze_21452, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20247_cached_sizze_21453 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20247,
                              &mem_20247_cached_sizze_21453, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20262_cached_sizze_21454 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20262,
                              &mem_20262_cached_sizze_21454, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20265_cached_sizze_21455 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20265,
                              &mem_20265_cached_sizze_21455, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20292_cached_sizze_21456 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20292,
                              &mem_20292_cached_sizze_21456, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20307_cached_sizze_21457 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20307,
                              &mem_20307_cached_sizze_21457, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20310_cached_sizze_21458 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20310,
                              &mem_20310_cached_sizze_21458, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20337_cached_sizze_21459 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20337,
                              &mem_20337_cached_sizze_21459, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20365_cached_sizze_21460 < (int64_t) 3) {
        err = lexical_realloc(&ctx->error, &mem_20365,
                              &mem_20365_cached_sizze_21460, (int64_t) 3);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16931 = 0; i_16931 < n_11475; i_16931++) {
        for (int64_t i_16896 = 0; i_16896 < m_11476; i_16896++) {
            float x_16246;
            
            x_16246 = ((float *) mem_19526)[i_16896 * n_11475 + i_16931];
            
            float x_16247;
            
            x_16247 = ((float *) mem_19530)[i_16896 * n_11475 + i_16931];
            
            float zt_res_16248 = i64_res_14952 * x_16246;
            float zs_res_16249 = zt_res_16248 / zt_res_15167;
            float zt_res_16250 = i64_res_14952 * x_16247;
            float zs_res_16251 = zt_res_16250 / zt_res_15167;
            
            ((float *) mem_20217)[i_16896] = zs_res_16249;
            ((float *) mem_20220)[i_16896] = zs_res_16251;
        }
        for (int64_t i_16901 = 0; i_16901 < m_11476; i_16901++) {
            float x_16256;
            
            x_16256 = ((float *) mem_20217)[i_16901];
            
            float x_16257;
            
            x_16257 = ((float *) mem_20220)[i_16901];
            
            float zt_res_16258 = x_16257 * x_16257;
            float zt_res_16259 = x_16256 * x_16256;
            float zp_res_16260 = zt_res_16258 + zt_res_16259;
            float sqrt_res_16261;
            
            sqrt_res_16261 = futrts_sqrt32(zp_res_16260);
            ((float *) mem_20247)[i_16901] = sqrt_res_16261;
        }
        for (int64_t i_16907 = 0; i_16907 < m_11476; i_16907++) {
            float x_15710;
            
            x_15710 = ((float *) mem_19518)[i_16907 * n_11475 + i_16931];
            
            float x_15711;
            
            x_15711 = ((float *) mem_19522)[i_16907 * n_11475 + i_16931];
            
            float zt_res_15712 = i64_res_14952 * x_15710;
            float zs_res_15713 = zt_res_15712 / zt_res_15167;
            float zt_res_15714 = i64_res_14952 * x_15711;
            float zs_res_15715 = zt_res_15714 / zt_res_15167;
            
            ((float *) mem_20262)[i_16907] = zs_res_15713;
            ((float *) mem_20265)[i_16907] = zs_res_15715;
        }
        for (int64_t i_16912 = 0; i_16912 < m_11476; i_16912++) {
            float x_15720;
            
            x_15720 = ((float *) mem_20262)[i_16912];
            
            float x_15721;
            
            x_15721 = ((float *) mem_20265)[i_16912];
            
            float zt_res_15722 = x_15721 * x_15721;
            float zt_res_15723 = x_15720 * x_15720;
            float zp_res_15724 = zt_res_15722 + zt_res_15723;
            float sqrt_res_15725;
            
            sqrt_res_15725 = futrts_sqrt32(zp_res_15724);
            ((float *) mem_20292)[i_16912] = sqrt_res_15725;
        }
        for (int64_t i_16918 = 0; i_16918 < m_11476; i_16918++) {
            float x_15174;
            
            x_15174 = ((float *) mem_19510)[i_16918 * n_11475 + i_16931];
            
            float x_15175;
            
            x_15175 = ((float *) mem_19514)[i_16918 * n_11475 + i_16931];
            
            float zt_res_15176 = i64_res_14952 * x_15174;
            float zs_res_15177 = zt_res_15176 / zt_res_15167;
            float zt_res_15178 = i64_res_14952 * x_15175;
            float zs_res_15179 = zt_res_15178 / zt_res_15167;
            
            ((float *) mem_20307)[i_16918] = zs_res_15177;
            ((float *) mem_20310)[i_16918] = zs_res_15179;
        }
        for (int64_t i_16923 = 0; i_16923 < m_11476; i_16923++) {
            float x_15184;
            
            x_15184 = ((float *) mem_20307)[i_16923];
            
            float x_15185;
            
            x_15185 = ((float *) mem_20310)[i_16923];
            
            float zt_res_15186 = x_15185 * x_15185;
            float zt_res_15187 = x_15184 * x_15184;
            float zp_res_15188 = zt_res_15186 + zt_res_15187;
            float sqrt_res_15189;
            
            sqrt_res_15189 = futrts_sqrt32(zp_res_15188);
            ((float *) mem_20337)[i_16923] = sqrt_res_15189;
        }
        for (int64_t i_16927 = 0; i_16927 < m_11476; i_16927++) {
            float x_11968;
            
            x_11968 = ((float *) mem_20337)[i_16927];
            
            float x_11969;
            
            x_11969 = ((float *) mem_20292)[i_16927];
            
            float x_11970;
            
            x_11970 = ((float *) mem_20247)[i_16927];
            
            int8_t unsign_arg_12230 = fptoui_f32_i8(x_11968);
            int8_t unsign_arg_12232 = fptoui_f32_i8(x_11969);
            int8_t unsign_arg_12234 = fptoui_f32_i8(x_11970);
            
            ((int8_t *) mem_20365)[(int64_t) 0] = unsign_arg_12230;
            ((int8_t *) mem_20365)[(int64_t) 1] = unsign_arg_12232;
            ((int8_t *) mem_20365)[(int64_t) 2] = unsign_arg_12234;
            if ((int64_t) 3 > 0)
                memmove(mem_20197 + (i_16931 * ctx_val_20211 + i_16927 *
                                     (int64_t) 3), mem_20365 + (int64_t) 0,
                        (int64_t) 3);
        }
    }
    if (memblock_alloc(ctx, &mem_20397, bytes_20196, "mem_20397")) {
        err = 1;
        goto cleanup;
    }
    if (n_11475 * m_11476 * (int64_t) 3 > 0)
        memmove(mem_20397.mem + (int64_t) 0, mem_20197 + (int64_t) 0, n_11475 *
                m_11476 * (int64_t) 3);
    if (memblock_set(ctx, &mem_out_20773, &mem_20397, "mem_20397") != 0)
        return 1;
    (*mem_out_p_21321).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_21321, &mem_out_20773, "mem_out_20773") !=
        0)
        return 1;
    
  cleanup:
    {
        free(mem_17073);
        free(mem_17088);
        free(mem_17103);
        free(mem_17118);
        free(mem_17133);
        free(mem_17137);
        free(mem_17141);
        free(mem_17145);
        free(mem_17149);
        free(mem_17153);
        free(mem_17157);
        free(mem_17228);
        free(mem_17230);
        free(mem_17232);
        free(mem_17271);
        free(mem_17286);
        free(mem_17301);
        free(mem_17393);
        free(mem_17408);
        free(mem_17411);
        free(mem_17414);
        free(mem_17417);
        free(mem_17420);
        free(mem_17423);
        free(mem_17570);
        free(mem_17585);
        free(mem_17588);
        free(mem_17591);
        free(mem_17594);
        free(mem_17597);
        free(mem_17600);
        free(mem_17747);
        free(mem_17762);
        free(mem_17765);
        free(mem_17768);
        free(mem_17771);
        free(mem_17774);
        free(mem_17777);
        free(mem_17940);
        free(mem_17955);
        free(mem_17970);
        free(mem_17986);
        free(mem_17990);
        free(mem_17994);
        free(mem_17998);
        free(mem_18002);
        free(mem_18006);
        free(mem_18121);
        free(mem_18136);
        free(mem_18139);
        free(mem_18142);
        free(mem_18145);
        free(mem_18148);
        free(mem_18151);
        free(mem_18300);
        free(mem_18315);
        free(mem_18318);
        free(mem_18321);
        free(mem_18324);
        free(mem_18327);
        free(mem_18330);
        free(mem_18479);
        free(mem_18494);
        free(mem_18497);
        free(mem_18500);
        free(mem_18503);
        free(mem_18506);
        free(mem_18509);
        free(mem_18672);
        free(mem_18687);
        free(mem_18702);
        free(mem_18718);
        free(mem_18722);
        free(mem_18726);
        free(mem_18730);
        free(mem_18734);
        free(mem_18738);
        free(mem_18861);
        free(mem_18876);
        free(mem_18879);
        free(mem_18882);
        free(mem_18885);
        free(mem_18888);
        free(mem_18891);
        free(mem_19066);
        free(mem_19081);
        free(mem_19084);
        free(mem_19087);
        free(mem_19090);
        free(mem_19093);
        free(mem_19096);
        free(mem_19271);
        free(mem_19286);
        free(mem_19289);
        free(mem_19292);
        free(mem_19295);
        free(mem_19298);
        free(mem_19301);
        free(mem_19464);
        free(mem_19479);
        free(mem_19494);
        free(mem_19510);
        free(mem_19514);
        free(mem_19518);
        free(mem_19522);
        free(mem_19526);
        free(mem_19530);
        free(mem_19645);
        free(mem_19660);
        free(mem_19663);
        free(mem_19666);
        free(mem_19669);
        free(mem_19672);
        free(mem_19675);
        free(mem_19824);
        free(mem_19839);
        free(mem_19842);
        free(mem_19845);
        free(mem_19848);
        free(mem_19851);
        free(mem_19854);
        free(mem_20003);
        free(mem_20018);
        free(mem_20021);
        free(mem_20024);
        free(mem_20027);
        free(mem_20030);
        free(mem_20033);
        free(mem_20197);
        free(mem_20217);
        free(mem_20220);
        free(mem_20247);
        free(mem_20262);
        free(mem_20265);
        free(mem_20292);
        free(mem_20307);
        free(mem_20310);
        free(mem_20337);
        free(mem_20365);
        if (memblock_unref(ctx, &mem_20397, "mem_20397") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21293, "mem_param_tmp_21293") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21292, "mem_param_tmp_21292") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21291, "mem_param_tmp_21291") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21290, "mem_param_tmp_21290") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19992, "mem_param_19992") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19987, "mem_param_19987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19982, "mem_param_19982") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19977, "mem_param_19977") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20126, "ext_mem_20126") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20127, "ext_mem_20127") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20128, "ext_mem_20128") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20129, "ext_mem_20129") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21256, "mem_param_tmp_21256") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21255, "mem_param_tmp_21255") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21254, "mem_param_tmp_21254") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21253, "mem_param_tmp_21253") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19813, "mem_param_19813") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19808, "mem_param_19808") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19803, "mem_param_19803") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19798, "mem_param_19798") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19947, "ext_mem_19947") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19948, "ext_mem_19948") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19949, "ext_mem_19949") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19950, "ext_mem_19950") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21219, "mem_param_tmp_21219") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21218, "mem_param_tmp_21218") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21217, "mem_param_tmp_21217") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21216, "mem_param_tmp_21216") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19634, "mem_param_19634") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19629, "mem_param_19629") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19624, "mem_param_19624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19619, "mem_param_19619") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19768, "ext_mem_19768") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19769, "ext_mem_19769") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19770, "ext_mem_19770") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19771, "ext_mem_19771") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19972, "mem_19972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19969, "mem_19969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19793, "mem_19793") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19790, "mem_19790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19614, "mem_19614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19611, "mem_19611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19608, "mem_19608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19605, "mem_19605") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19602, "mem_19602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19599, "mem_19599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19596, "mem_19596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19593, "mem_19593") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21152, "mem_param_tmp_21152") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21151, "mem_param_tmp_21151") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21150, "mem_param_tmp_21150") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21149, "mem_param_tmp_21149") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19264, "mem_param_19264") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19259, "mem_param_19259") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19254, "mem_param_19254") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19249, "mem_param_19249") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19394, "ext_mem_19394") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19395, "ext_mem_19395") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19396, "ext_mem_19396") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19397, "ext_mem_19397") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21117, "mem_param_tmp_21117") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21116, "mem_param_tmp_21116") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21115, "mem_param_tmp_21115") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21114, "mem_param_tmp_21114") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19059, "mem_param_19059") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19054, "mem_param_19054") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19049, "mem_param_19049") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19044, "mem_param_19044") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19189, "ext_mem_19189") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19190, "ext_mem_19190") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19191, "ext_mem_19191") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19192, "ext_mem_19192") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21082, "mem_param_tmp_21082") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21081, "mem_param_tmp_21081") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21080, "mem_param_tmp_21080") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21079, "mem_param_tmp_21079") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18854, "mem_param_18854") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18849, "mem_param_18849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18844, "mem_param_18844") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18839, "mem_param_18839") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18984, "ext_mem_18984") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18985, "ext_mem_18985") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18986, "ext_mem_18986") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18987, "ext_mem_18987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19244, "mem_19244") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19241, "mem_19241") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19214, "mem_19214") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19211, "mem_19211") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19039, "mem_19039") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19036, "mem_19036") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19006, "mem_19006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18834, "mem_18834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18831, "mem_18831") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18804, "mem_18804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18801, "mem_18801") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21029, "mem_param_tmp_21029") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21028, "mem_param_tmp_21028") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21027, "mem_param_tmp_21027") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21026, "mem_param_tmp_21026") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18468, "mem_param_18468") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18463, "mem_param_18463") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18458, "mem_param_18458") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18453, "mem_param_18453") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18602, "ext_mem_18602") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18603, "ext_mem_18603") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18604, "ext_mem_18604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18605, "ext_mem_18605") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20992, "mem_param_tmp_20992") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20991, "mem_param_tmp_20991") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20990, "mem_param_tmp_20990") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20989, "mem_param_tmp_20989") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18289, "mem_param_18289") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18284, "mem_param_18284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18279, "mem_param_18279") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18274, "mem_param_18274") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18423, "ext_mem_18423") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18424, "ext_mem_18424") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18425, "ext_mem_18425") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18426, "ext_mem_18426") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20955, "mem_param_tmp_20955") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20954, "mem_param_tmp_20954") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20953, "mem_param_tmp_20953") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20952, "mem_param_tmp_20952") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18110, "mem_param_18110") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18105, "mem_param_18105") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18100, "mem_param_18100") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18095, "mem_param_18095") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18244, "ext_mem_18244") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18245, "ext_mem_18245") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18246, "ext_mem_18246") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18247, "ext_mem_18247") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18448, "mem_18448") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18445, "mem_18445") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18269, "mem_18269") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18266, "mem_18266") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18090, "mem_18090") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18087, "mem_18087") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18084, "mem_18084") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18081, "mem_18081") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18078, "mem_18078") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18075, "mem_18075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18072, "mem_18072") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18069, "mem_18069") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20888, "mem_param_tmp_20888") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20887, "mem_param_tmp_20887") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20886, "mem_param_tmp_20886") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20885, "mem_param_tmp_20885") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17738, "mem_param_17738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17733, "mem_param_17733") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17728, "mem_param_17728") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17723, "mem_param_17723") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17870, "ext_mem_17870") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17871, "ext_mem_17871") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17872, "ext_mem_17872") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17873, "ext_mem_17873") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20855, "mem_param_tmp_20855") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20854, "mem_param_tmp_20854") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20853, "mem_param_tmp_20853") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20852, "mem_param_tmp_20852") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17561, "mem_param_17561") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17556, "mem_param_17556") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17551, "mem_param_17551") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17546, "mem_param_17546") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17693, "ext_mem_17693") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17694, "ext_mem_17694") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17695, "ext_mem_17695") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17696, "ext_mem_17696") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20822, "mem_param_tmp_20822") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20821, "mem_param_tmp_20821") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20820, "mem_param_tmp_20820") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20819, "mem_param_tmp_20819") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17384, "mem_param_17384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17379, "mem_param_17379") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17374, "mem_param_17374") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17369, "mem_param_17369") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17516, "ext_mem_17516") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17517, "ext_mem_17517") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17518, "ext_mem_17518") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17519, "ext_mem_17519") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17718, "mem_17718") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17715, "mem_17715") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17541, "mem_17541") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17538, "mem_17538") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17364, "mem_17364") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17361, "mem_17361") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17346, "mem_17346") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17331, "mem_17331") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17316, "mem_17316") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17226, "mem_17226") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17223, "mem_17223") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17220, "mem_17220") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_20773, "mem_out_20773") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_21461,
                             struct memblock *mem_out_p_21462,
                             struct memblock *mem_out_p_21463,
                             struct memblock img_mem_17070, int64_t n_11006,
                             int64_t m_11007, int32_t cutoff_11008)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_17073_cached_sizze_21464 = 0;
    unsigned char *mem_17073 = NULL;
    size_t mem_17088_cached_sizze_21465 = 0;
    unsigned char *mem_17088 = NULL;
    size_t mem_17103_cached_sizze_21466 = 0;
    unsigned char *mem_17103 = NULL;
    size_t mem_17118_cached_sizze_21467 = 0;
    unsigned char *mem_17118 = NULL;
    size_t mem_17133_cached_sizze_21468 = 0;
    unsigned char *mem_17133 = NULL;
    size_t mem_17137_cached_sizze_21469 = 0;
    unsigned char *mem_17137 = NULL;
    size_t mem_17141_cached_sizze_21470 = 0;
    unsigned char *mem_17141 = NULL;
    size_t mem_17145_cached_sizze_21471 = 0;
    unsigned char *mem_17145 = NULL;
    size_t mem_17149_cached_sizze_21472 = 0;
    unsigned char *mem_17149 = NULL;
    size_t mem_17153_cached_sizze_21473 = 0;
    unsigned char *mem_17153 = NULL;
    size_t mem_17157_cached_sizze_21474 = 0;
    unsigned char *mem_17157 = NULL;
    size_t mem_17228_cached_sizze_21475 = 0;
    unsigned char *mem_17228 = NULL;
    size_t mem_17230_cached_sizze_21476 = 0;
    unsigned char *mem_17230 = NULL;
    size_t mem_17232_cached_sizze_21477 = 0;
    unsigned char *mem_17232 = NULL;
    size_t mem_17271_cached_sizze_21478 = 0;
    unsigned char *mem_17271 = NULL;
    size_t mem_17286_cached_sizze_21479 = 0;
    unsigned char *mem_17286 = NULL;
    size_t mem_17301_cached_sizze_21480 = 0;
    unsigned char *mem_17301 = NULL;
    size_t mem_17393_cached_sizze_21481 = 0;
    unsigned char *mem_17393 = NULL;
    size_t mem_17408_cached_sizze_21482 = 0;
    unsigned char *mem_17408 = NULL;
    size_t mem_17411_cached_sizze_21483 = 0;
    unsigned char *mem_17411 = NULL;
    size_t mem_17414_cached_sizze_21484 = 0;
    unsigned char *mem_17414 = NULL;
    size_t mem_17417_cached_sizze_21485 = 0;
    unsigned char *mem_17417 = NULL;
    size_t mem_17420_cached_sizze_21486 = 0;
    unsigned char *mem_17420 = NULL;
    size_t mem_17423_cached_sizze_21487 = 0;
    unsigned char *mem_17423 = NULL;
    size_t mem_17570_cached_sizze_21488 = 0;
    unsigned char *mem_17570 = NULL;
    size_t mem_17585_cached_sizze_21489 = 0;
    unsigned char *mem_17585 = NULL;
    size_t mem_17588_cached_sizze_21490 = 0;
    unsigned char *mem_17588 = NULL;
    size_t mem_17591_cached_sizze_21491 = 0;
    unsigned char *mem_17591 = NULL;
    size_t mem_17594_cached_sizze_21492 = 0;
    unsigned char *mem_17594 = NULL;
    size_t mem_17597_cached_sizze_21493 = 0;
    unsigned char *mem_17597 = NULL;
    size_t mem_17600_cached_sizze_21494 = 0;
    unsigned char *mem_17600 = NULL;
    size_t mem_17747_cached_sizze_21495 = 0;
    unsigned char *mem_17747 = NULL;
    size_t mem_17762_cached_sizze_21496 = 0;
    unsigned char *mem_17762 = NULL;
    size_t mem_17765_cached_sizze_21497 = 0;
    unsigned char *mem_17765 = NULL;
    size_t mem_17768_cached_sizze_21498 = 0;
    unsigned char *mem_17768 = NULL;
    size_t mem_17771_cached_sizze_21499 = 0;
    unsigned char *mem_17771 = NULL;
    size_t mem_17774_cached_sizze_21500 = 0;
    unsigned char *mem_17774 = NULL;
    size_t mem_17777_cached_sizze_21501 = 0;
    unsigned char *mem_17777 = NULL;
    size_t mem_17940_cached_sizze_21502 = 0;
    unsigned char *mem_17940 = NULL;
    size_t mem_17955_cached_sizze_21503 = 0;
    unsigned char *mem_17955 = NULL;
    size_t mem_17970_cached_sizze_21504 = 0;
    unsigned char *mem_17970 = NULL;
    size_t mem_17986_cached_sizze_21505 = 0;
    unsigned char *mem_17986 = NULL;
    size_t mem_17990_cached_sizze_21506 = 0;
    unsigned char *mem_17990 = NULL;
    size_t mem_17994_cached_sizze_21507 = 0;
    unsigned char *mem_17994 = NULL;
    size_t mem_17998_cached_sizze_21508 = 0;
    unsigned char *mem_17998 = NULL;
    size_t mem_18002_cached_sizze_21509 = 0;
    unsigned char *mem_18002 = NULL;
    size_t mem_18006_cached_sizze_21510 = 0;
    unsigned char *mem_18006 = NULL;
    size_t mem_18121_cached_sizze_21511 = 0;
    unsigned char *mem_18121 = NULL;
    size_t mem_18136_cached_sizze_21512 = 0;
    unsigned char *mem_18136 = NULL;
    size_t mem_18139_cached_sizze_21513 = 0;
    unsigned char *mem_18139 = NULL;
    size_t mem_18142_cached_sizze_21514 = 0;
    unsigned char *mem_18142 = NULL;
    size_t mem_18145_cached_sizze_21515 = 0;
    unsigned char *mem_18145 = NULL;
    size_t mem_18148_cached_sizze_21516 = 0;
    unsigned char *mem_18148 = NULL;
    size_t mem_18151_cached_sizze_21517 = 0;
    unsigned char *mem_18151 = NULL;
    size_t mem_18300_cached_sizze_21518 = 0;
    unsigned char *mem_18300 = NULL;
    size_t mem_18315_cached_sizze_21519 = 0;
    unsigned char *mem_18315 = NULL;
    size_t mem_18318_cached_sizze_21520 = 0;
    unsigned char *mem_18318 = NULL;
    size_t mem_18321_cached_sizze_21521 = 0;
    unsigned char *mem_18321 = NULL;
    size_t mem_18324_cached_sizze_21522 = 0;
    unsigned char *mem_18324 = NULL;
    size_t mem_18327_cached_sizze_21523 = 0;
    unsigned char *mem_18327 = NULL;
    size_t mem_18330_cached_sizze_21524 = 0;
    unsigned char *mem_18330 = NULL;
    size_t mem_18479_cached_sizze_21525 = 0;
    unsigned char *mem_18479 = NULL;
    size_t mem_18494_cached_sizze_21526 = 0;
    unsigned char *mem_18494 = NULL;
    size_t mem_18497_cached_sizze_21527 = 0;
    unsigned char *mem_18497 = NULL;
    size_t mem_18500_cached_sizze_21528 = 0;
    unsigned char *mem_18500 = NULL;
    size_t mem_18503_cached_sizze_21529 = 0;
    unsigned char *mem_18503 = NULL;
    size_t mem_18506_cached_sizze_21530 = 0;
    unsigned char *mem_18506 = NULL;
    size_t mem_18509_cached_sizze_21531 = 0;
    unsigned char *mem_18509 = NULL;
    size_t mem_18672_cached_sizze_21532 = 0;
    unsigned char *mem_18672 = NULL;
    size_t mem_18687_cached_sizze_21533 = 0;
    unsigned char *mem_18687 = NULL;
    size_t mem_18702_cached_sizze_21534 = 0;
    unsigned char *mem_18702 = NULL;
    size_t mem_18718_cached_sizze_21535 = 0;
    unsigned char *mem_18718 = NULL;
    size_t mem_18722_cached_sizze_21536 = 0;
    unsigned char *mem_18722 = NULL;
    size_t mem_18726_cached_sizze_21537 = 0;
    unsigned char *mem_18726 = NULL;
    size_t mem_18730_cached_sizze_21538 = 0;
    unsigned char *mem_18730 = NULL;
    size_t mem_18734_cached_sizze_21539 = 0;
    unsigned char *mem_18734 = NULL;
    size_t mem_18738_cached_sizze_21540 = 0;
    unsigned char *mem_18738 = NULL;
    size_t mem_18861_cached_sizze_21541 = 0;
    unsigned char *mem_18861 = NULL;
    size_t mem_18876_cached_sizze_21542 = 0;
    unsigned char *mem_18876 = NULL;
    size_t mem_18879_cached_sizze_21543 = 0;
    unsigned char *mem_18879 = NULL;
    size_t mem_18882_cached_sizze_21544 = 0;
    unsigned char *mem_18882 = NULL;
    size_t mem_18885_cached_sizze_21545 = 0;
    unsigned char *mem_18885 = NULL;
    size_t mem_18888_cached_sizze_21546 = 0;
    unsigned char *mem_18888 = NULL;
    size_t mem_18891_cached_sizze_21547 = 0;
    unsigned char *mem_18891 = NULL;
    size_t mem_19066_cached_sizze_21548 = 0;
    unsigned char *mem_19066 = NULL;
    size_t mem_19081_cached_sizze_21549 = 0;
    unsigned char *mem_19081 = NULL;
    size_t mem_19084_cached_sizze_21550 = 0;
    unsigned char *mem_19084 = NULL;
    size_t mem_19087_cached_sizze_21551 = 0;
    unsigned char *mem_19087 = NULL;
    size_t mem_19090_cached_sizze_21552 = 0;
    unsigned char *mem_19090 = NULL;
    size_t mem_19093_cached_sizze_21553 = 0;
    unsigned char *mem_19093 = NULL;
    size_t mem_19096_cached_sizze_21554 = 0;
    unsigned char *mem_19096 = NULL;
    size_t mem_19271_cached_sizze_21555 = 0;
    unsigned char *mem_19271 = NULL;
    size_t mem_19286_cached_sizze_21556 = 0;
    unsigned char *mem_19286 = NULL;
    size_t mem_19289_cached_sizze_21557 = 0;
    unsigned char *mem_19289 = NULL;
    size_t mem_19292_cached_sizze_21558 = 0;
    unsigned char *mem_19292 = NULL;
    size_t mem_19295_cached_sizze_21559 = 0;
    unsigned char *mem_19295 = NULL;
    size_t mem_19298_cached_sizze_21560 = 0;
    unsigned char *mem_19298 = NULL;
    size_t mem_19301_cached_sizze_21561 = 0;
    unsigned char *mem_19301 = NULL;
    size_t mem_19464_cached_sizze_21562 = 0;
    unsigned char *mem_19464 = NULL;
    size_t mem_19479_cached_sizze_21563 = 0;
    unsigned char *mem_19479 = NULL;
    size_t mem_19494_cached_sizze_21564 = 0;
    unsigned char *mem_19494 = NULL;
    size_t mem_19510_cached_sizze_21565 = 0;
    unsigned char *mem_19510 = NULL;
    size_t mem_19514_cached_sizze_21566 = 0;
    unsigned char *mem_19514 = NULL;
    size_t mem_19518_cached_sizze_21567 = 0;
    unsigned char *mem_19518 = NULL;
    size_t mem_19522_cached_sizze_21568 = 0;
    unsigned char *mem_19522 = NULL;
    size_t mem_19526_cached_sizze_21569 = 0;
    unsigned char *mem_19526 = NULL;
    size_t mem_19530_cached_sizze_21570 = 0;
    unsigned char *mem_19530 = NULL;
    size_t mem_19645_cached_sizze_21571 = 0;
    unsigned char *mem_19645 = NULL;
    size_t mem_19660_cached_sizze_21572 = 0;
    unsigned char *mem_19660 = NULL;
    size_t mem_19663_cached_sizze_21573 = 0;
    unsigned char *mem_19663 = NULL;
    size_t mem_19666_cached_sizze_21574 = 0;
    unsigned char *mem_19666 = NULL;
    size_t mem_19669_cached_sizze_21575 = 0;
    unsigned char *mem_19669 = NULL;
    size_t mem_19672_cached_sizze_21576 = 0;
    unsigned char *mem_19672 = NULL;
    size_t mem_19675_cached_sizze_21577 = 0;
    unsigned char *mem_19675 = NULL;
    size_t mem_19824_cached_sizze_21578 = 0;
    unsigned char *mem_19824 = NULL;
    size_t mem_19839_cached_sizze_21579 = 0;
    unsigned char *mem_19839 = NULL;
    size_t mem_19842_cached_sizze_21580 = 0;
    unsigned char *mem_19842 = NULL;
    size_t mem_19845_cached_sizze_21581 = 0;
    unsigned char *mem_19845 = NULL;
    size_t mem_19848_cached_sizze_21582 = 0;
    unsigned char *mem_19848 = NULL;
    size_t mem_19851_cached_sizze_21583 = 0;
    unsigned char *mem_19851 = NULL;
    size_t mem_19854_cached_sizze_21584 = 0;
    unsigned char *mem_19854 = NULL;
    size_t mem_20003_cached_sizze_21585 = 0;
    unsigned char *mem_20003 = NULL;
    size_t mem_20018_cached_sizze_21586 = 0;
    unsigned char *mem_20018 = NULL;
    size_t mem_20021_cached_sizze_21587 = 0;
    unsigned char *mem_20021 = NULL;
    size_t mem_20024_cached_sizze_21588 = 0;
    unsigned char *mem_20024 = NULL;
    size_t mem_20027_cached_sizze_21589 = 0;
    unsigned char *mem_20027 = NULL;
    size_t mem_20030_cached_sizze_21590 = 0;
    unsigned char *mem_20030 = NULL;
    size_t mem_20033_cached_sizze_21591 = 0;
    unsigned char *mem_20033 = NULL;
    size_t mem_20197_cached_sizze_21592 = 0;
    unsigned char *mem_20197 = NULL;
    size_t mem_20201_cached_sizze_21593 = 0;
    unsigned char *mem_20201 = NULL;
    size_t mem_20205_cached_sizze_21594 = 0;
    unsigned char *mem_20205 = NULL;
    size_t mem_20238_cached_sizze_21595 = 0;
    unsigned char *mem_20238 = NULL;
    size_t mem_20241_cached_sizze_21596 = 0;
    unsigned char *mem_20241 = NULL;
    size_t mem_20293_cached_sizze_21597 = 0;
    unsigned char *mem_20293 = NULL;
    size_t mem_20296_cached_sizze_21598 = 0;
    unsigned char *mem_20296 = NULL;
    size_t mem_20348_cached_sizze_21599 = 0;
    unsigned char *mem_20348 = NULL;
    size_t mem_20351_cached_sizze_21600 = 0;
    unsigned char *mem_20351 = NULL;
    struct memblock mem_20438;
    
    mem_20438.references = NULL;
    
    struct memblock mem_20433;
    
    mem_20433.references = NULL;
    
    struct memblock mem_20428;
    
    mem_20428.references = NULL;
    
    struct memblock mem_param_tmp_21295;
    
    mem_param_tmp_21295.references = NULL;
    
    struct memblock mem_param_tmp_21294;
    
    mem_param_tmp_21294.references = NULL;
    
    struct memblock mem_param_tmp_21293;
    
    mem_param_tmp_21293.references = NULL;
    
    struct memblock mem_param_tmp_21292;
    
    mem_param_tmp_21292.references = NULL;
    
    struct memblock mem_param_19992;
    
    mem_param_19992.references = NULL;
    
    struct memblock mem_param_19987;
    
    mem_param_19987.references = NULL;
    
    struct memblock mem_param_19982;
    
    mem_param_19982.references = NULL;
    
    struct memblock mem_param_19977;
    
    mem_param_19977.references = NULL;
    
    struct memblock ext_mem_20126;
    
    ext_mem_20126.references = NULL;
    
    struct memblock ext_mem_20127;
    
    ext_mem_20127.references = NULL;
    
    struct memblock ext_mem_20128;
    
    ext_mem_20128.references = NULL;
    
    struct memblock ext_mem_20129;
    
    ext_mem_20129.references = NULL;
    
    struct memblock mem_param_tmp_21258;
    
    mem_param_tmp_21258.references = NULL;
    
    struct memblock mem_param_tmp_21257;
    
    mem_param_tmp_21257.references = NULL;
    
    struct memblock mem_param_tmp_21256;
    
    mem_param_tmp_21256.references = NULL;
    
    struct memblock mem_param_tmp_21255;
    
    mem_param_tmp_21255.references = NULL;
    
    struct memblock mem_param_19813;
    
    mem_param_19813.references = NULL;
    
    struct memblock mem_param_19808;
    
    mem_param_19808.references = NULL;
    
    struct memblock mem_param_19803;
    
    mem_param_19803.references = NULL;
    
    struct memblock mem_param_19798;
    
    mem_param_19798.references = NULL;
    
    struct memblock ext_mem_19947;
    
    ext_mem_19947.references = NULL;
    
    struct memblock ext_mem_19948;
    
    ext_mem_19948.references = NULL;
    
    struct memblock ext_mem_19949;
    
    ext_mem_19949.references = NULL;
    
    struct memblock ext_mem_19950;
    
    ext_mem_19950.references = NULL;
    
    struct memblock mem_param_tmp_21221;
    
    mem_param_tmp_21221.references = NULL;
    
    struct memblock mem_param_tmp_21220;
    
    mem_param_tmp_21220.references = NULL;
    
    struct memblock mem_param_tmp_21219;
    
    mem_param_tmp_21219.references = NULL;
    
    struct memblock mem_param_tmp_21218;
    
    mem_param_tmp_21218.references = NULL;
    
    struct memblock mem_param_19634;
    
    mem_param_19634.references = NULL;
    
    struct memblock mem_param_19629;
    
    mem_param_19629.references = NULL;
    
    struct memblock mem_param_19624;
    
    mem_param_19624.references = NULL;
    
    struct memblock mem_param_19619;
    
    mem_param_19619.references = NULL;
    
    struct memblock ext_mem_19768;
    
    ext_mem_19768.references = NULL;
    
    struct memblock ext_mem_19769;
    
    ext_mem_19769.references = NULL;
    
    struct memblock ext_mem_19770;
    
    ext_mem_19770.references = NULL;
    
    struct memblock ext_mem_19771;
    
    ext_mem_19771.references = NULL;
    
    struct memblock mem_19972;
    
    mem_19972.references = NULL;
    
    struct memblock mem_19969;
    
    mem_19969.references = NULL;
    
    struct memblock mem_19793;
    
    mem_19793.references = NULL;
    
    struct memblock mem_19790;
    
    mem_19790.references = NULL;
    
    struct memblock mem_19614;
    
    mem_19614.references = NULL;
    
    struct memblock mem_19611;
    
    mem_19611.references = NULL;
    
    struct memblock mem_19608;
    
    mem_19608.references = NULL;
    
    struct memblock mem_19605;
    
    mem_19605.references = NULL;
    
    struct memblock mem_19602;
    
    mem_19602.references = NULL;
    
    struct memblock mem_19599;
    
    mem_19599.references = NULL;
    
    struct memblock mem_19596;
    
    mem_19596.references = NULL;
    
    struct memblock mem_19593;
    
    mem_19593.references = NULL;
    
    struct memblock mem_param_tmp_21154;
    
    mem_param_tmp_21154.references = NULL;
    
    struct memblock mem_param_tmp_21153;
    
    mem_param_tmp_21153.references = NULL;
    
    struct memblock mem_param_tmp_21152;
    
    mem_param_tmp_21152.references = NULL;
    
    struct memblock mem_param_tmp_21151;
    
    mem_param_tmp_21151.references = NULL;
    
    struct memblock mem_param_19264;
    
    mem_param_19264.references = NULL;
    
    struct memblock mem_param_19259;
    
    mem_param_19259.references = NULL;
    
    struct memblock mem_param_19254;
    
    mem_param_19254.references = NULL;
    
    struct memblock mem_param_19249;
    
    mem_param_19249.references = NULL;
    
    struct memblock ext_mem_19394;
    
    ext_mem_19394.references = NULL;
    
    struct memblock ext_mem_19395;
    
    ext_mem_19395.references = NULL;
    
    struct memblock ext_mem_19396;
    
    ext_mem_19396.references = NULL;
    
    struct memblock ext_mem_19397;
    
    ext_mem_19397.references = NULL;
    
    struct memblock mem_param_tmp_21119;
    
    mem_param_tmp_21119.references = NULL;
    
    struct memblock mem_param_tmp_21118;
    
    mem_param_tmp_21118.references = NULL;
    
    struct memblock mem_param_tmp_21117;
    
    mem_param_tmp_21117.references = NULL;
    
    struct memblock mem_param_tmp_21116;
    
    mem_param_tmp_21116.references = NULL;
    
    struct memblock mem_param_19059;
    
    mem_param_19059.references = NULL;
    
    struct memblock mem_param_19054;
    
    mem_param_19054.references = NULL;
    
    struct memblock mem_param_19049;
    
    mem_param_19049.references = NULL;
    
    struct memblock mem_param_19044;
    
    mem_param_19044.references = NULL;
    
    struct memblock ext_mem_19189;
    
    ext_mem_19189.references = NULL;
    
    struct memblock ext_mem_19190;
    
    ext_mem_19190.references = NULL;
    
    struct memblock ext_mem_19191;
    
    ext_mem_19191.references = NULL;
    
    struct memblock ext_mem_19192;
    
    ext_mem_19192.references = NULL;
    
    struct memblock mem_param_tmp_21084;
    
    mem_param_tmp_21084.references = NULL;
    
    struct memblock mem_param_tmp_21083;
    
    mem_param_tmp_21083.references = NULL;
    
    struct memblock mem_param_tmp_21082;
    
    mem_param_tmp_21082.references = NULL;
    
    struct memblock mem_param_tmp_21081;
    
    mem_param_tmp_21081.references = NULL;
    
    struct memblock mem_param_18854;
    
    mem_param_18854.references = NULL;
    
    struct memblock mem_param_18849;
    
    mem_param_18849.references = NULL;
    
    struct memblock mem_param_18844;
    
    mem_param_18844.references = NULL;
    
    struct memblock mem_param_18839;
    
    mem_param_18839.references = NULL;
    
    struct memblock ext_mem_18984;
    
    ext_mem_18984.references = NULL;
    
    struct memblock ext_mem_18985;
    
    ext_mem_18985.references = NULL;
    
    struct memblock ext_mem_18986;
    
    ext_mem_18986.references = NULL;
    
    struct memblock ext_mem_18987;
    
    ext_mem_18987.references = NULL;
    
    struct memblock mem_19244;
    
    mem_19244.references = NULL;
    
    struct memblock mem_19241;
    
    mem_19241.references = NULL;
    
    struct memblock mem_19214;
    
    mem_19214.references = NULL;
    
    struct memblock mem_19211;
    
    mem_19211.references = NULL;
    
    struct memblock mem_19039;
    
    mem_19039.references = NULL;
    
    struct memblock mem_19036;
    
    mem_19036.references = NULL;
    
    struct memblock mem_19009;
    
    mem_19009.references = NULL;
    
    struct memblock mem_19006;
    
    mem_19006.references = NULL;
    
    struct memblock mem_18834;
    
    mem_18834.references = NULL;
    
    struct memblock mem_18831;
    
    mem_18831.references = NULL;
    
    struct memblock mem_18804;
    
    mem_18804.references = NULL;
    
    struct memblock mem_18801;
    
    mem_18801.references = NULL;
    
    struct memblock mem_param_tmp_21031;
    
    mem_param_tmp_21031.references = NULL;
    
    struct memblock mem_param_tmp_21030;
    
    mem_param_tmp_21030.references = NULL;
    
    struct memblock mem_param_tmp_21029;
    
    mem_param_tmp_21029.references = NULL;
    
    struct memblock mem_param_tmp_21028;
    
    mem_param_tmp_21028.references = NULL;
    
    struct memblock mem_param_18468;
    
    mem_param_18468.references = NULL;
    
    struct memblock mem_param_18463;
    
    mem_param_18463.references = NULL;
    
    struct memblock mem_param_18458;
    
    mem_param_18458.references = NULL;
    
    struct memblock mem_param_18453;
    
    mem_param_18453.references = NULL;
    
    struct memblock ext_mem_18602;
    
    ext_mem_18602.references = NULL;
    
    struct memblock ext_mem_18603;
    
    ext_mem_18603.references = NULL;
    
    struct memblock ext_mem_18604;
    
    ext_mem_18604.references = NULL;
    
    struct memblock ext_mem_18605;
    
    ext_mem_18605.references = NULL;
    
    struct memblock mem_param_tmp_20994;
    
    mem_param_tmp_20994.references = NULL;
    
    struct memblock mem_param_tmp_20993;
    
    mem_param_tmp_20993.references = NULL;
    
    struct memblock mem_param_tmp_20992;
    
    mem_param_tmp_20992.references = NULL;
    
    struct memblock mem_param_tmp_20991;
    
    mem_param_tmp_20991.references = NULL;
    
    struct memblock mem_param_18289;
    
    mem_param_18289.references = NULL;
    
    struct memblock mem_param_18284;
    
    mem_param_18284.references = NULL;
    
    struct memblock mem_param_18279;
    
    mem_param_18279.references = NULL;
    
    struct memblock mem_param_18274;
    
    mem_param_18274.references = NULL;
    
    struct memblock ext_mem_18423;
    
    ext_mem_18423.references = NULL;
    
    struct memblock ext_mem_18424;
    
    ext_mem_18424.references = NULL;
    
    struct memblock ext_mem_18425;
    
    ext_mem_18425.references = NULL;
    
    struct memblock ext_mem_18426;
    
    ext_mem_18426.references = NULL;
    
    struct memblock mem_param_tmp_20957;
    
    mem_param_tmp_20957.references = NULL;
    
    struct memblock mem_param_tmp_20956;
    
    mem_param_tmp_20956.references = NULL;
    
    struct memblock mem_param_tmp_20955;
    
    mem_param_tmp_20955.references = NULL;
    
    struct memblock mem_param_tmp_20954;
    
    mem_param_tmp_20954.references = NULL;
    
    struct memblock mem_param_18110;
    
    mem_param_18110.references = NULL;
    
    struct memblock mem_param_18105;
    
    mem_param_18105.references = NULL;
    
    struct memblock mem_param_18100;
    
    mem_param_18100.references = NULL;
    
    struct memblock mem_param_18095;
    
    mem_param_18095.references = NULL;
    
    struct memblock ext_mem_18244;
    
    ext_mem_18244.references = NULL;
    
    struct memblock ext_mem_18245;
    
    ext_mem_18245.references = NULL;
    
    struct memblock ext_mem_18246;
    
    ext_mem_18246.references = NULL;
    
    struct memblock ext_mem_18247;
    
    ext_mem_18247.references = NULL;
    
    struct memblock mem_18448;
    
    mem_18448.references = NULL;
    
    struct memblock mem_18445;
    
    mem_18445.references = NULL;
    
    struct memblock mem_18269;
    
    mem_18269.references = NULL;
    
    struct memblock mem_18266;
    
    mem_18266.references = NULL;
    
    struct memblock mem_18090;
    
    mem_18090.references = NULL;
    
    struct memblock mem_18087;
    
    mem_18087.references = NULL;
    
    struct memblock mem_18084;
    
    mem_18084.references = NULL;
    
    struct memblock mem_18081;
    
    mem_18081.references = NULL;
    
    struct memblock mem_18078;
    
    mem_18078.references = NULL;
    
    struct memblock mem_18075;
    
    mem_18075.references = NULL;
    
    struct memblock mem_18072;
    
    mem_18072.references = NULL;
    
    struct memblock mem_18069;
    
    mem_18069.references = NULL;
    
    struct memblock mem_param_tmp_20890;
    
    mem_param_tmp_20890.references = NULL;
    
    struct memblock mem_param_tmp_20889;
    
    mem_param_tmp_20889.references = NULL;
    
    struct memblock mem_param_tmp_20888;
    
    mem_param_tmp_20888.references = NULL;
    
    struct memblock mem_param_tmp_20887;
    
    mem_param_tmp_20887.references = NULL;
    
    struct memblock mem_param_17738;
    
    mem_param_17738.references = NULL;
    
    struct memblock mem_param_17733;
    
    mem_param_17733.references = NULL;
    
    struct memblock mem_param_17728;
    
    mem_param_17728.references = NULL;
    
    struct memblock mem_param_17723;
    
    mem_param_17723.references = NULL;
    
    struct memblock ext_mem_17870;
    
    ext_mem_17870.references = NULL;
    
    struct memblock ext_mem_17871;
    
    ext_mem_17871.references = NULL;
    
    struct memblock ext_mem_17872;
    
    ext_mem_17872.references = NULL;
    
    struct memblock ext_mem_17873;
    
    ext_mem_17873.references = NULL;
    
    struct memblock mem_param_tmp_20857;
    
    mem_param_tmp_20857.references = NULL;
    
    struct memblock mem_param_tmp_20856;
    
    mem_param_tmp_20856.references = NULL;
    
    struct memblock mem_param_tmp_20855;
    
    mem_param_tmp_20855.references = NULL;
    
    struct memblock mem_param_tmp_20854;
    
    mem_param_tmp_20854.references = NULL;
    
    struct memblock mem_param_17561;
    
    mem_param_17561.references = NULL;
    
    struct memblock mem_param_17556;
    
    mem_param_17556.references = NULL;
    
    struct memblock mem_param_17551;
    
    mem_param_17551.references = NULL;
    
    struct memblock mem_param_17546;
    
    mem_param_17546.references = NULL;
    
    struct memblock ext_mem_17693;
    
    ext_mem_17693.references = NULL;
    
    struct memblock ext_mem_17694;
    
    ext_mem_17694.references = NULL;
    
    struct memblock ext_mem_17695;
    
    ext_mem_17695.references = NULL;
    
    struct memblock ext_mem_17696;
    
    ext_mem_17696.references = NULL;
    
    struct memblock mem_param_tmp_20824;
    
    mem_param_tmp_20824.references = NULL;
    
    struct memblock mem_param_tmp_20823;
    
    mem_param_tmp_20823.references = NULL;
    
    struct memblock mem_param_tmp_20822;
    
    mem_param_tmp_20822.references = NULL;
    
    struct memblock mem_param_tmp_20821;
    
    mem_param_tmp_20821.references = NULL;
    
    struct memblock mem_param_17384;
    
    mem_param_17384.references = NULL;
    
    struct memblock mem_param_17379;
    
    mem_param_17379.references = NULL;
    
    struct memblock mem_param_17374;
    
    mem_param_17374.references = NULL;
    
    struct memblock mem_param_17369;
    
    mem_param_17369.references = NULL;
    
    struct memblock ext_mem_17516;
    
    ext_mem_17516.references = NULL;
    
    struct memblock ext_mem_17517;
    
    ext_mem_17517.references = NULL;
    
    struct memblock ext_mem_17518;
    
    ext_mem_17518.references = NULL;
    
    struct memblock ext_mem_17519;
    
    ext_mem_17519.references = NULL;
    
    struct memblock mem_17718;
    
    mem_17718.references = NULL;
    
    struct memblock mem_17715;
    
    mem_17715.references = NULL;
    
    struct memblock mem_17541;
    
    mem_17541.references = NULL;
    
    struct memblock mem_17538;
    
    mem_17538.references = NULL;
    
    struct memblock mem_17364;
    
    mem_17364.references = NULL;
    
    struct memblock mem_17361;
    
    mem_17361.references = NULL;
    
    struct memblock mem_17346;
    
    mem_17346.references = NULL;
    
    struct memblock mem_17331;
    
    mem_17331.references = NULL;
    
    struct memblock mem_17316;
    
    mem_17316.references = NULL;
    
    struct memblock mem_17226;
    
    mem_17226.references = NULL;
    
    struct memblock mem_17223;
    
    mem_17223.references = NULL;
    
    struct memblock mem_17220;
    
    mem_17220.references = NULL;
    
    struct memblock mem_out_20775;
    
    mem_out_20775.references = NULL;
    
    struct memblock mem_out_20774;
    
    mem_out_20774.references = NULL;
    
    struct memblock mem_out_20773;
    
    mem_out_20773.references = NULL;
    
    bool loop_cond_14698 = slt64((int64_t) 1, m_11007);
    int64_t y_14683 = sub64(m_11007, (int64_t) 1);
    int64_t x_14684 = m_11007 & y_14683;
    bool is_power_of_2_res_14685 = x_14684 == (int64_t) 0;
    int64_t y_14680 = sub64(n_11006, (int64_t) 1);
    int64_t x_14681 = n_11006 & y_14680;
    bool is_power_of_2_res_14682 = x_14681 == (int64_t) 0;
    bool x_14686 = is_power_of_2_res_14682 && is_power_of_2_res_14685;
    bool assert_c_14687;
    
    if (!x_14686) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (is_power_of_2 n && is_power_of_2 m)",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:76:5-82:30\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #2  sample_programs/fft.fut:38:18-38\n   #3  sample_programs/fft.fut:61:12-29\n   #4  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_15771;
    int32_t r_15772;
    int64_t r_15773;
    bool loop_while_15774;
    int32_t r_15775;
    int64_t n_15776;
    
    loop_while_15774 = loop_cond_14698;
    r_15775 = 0;
    n_15776 = m_11007;
    while (loop_while_15774) {
        int64_t n_15777 = sdiv64(n_15776, (int64_t) 2);
        int32_t r_15778 = add32(1, r_15775);
        bool loop_cond_15779 = slt64((int64_t) 1, n_15777);
        bool loop_while_tmp_20776 = loop_cond_15779;
        int32_t r_tmp_20777 = r_15778;
        int64_t n_tmp_20778 = n_15777;
        
        loop_while_15774 = loop_while_tmp_20776;
        r_15775 = r_tmp_20777;
        n_15776 = n_tmp_20778;
    }
    r_15771 = loop_while_15774;
    r_15772 = r_15775;
    r_15773 = n_15776;
    
    int64_t i32_res_15780 = sext_i32_i64(r_15772);
    bool loop_nonempty_15798 = slt64((int64_t) 0, i32_res_15780);
    bool loop_not_taken_15803 = !loop_nonempty_15798;
    int64_t iota_arg_14709 = sdiv64(m_11007, (int64_t) 2);
    int64_t conc_tmp_14729 = iota_arg_14709 + iota_arg_14709;
    bool dim_match_14730 = m_11007 == conc_tmp_14729;
    bool protect_assert_disj_15804 = dim_match_14730 || loop_not_taken_15803;
    bool empty_or_match_cert_15806;
    
    if (!protect_assert_disj_15804) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15805;
    
    if (!protect_assert_disj_15804) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15786 = slt64(i32_res_15780, (int64_t) 0);
    bool valid_15787 = !bounds_invalid_upwards_15786;
    bool range_valid_c_15788;
    
    if (!valid_15787) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15780, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17071 = (int64_t) 4 * i32_res_15780;
    int64_t bytes_17072 = smax64((int64_t) 0, binop_y_17071);
    
    if (mem_17073_cached_sizze_21464 < bytes_17072) {
        err = lexical_realloc(&ctx->error, &mem_17073,
                              &mem_17073_cached_sizze_21464, bytes_17072);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16935 = 0; i_16935 < r_15772; i_16935++) {
        int64_t i_16267 = sext_i32_i64(i_16935);
        bool nonnegative_15795 = sle32(0, i_16935);
        bool nonzzero_cert_15796;
        
        if (!nonnegative_15795) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15797 = shl32(1, i_16935);
        
        ((int32_t *) mem_17073)[i_16267] = defunc_0_f_res_15797;
    }
    
    bool r_15235;
    int32_t r_15236;
    int64_t r_15237;
    bool loop_while_15238;
    int32_t r_15239;
    int64_t n_15240;
    
    loop_while_15238 = loop_cond_14698;
    r_15239 = 0;
    n_15240 = m_11007;
    while (loop_while_15238) {
        int64_t n_15241 = sdiv64(n_15240, (int64_t) 2);
        int32_t r_15242 = add32(1, r_15239);
        bool loop_cond_15243 = slt64((int64_t) 1, n_15241);
        bool loop_while_tmp_20780 = loop_cond_15243;
        int32_t r_tmp_20781 = r_15242;
        int64_t n_tmp_20782 = n_15241;
        
        loop_while_15238 = loop_while_tmp_20780;
        r_15239 = r_tmp_20781;
        n_15240 = n_tmp_20782;
    }
    r_15235 = loop_while_15238;
    r_15236 = r_15239;
    r_15237 = n_15240;
    
    int64_t i32_res_15244 = sext_i32_i64(r_15236);
    bool loop_nonempty_15262 = slt64((int64_t) 0, i32_res_15244);
    bool loop_not_taken_15267 = !loop_nonempty_15262;
    bool protect_assert_disj_15268 = dim_match_14730 || loop_not_taken_15267;
    bool empty_or_match_cert_15270;
    
    if (!protect_assert_disj_15268) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15269;
    
    if (!protect_assert_disj_15268) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15250 = slt64(i32_res_15244, (int64_t) 0);
    bool valid_15251 = !bounds_invalid_upwards_15250;
    bool range_valid_c_15252;
    
    if (!valid_15251) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15244, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17086 = (int64_t) 4 * i32_res_15244;
    int64_t bytes_17087 = smax64((int64_t) 0, binop_y_17086);
    
    if (mem_17088_cached_sizze_21465 < bytes_17087) {
        err = lexical_realloc(&ctx->error, &mem_17088,
                              &mem_17088_cached_sizze_21465, bytes_17087);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16936 = 0; i_16936 < r_15236; i_16936++) {
        int64_t i_16271 = sext_i32_i64(i_16936);
        bool nonnegative_15259 = sle32(0, i_16936);
        bool nonzzero_cert_15260;
        
        if (!nonnegative_15259) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15261 = shl32(1, i_16936);
        
        ((int32_t *) mem_17088)[i_16271] = defunc_0_f_res_15261;
    }
    
    bool r_14699;
    int32_t r_14700;
    int64_t r_14701;
    bool loop_while_14702;
    int32_t r_14703;
    int64_t n_14704;
    
    loop_while_14702 = loop_cond_14698;
    r_14703 = 0;
    n_14704 = m_11007;
    while (loop_while_14702) {
        int64_t n_14705 = sdiv64(n_14704, (int64_t) 2);
        int32_t r_14706 = add32(1, r_14703);
        bool loop_cond_14707 = slt64((int64_t) 1, n_14705);
        bool loop_while_tmp_20784 = loop_cond_14707;
        int32_t r_tmp_20785 = r_14706;
        int64_t n_tmp_20786 = n_14705;
        
        loop_while_14702 = loop_while_tmp_20784;
        r_14703 = r_tmp_20785;
        n_14704 = n_tmp_20786;
    }
    r_14699 = loop_while_14702;
    r_14700 = r_14703;
    r_14701 = n_14704;
    
    int64_t i32_res_14708 = sext_i32_i64(r_14700);
    bool loop_nonempty_14726 = slt64((int64_t) 0, i32_res_14708);
    bool loop_not_taken_14731 = !loop_nonempty_14726;
    bool protect_assert_disj_14732 = dim_match_14730 || loop_not_taken_14731;
    bool empty_or_match_cert_14734;
    
    if (!protect_assert_disj_14732) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14733;
    
    if (!protect_assert_disj_14732) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int32_t i64_res_14727 = sext_i64_i32(m_11007);
    int32_t y_14728 = sdiv32(i64_res_14727, 2);
    bool bounds_invalid_upwards_14714 = slt64(i32_res_14708, (int64_t) 0);
    bool valid_14715 = !bounds_invalid_upwards_14714;
    bool range_valid_c_14716;
    
    if (!valid_14715) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14708, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17101 = (int64_t) 4 * i32_res_14708;
    int64_t bytes_17102 = smax64((int64_t) 0, binop_y_17101);
    
    if (mem_17103_cached_sizze_21466 < bytes_17102) {
        err = lexical_realloc(&ctx->error, &mem_17103,
                              &mem_17103_cached_sizze_21466, bytes_17102);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16937 = 0; i_16937 < r_14700; i_16937++) {
        int64_t i_16275 = sext_i32_i64(i_16937);
        bool nonnegative_14723 = sle32(0, i_16937);
        bool nonzzero_cert_14724;
        
        if (!nonnegative_14723) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14725 = shl32(1, i_16937);
        
        ((int32_t *) mem_17103)[i_16275] = defunc_0_f_res_14725;
    }
    
    bool bounds_invalid_upwards_14710 = slt64(iota_arg_14709, (int64_t) 0);
    bool valid_14711 = !bounds_invalid_upwards_14710;
    bool range_valid_c_14712;
    
    if (!valid_14711) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) iota_arg_14709, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:34:14-34\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17116 = (int64_t) 4 * m_11007;
    int64_t bytes_17117 = smax64((int64_t) 0, binop_y_17116);
    
    if (mem_17118_cached_sizze_21467 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17118,
                              &mem_17118_cached_sizze_21467, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16279 = 0; i_16279 < m_11007; i_16279++) {
        int32_t defunc_0_f_res_14666 = sext_i64_i32(i_16279);
        
        ((int32_t *) mem_17118)[i_16279] = defunc_0_f_res_14666;
    }
    if (mem_17133_cached_sizze_21468 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17133,
                              &mem_17133_cached_sizze_21468, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_20789 = 0; i_20789 < m_11007; i_20789++) {
        ((float *) mem_17133)[i_20789] = 0.0F;
    }
    
    int64_t binop_x_17134 = n_11006 * m_11007;
    int64_t binop_y_17135 = (int64_t) 4 * binop_x_17134;
    int64_t bytes_17136 = smax64((int64_t) 0, binop_y_17135);
    
    if (mem_17137_cached_sizze_21469 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17137,
                              &mem_17137_cached_sizze_21469, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17141_cached_sizze_21470 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17141,
                              &mem_17141_cached_sizze_21470, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17145_cached_sizze_21471 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17145,
                              &mem_17145_cached_sizze_21471, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17149_cached_sizze_21472 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17149,
                              &mem_17149_cached_sizze_21472, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17153_cached_sizze_21473 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17153,
                              &mem_17153_cached_sizze_21473, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17157_cached_sizze_21474 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_17157,
                              &mem_17157_cached_sizze_21474, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17220, bytes_17117, "mem_17220")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17223, bytes_17117, "mem_17223")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17226, bytes_17117, "mem_17226")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_17227 = smax64((int64_t) 0, m_11007);
    
    if (mem_17228_cached_sizze_21475 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17228,
                              &mem_17228_cached_sizze_21475, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17230_cached_sizze_21476 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17230,
                              &mem_17230_cached_sizze_21476, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17232_cached_sizze_21477 < bytes_17227) {
        err = lexical_realloc(&ctx->error, &mem_17232,
                              &mem_17232_cached_sizze_21477, bytes_17227);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17271_cached_sizze_21478 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17271,
                              &mem_17271_cached_sizze_21478, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17286_cached_sizze_21479 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17286,
                              &mem_17286_cached_sizze_21479, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17301_cached_sizze_21480 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_17301,
                              &mem_17301_cached_sizze_21480, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17316, bytes_17117, "mem_17316")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17331, bytes_17117, "mem_17331")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17346, bytes_17117, "mem_17346")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17361, bytes_17117, "mem_17361")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17364, bytes_17117, "mem_17364")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17391 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17392 = smax64((int64_t) 0, binop_y_17391);
    
    if (mem_17393_cached_sizze_21481 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17393,
                              &mem_17393_cached_sizze_21481, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17406 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17407 = smax64((int64_t) 0, binop_y_17406);
    
    if (mem_17408_cached_sizze_21482 < bytes_17407) {
        err = lexical_realloc(&ctx->error, &mem_17408,
                              &mem_17408_cached_sizze_21482, bytes_17407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17411_cached_sizze_21483 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17411,
                              &mem_17411_cached_sizze_21483, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17414_cached_sizze_21484 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17414,
                              &mem_17414_cached_sizze_21484, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17417_cached_sizze_21485 < bytes_17407) {
        err = lexical_realloc(&ctx->error, &mem_17417,
                              &mem_17417_cached_sizze_21485, bytes_17407);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17420_cached_sizze_21486 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17420,
                              &mem_17420_cached_sizze_21486, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17423_cached_sizze_21487 < bytes_17392) {
        err = lexical_realloc(&ctx->error, &mem_17423,
                              &mem_17423_cached_sizze_21487, bytes_17392);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17538, bytes_17117, "mem_17538")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17541, bytes_17117, "mem_17541")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17568 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17569 = smax64((int64_t) 0, binop_y_17568);
    
    if (mem_17570_cached_sizze_21488 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17570,
                              &mem_17570_cached_sizze_21488, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17583 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17584 = smax64((int64_t) 0, binop_y_17583);
    
    if (mem_17585_cached_sizze_21489 < bytes_17584) {
        err = lexical_realloc(&ctx->error, &mem_17585,
                              &mem_17585_cached_sizze_21489, bytes_17584);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17588_cached_sizze_21490 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17588,
                              &mem_17588_cached_sizze_21490, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17591_cached_sizze_21491 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17591,
                              &mem_17591_cached_sizze_21491, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17594_cached_sizze_21492 < bytes_17584) {
        err = lexical_realloc(&ctx->error, &mem_17594,
                              &mem_17594_cached_sizze_21492, bytes_17584);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17597_cached_sizze_21493 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17597,
                              &mem_17597_cached_sizze_21493, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17600_cached_sizze_21494 < bytes_17569) {
        err = lexical_realloc(&ctx->error, &mem_17600,
                              &mem_17600_cached_sizze_21494, bytes_17569);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17715, bytes_17117, "mem_17715")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_17718, bytes_17117, "mem_17718")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_17745 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_17746 = smax64((int64_t) 0, binop_y_17745);
    
    if (mem_17747_cached_sizze_21495 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17747,
                              &mem_17747_cached_sizze_21495, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_17760 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_17761 = smax64((int64_t) 0, binop_y_17760);
    
    if (mem_17762_cached_sizze_21496 < bytes_17761) {
        err = lexical_realloc(&ctx->error, &mem_17762,
                              &mem_17762_cached_sizze_21496, bytes_17761);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17765_cached_sizze_21497 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17765,
                              &mem_17765_cached_sizze_21497, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17768_cached_sizze_21498 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17768,
                              &mem_17768_cached_sizze_21498, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17771_cached_sizze_21499 < bytes_17761) {
        err = lexical_realloc(&ctx->error, &mem_17771,
                              &mem_17771_cached_sizze_21499, bytes_17761);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17774_cached_sizze_21500 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17774,
                              &mem_17774_cached_sizze_21500, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17777_cached_sizze_21501 < bytes_17746) {
        err = lexical_realloc(&ctx->error, &mem_17777,
                              &mem_17777_cached_sizze_21501, bytes_17746);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16435 = 0; i_16435 < n_11006; i_16435++) {
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17220.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17223.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17226.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        for (int64_t i_16287 = 0; i_16287 < m_11007; i_16287++) {
            if ((int64_t) 1 > 0)
                memmove(mem_17228 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11007) +
                                                                  i_16287 *
                                                                  (int64_t) 3),
                        (int64_t) 1);
            if ((int64_t) 1 > 0)
                memmove(mem_17230 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11007) +
                                                                  i_16287 *
                                                                  (int64_t) 3 +
                                                                  (int64_t) 1),
                        (int64_t) 1);
            if ((int64_t) 1 > 0)
                memmove(mem_17232 + i_16287, img_mem_17070.mem + (i_16435 *
                                                                  ((int64_t) 3 *
                                                                   m_11007) +
                                                                  i_16287 *
                                                                  (int64_t) 3 +
                                                                  (int64_t) 2),
                        (int64_t) 1);
        }
        for (int64_t i_16293 = 0; i_16293 < m_11007; i_16293++) {
            int8_t x_15729;
            
            x_15729 = ((int8_t *) mem_17232)[i_16293];
            
            float defunc_0_f_res_15730 = uitofp_i8_f32(x_15729);
            
            ((float *) mem_17271)[i_16293] = defunc_0_f_res_15730;
        }
        for (int64_t i_16297 = 0; i_16297 < m_11007; i_16297++) {
            int8_t x_15193;
            
            x_15193 = ((int8_t *) mem_17230)[i_16297];
            
            float defunc_0_f_res_15194 = uitofp_i8_f32(x_15193);
            
            ((float *) mem_17286)[i_16297] = defunc_0_f_res_15194;
        }
        for (int64_t i_16301 = 0; i_16301 < m_11007; i_16301++) {
            int8_t x_14657;
            
            x_14657 = ((int8_t *) mem_17228)[i_16301];
            
            float defunc_0_f_res_14658 = uitofp_i8_f32(x_14657);
            
            ((float *) mem_17301)[i_16301] = defunc_0_f_res_14658;
        }
        
        int32_t defunc_0_f_res_15734 = sext_i64_i32(i_16435);
        
        for (int64_t i_16305 = 0; i_16305 < m_11007; i_16305++) {
            int32_t x_15744;
            
            x_15744 = ((int32_t *) mem_17118)[i_16305];
            
            float x_15745;
            
            x_15745 = ((float *) mem_17271)[i_16305];
            
            int32_t y_15746 = add32(defunc_0_f_res_15734, x_15744);
            bool nonnegative_15747 = sle32(0, y_15746);
            bool nonzzero_cert_15748;
            
            if (!nonnegative_15747) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:63:12-29\n   #10 sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_15749 = pow32(-1, y_15746);
            float i32_res_15750 = sitofp_i32_f32(i32_arg_15749);
            float zt_res_15751 = x_15745 * i32_res_15750;
            
            ((float *) mem_17316.mem)[i_16305] = zt_res_15751;
        }
        for (int64_t i_16309 = 0; i_16309 < m_11007; i_16309++) {
            int32_t x_15208;
            
            x_15208 = ((int32_t *) mem_17118)[i_16309];
            
            float x_15209;
            
            x_15209 = ((float *) mem_17286)[i_16309];
            
            int32_t y_15210 = add32(x_15208, defunc_0_f_res_15734);
            bool nonnegative_15211 = sle32(0, y_15210);
            bool nonzzero_cert_15212;
            
            if (!nonnegative_15211) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:62:12-29\n   #10 sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_15213 = pow32(-1, y_15210);
            float i32_res_15214 = sitofp_i32_f32(i32_arg_15213);
            float zt_res_15215 = x_15209 * i32_res_15214;
            
            ((float *) mem_17331.mem)[i_16309] = zt_res_15215;
        }
        for (int64_t i_16313 = 0; i_16313 < m_11007; i_16313++) {
            int32_t x_14672;
            
            x_14672 = ((int32_t *) mem_17118)[i_16313];
            
            float x_14673;
            
            x_14673 = ((float *) mem_17301)[i_16313];
            
            int32_t y_14674 = add32(x_14672, defunc_0_f_res_15734);
            bool nonnegative_14675 = sle32(0, y_14674);
            bool nonzzero_cert_14676;
            
            if (!nonnegative_14675) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "negative exponent",
                                       "-> #0  sample_programs/fft.fut:32:29-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  sample_programs/fft.fut:28:3-34\n   #4  /prelude/soacs.fut:67:19-23\n   #5  /prelude/soacs.fut:67:3-37\n   #6  sample_programs/fft.fut:28:3-34\n   #7  sample_programs/fft.fut:33:6-30\n   #8  sample_programs/fft.fut:37:22-42\n   #9  sample_programs/fft.fut:61:12-29\n   #10 sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t i32_arg_14677 = pow32(-1, y_14674);
            float i32_res_14678 = sitofp_i32_f32(i32_arg_14677);
            float zt_res_14679 = x_14673 * i32_res_14678;
            
            ((float *) mem_17346.mem)[i_16313] = zt_res_14679;
        }
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17361.mem + (int64_t) 0, mem_17316.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17364.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_17535;
        int64_t ext_17534;
        int64_t ext_17533;
        int64_t ext_17532;
        int64_t ext_17531;
        int64_t ext_17530;
        int64_t ext_17529;
        int64_t ext_17528;
        int64_t ext_17527;
        int64_t ext_17526;
        int64_t ext_17525;
        int64_t ext_17524;
        int64_t ext_17523;
        int64_t ext_17522;
        int64_t ext_17521;
        int64_t ext_17520;
        int64_t ctx_param_ext_17365;
        int64_t ctx_param_ext_17366;
        int64_t ctx_param_ext_17367;
        int64_t ctx_param_ext_17368;
        int64_t ctx_param_ext_17370;
        int64_t ctx_param_ext_17371;
        int64_t ctx_param_ext_17372;
        int64_t ctx_param_ext_17373;
        int64_t ctx_param_ext_17375;
        int64_t ctx_param_ext_17376;
        int64_t ctx_param_ext_17377;
        int64_t ctx_param_ext_17378;
        int64_t ctx_param_ext_17380;
        int64_t ctx_param_ext_17381;
        int64_t ctx_param_ext_17382;
        int64_t ctx_param_ext_17383;
        
        ctx_param_ext_17365 = m_11007;
        ctx_param_ext_17366 = (int64_t) 0;
        ctx_param_ext_17367 = (int64_t) 1;
        ctx_param_ext_17368 = m_11007;
        ctx_param_ext_17370 = m_11007;
        ctx_param_ext_17371 = (int64_t) 0;
        ctx_param_ext_17372 = (int64_t) 1;
        ctx_param_ext_17373 = m_11007;
        ctx_param_ext_17375 = m_11007;
        ctx_param_ext_17376 = (int64_t) 0;
        ctx_param_ext_17377 = (int64_t) 1;
        ctx_param_ext_17378 = m_11007;
        ctx_param_ext_17380 = m_11007;
        ctx_param_ext_17381 = (int64_t) 0;
        ctx_param_ext_17382 = (int64_t) 1;
        ctx_param_ext_17383 = m_11007;
        if (memblock_set(ctx, &mem_param_17369, &mem_17316, "mem_17316") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17374, &mem_17226, "mem_17226") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17379, &mem_17361, "mem_17361") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17384, &mem_17364, "mem_17364") != 0)
            return 1;
        
        int32_t ns_15822;
        
        for (int64_t i_15817 = 0; i_15817 < i32_res_15780; i_15817++) {
            ns_15822 = ((int32_t *) mem_17073)[i_15817];
            for (int64_t i_16317 = 0; i_16317 < iota_arg_14709; i_16317++) {
                int32_t defunc_0_f_res_15825 = sext_i64_i32(i_16317);
                
                ((int32_t *) mem_17393)[i_16317] = defunc_0_f_res_15825;
            }
            
            int32_t i32_arg_15826 = mul32(2, ns_15822);
            float i32_res_15827 = sitofp_i32_f32(i32_arg_15826);
            bool zzero_15828 = ns_15822 == 0;
            bool nonzzero_15829 = !zzero_15828;
            bool nonzzero_cert_15830;
            
            if (!nonzzero_15829) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16331 = 0; i_16331 < iota_arg_14709; i_16331++) {
                int32_t x_15837;
                
                x_15837 = ((int32_t *) mem_17393)[i_16331];
                
                int32_t i32_arg_15838 = smod32(x_15837, ns_15822);
                float i32_res_15839 = sitofp_i32_f32(i32_arg_15838);
                float zt_res_15840 = -6.2831855F * i32_res_15839;
                float zs_res_15841 = zt_res_15840 / i32_res_15827;
                int64_t j_15842 = sext_i32_i64(x_15837);
                bool x_15843 = sle64((int64_t) 0, j_15842);
                bool y_15844 = slt64(j_15842, m_11007);
                bool bounds_check_15845 = x_15843 && y_15844;
                bool index_certs_15846;
                
                if (!bounds_check_15845) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15842,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15847;
                
                defunc_0_f_res_15847 =
                    ((float *) mem_param_17369.mem)[ctx_param_ext_17366 +
                                                    j_15842 *
                                                    ctx_param_ext_17367];
                
                float defunc_0_f_res_15848;
                
                defunc_0_f_res_15848 =
                    ((float *) mem_param_17374.mem)[ctx_param_ext_17371 +
                                                    j_15842 *
                                                    ctx_param_ext_17372];
                
                float sin_res_15849;
                
                sin_res_15849 = futrts_sin32(zs_res_15841);
                
                float cos_res_15850;
                
                cos_res_15850 = futrts_cos32(zs_res_15841);
                
                int32_t i_15851 = add32(y_14728, x_15837);
                int64_t i_15852 = sext_i32_i64(i_15851);
                bool x_15853 = sle64((int64_t) 0, i_15852);
                bool y_15854 = slt64(i_15852, m_11007);
                bool bounds_check_15855 = x_15853 && y_15854;
                bool index_certs_15856;
                
                if (!bounds_check_15855) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15852,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15857;
                
                zt_arg_15857 =
                    ((float *) mem_param_17369.mem)[ctx_param_ext_17366 +
                                                    i_15852 *
                                                    ctx_param_ext_17367];
                
                float zt_arg_15858;
                
                zt_arg_15858 =
                    ((float *) mem_param_17374.mem)[ctx_param_ext_17371 +
                                                    i_15852 *
                                                    ctx_param_ext_17372];
                
                float zt_res_15859 = sin_res_15849 * zt_arg_15858;
                float zt_res_15860 = cos_res_15850 * zt_arg_15857;
                float zm_res_15861 = zt_res_15860 - zt_res_15859;
                float zt_res_15862 = sin_res_15849 * zt_arg_15857;
                float zt_res_15863 = cos_res_15850 * zt_arg_15858;
                float zp_res_15864 = zt_res_15862 + zt_res_15863;
                float zp_res_15865 = defunc_0_f_res_15847 + zm_res_15861;
                float zp_res_15866 = defunc_0_f_res_15848 + zp_res_15864;
                float zm_res_15867 = defunc_0_f_res_15847 - zm_res_15861;
                float zm_res_15868 = defunc_0_f_res_15848 - zp_res_15864;
                int32_t x_15869 = sdiv32(x_15837, ns_15822);
                int32_t x_15870 = mul32(ns_15822, x_15869);
                int32_t x_15871 = mul32(2, x_15870);
                int32_t idxD_15872 = add32(i32_arg_15838, x_15871);
                int64_t i32_res_15873 = sext_i32_i64(idxD_15872);
                int32_t i32_arg_15874 = add32(ns_15822, idxD_15872);
                int64_t i32_res_15875 = sext_i32_i64(i32_arg_15874);
                
                ((int64_t *) mem_17408)[i_16331] = i32_res_15873;
                ((float *) mem_17411)[i_16331] = zp_res_15865;
                ((float *) mem_17414)[i_16331] = zp_res_15866;
                ((int64_t *) mem_17417)[i_16331] = i32_res_15875;
                ((float *) mem_17420)[i_16331] = zm_res_15867;
                ((float *) mem_17423)[i_16331] = zm_res_15868;
            }
            for (int64_t write_iter_16338 = 0; write_iter_16338 <
                 iota_arg_14709; write_iter_16338++) {
                int64_t write_iv_16341;
                
                write_iv_16341 = ((int64_t *) mem_17408)[write_iter_16338];
                
                int64_t write_iv_16344;
                
                write_iv_16344 = ((int64_t *) mem_17417)[write_iter_16338];
                if (sle64((int64_t) 0, write_iv_16341) && slt64(write_iv_16341,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17379.mem + (ctx_param_ext_17376 +
                                                       ctx_param_ext_17377 *
                                                       write_iv_16341) *
                                (int64_t) 4, mem_17411 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16344) && slt64(write_iv_16344,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17379.mem + (ctx_param_ext_17376 +
                                                       ctx_param_ext_17377 *
                                                       write_iv_16344) *
                                (int64_t) 4, mem_17420 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16341) && slt64(write_iv_16341,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17384.mem + (ctx_param_ext_17381 +
                                                       ctx_param_ext_17382 *
                                                       write_iv_16341) *
                                (int64_t) 4, mem_17414 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16344) && slt64(write_iv_16344,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17384.mem + (ctx_param_ext_17381 +
                                                       ctx_param_ext_17382 *
                                                       write_iv_16344) *
                                (int64_t) 4, mem_17423 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16338) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20805 = ctx_param_ext_17375;
            int64_t ctx_param_ext_tmp_20806 = ctx_param_ext_17376;
            int64_t ctx_param_ext_tmp_20807 = ctx_param_ext_17377;
            int64_t ctx_param_ext_tmp_20808 = ctx_param_ext_17378;
            int64_t ctx_param_ext_tmp_20809 = ctx_param_ext_17380;
            int64_t ctx_param_ext_tmp_20810 = ctx_param_ext_17381;
            int64_t ctx_param_ext_tmp_20811 = ctx_param_ext_17382;
            int64_t ctx_param_ext_tmp_20812 = ctx_param_ext_17383;
            int64_t ctx_param_ext_tmp_20813 = ctx_param_ext_17365;
            int64_t ctx_param_ext_tmp_20814 = ctx_param_ext_17366;
            int64_t ctx_param_ext_tmp_20815 = ctx_param_ext_17367;
            int64_t ctx_param_ext_tmp_20816 = ctx_param_ext_17368;
            int64_t ctx_param_ext_tmp_20817 = ctx_param_ext_17370;
            int64_t ctx_param_ext_tmp_20818 = ctx_param_ext_17371;
            int64_t ctx_param_ext_tmp_20819 = ctx_param_ext_17372;
            int64_t ctx_param_ext_tmp_20820 = ctx_param_ext_17373;
            
            if (memblock_set(ctx, &mem_param_tmp_20821, &mem_param_17379,
                             "mem_param_17379") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20822, &mem_param_17384,
                             "mem_param_17384") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20823, &mem_param_17369,
                             "mem_param_17369") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20824, &mem_param_17374,
                             "mem_param_17374") != 0)
                return 1;
            ctx_param_ext_17365 = ctx_param_ext_tmp_20805;
            ctx_param_ext_17366 = ctx_param_ext_tmp_20806;
            ctx_param_ext_17367 = ctx_param_ext_tmp_20807;
            ctx_param_ext_17368 = ctx_param_ext_tmp_20808;
            ctx_param_ext_17370 = ctx_param_ext_tmp_20809;
            ctx_param_ext_17371 = ctx_param_ext_tmp_20810;
            ctx_param_ext_17372 = ctx_param_ext_tmp_20811;
            ctx_param_ext_17373 = ctx_param_ext_tmp_20812;
            ctx_param_ext_17375 = ctx_param_ext_tmp_20813;
            ctx_param_ext_17376 = ctx_param_ext_tmp_20814;
            ctx_param_ext_17377 = ctx_param_ext_tmp_20815;
            ctx_param_ext_17378 = ctx_param_ext_tmp_20816;
            ctx_param_ext_17380 = ctx_param_ext_tmp_20817;
            ctx_param_ext_17381 = ctx_param_ext_tmp_20818;
            ctx_param_ext_17382 = ctx_param_ext_tmp_20819;
            ctx_param_ext_17383 = ctx_param_ext_tmp_20820;
            if (memblock_set(ctx, &mem_param_17369, &mem_param_tmp_20821,
                             "mem_param_tmp_20821") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17374, &mem_param_tmp_20822,
                             "mem_param_tmp_20822") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17379, &mem_param_tmp_20823,
                             "mem_param_tmp_20823") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17384, &mem_param_tmp_20824,
                             "mem_param_tmp_20824") != 0)
                return 1;
        }
        ext_17535 = ctx_param_ext_17365;
        ext_17534 = ctx_param_ext_17366;
        ext_17533 = ctx_param_ext_17367;
        ext_17532 = ctx_param_ext_17368;
        ext_17531 = ctx_param_ext_17370;
        ext_17530 = ctx_param_ext_17371;
        ext_17529 = ctx_param_ext_17372;
        ext_17528 = ctx_param_ext_17373;
        ext_17527 = ctx_param_ext_17375;
        ext_17526 = ctx_param_ext_17376;
        ext_17525 = ctx_param_ext_17377;
        ext_17524 = ctx_param_ext_17378;
        ext_17523 = ctx_param_ext_17380;
        ext_17522 = ctx_param_ext_17381;
        ext_17521 = ctx_param_ext_17382;
        ext_17520 = ctx_param_ext_17383;
        if (memblock_set(ctx, &ext_mem_17519, &mem_param_17369,
                         "mem_param_17369") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17518, &mem_param_17374,
                         "mem_param_17374") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17517, &mem_param_17379,
                         "mem_param_17379") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17516, &mem_param_17384,
                         "mem_param_17384") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17538.mem + (int64_t) 0, mem_17331.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17541.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_17712;
        int64_t ext_17711;
        int64_t ext_17710;
        int64_t ext_17709;
        int64_t ext_17708;
        int64_t ext_17707;
        int64_t ext_17706;
        int64_t ext_17705;
        int64_t ext_17704;
        int64_t ext_17703;
        int64_t ext_17702;
        int64_t ext_17701;
        int64_t ext_17700;
        int64_t ext_17699;
        int64_t ext_17698;
        int64_t ext_17697;
        int64_t ctx_param_ext_17542;
        int64_t ctx_param_ext_17543;
        int64_t ctx_param_ext_17544;
        int64_t ctx_param_ext_17545;
        int64_t ctx_param_ext_17547;
        int64_t ctx_param_ext_17548;
        int64_t ctx_param_ext_17549;
        int64_t ctx_param_ext_17550;
        int64_t ctx_param_ext_17552;
        int64_t ctx_param_ext_17553;
        int64_t ctx_param_ext_17554;
        int64_t ctx_param_ext_17555;
        int64_t ctx_param_ext_17557;
        int64_t ctx_param_ext_17558;
        int64_t ctx_param_ext_17559;
        int64_t ctx_param_ext_17560;
        
        ctx_param_ext_17542 = m_11007;
        ctx_param_ext_17543 = (int64_t) 0;
        ctx_param_ext_17544 = (int64_t) 1;
        ctx_param_ext_17545 = m_11007;
        ctx_param_ext_17547 = m_11007;
        ctx_param_ext_17548 = (int64_t) 0;
        ctx_param_ext_17549 = (int64_t) 1;
        ctx_param_ext_17550 = m_11007;
        ctx_param_ext_17552 = m_11007;
        ctx_param_ext_17553 = (int64_t) 0;
        ctx_param_ext_17554 = (int64_t) 1;
        ctx_param_ext_17555 = m_11007;
        ctx_param_ext_17557 = m_11007;
        ctx_param_ext_17558 = (int64_t) 0;
        ctx_param_ext_17559 = (int64_t) 1;
        ctx_param_ext_17560 = m_11007;
        if (memblock_set(ctx, &mem_param_17546, &mem_17331, "mem_17331") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17551, &mem_17223, "mem_17223") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17556, &mem_17538, "mem_17538") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17561, &mem_17541, "mem_17541") != 0)
            return 1;
        
        int32_t ns_15286;
        
        for (int64_t i_15281 = 0; i_15281 < i32_res_15244; i_15281++) {
            ns_15286 = ((int32_t *) mem_17088)[i_15281];
            for (int64_t i_16353 = 0; i_16353 < iota_arg_14709; i_16353++) {
                int32_t defunc_0_f_res_15289 = sext_i64_i32(i_16353);
                
                ((int32_t *) mem_17570)[i_16353] = defunc_0_f_res_15289;
            }
            
            int32_t i32_arg_15290 = mul32(2, ns_15286);
            float i32_res_15291 = sitofp_i32_f32(i32_arg_15290);
            bool zzero_15292 = ns_15286 == 0;
            bool nonzzero_15293 = !zzero_15292;
            bool nonzzero_cert_15294;
            
            if (!nonzzero_15293) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16367 = 0; i_16367 < iota_arg_14709; i_16367++) {
                int32_t x_15301;
                
                x_15301 = ((int32_t *) mem_17570)[i_16367];
                
                int32_t i32_arg_15302 = smod32(x_15301, ns_15286);
                float i32_res_15303 = sitofp_i32_f32(i32_arg_15302);
                float zt_res_15304 = -6.2831855F * i32_res_15303;
                float zs_res_15305 = zt_res_15304 / i32_res_15291;
                int64_t j_15306 = sext_i32_i64(x_15301);
                bool x_15307 = sle64((int64_t) 0, j_15306);
                bool y_15308 = slt64(j_15306, m_11007);
                bool bounds_check_15309 = x_15307 && y_15308;
                bool index_certs_15310;
                
                if (!bounds_check_15309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15306,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15311;
                
                defunc_0_f_res_15311 =
                    ((float *) mem_param_17546.mem)[ctx_param_ext_17543 +
                                                    j_15306 *
                                                    ctx_param_ext_17544];
                
                float defunc_0_f_res_15312;
                
                defunc_0_f_res_15312 =
                    ((float *) mem_param_17551.mem)[ctx_param_ext_17548 +
                                                    j_15306 *
                                                    ctx_param_ext_17549];
                
                float sin_res_15313;
                
                sin_res_15313 = futrts_sin32(zs_res_15305);
                
                float cos_res_15314;
                
                cos_res_15314 = futrts_cos32(zs_res_15305);
                
                int32_t i_15315 = add32(y_14728, x_15301);
                int64_t i_15316 = sext_i32_i64(i_15315);
                bool x_15317 = sle64((int64_t) 0, i_15316);
                bool y_15318 = slt64(i_15316, m_11007);
                bool bounds_check_15319 = x_15317 && y_15318;
                bool index_certs_15320;
                
                if (!bounds_check_15319) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15316,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15321;
                
                zt_arg_15321 =
                    ((float *) mem_param_17546.mem)[ctx_param_ext_17543 +
                                                    i_15316 *
                                                    ctx_param_ext_17544];
                
                float zt_arg_15322;
                
                zt_arg_15322 =
                    ((float *) mem_param_17551.mem)[ctx_param_ext_17548 +
                                                    i_15316 *
                                                    ctx_param_ext_17549];
                
                float zt_res_15323 = sin_res_15313 * zt_arg_15322;
                float zt_res_15324 = cos_res_15314 * zt_arg_15321;
                float zm_res_15325 = zt_res_15324 - zt_res_15323;
                float zt_res_15326 = sin_res_15313 * zt_arg_15321;
                float zt_res_15327 = cos_res_15314 * zt_arg_15322;
                float zp_res_15328 = zt_res_15326 + zt_res_15327;
                float zp_res_15329 = defunc_0_f_res_15311 + zm_res_15325;
                float zp_res_15330 = defunc_0_f_res_15312 + zp_res_15328;
                float zm_res_15331 = defunc_0_f_res_15311 - zm_res_15325;
                float zm_res_15332 = defunc_0_f_res_15312 - zp_res_15328;
                int32_t x_15333 = sdiv32(x_15301, ns_15286);
                int32_t x_15334 = mul32(ns_15286, x_15333);
                int32_t x_15335 = mul32(2, x_15334);
                int32_t idxD_15336 = add32(i32_arg_15302, x_15335);
                int64_t i32_res_15337 = sext_i32_i64(idxD_15336);
                int32_t i32_arg_15338 = add32(ns_15286, idxD_15336);
                int64_t i32_res_15339 = sext_i32_i64(i32_arg_15338);
                
                ((int64_t *) mem_17585)[i_16367] = i32_res_15337;
                ((float *) mem_17588)[i_16367] = zp_res_15329;
                ((float *) mem_17591)[i_16367] = zp_res_15330;
                ((int64_t *) mem_17594)[i_16367] = i32_res_15339;
                ((float *) mem_17597)[i_16367] = zm_res_15331;
                ((float *) mem_17600)[i_16367] = zm_res_15332;
            }
            for (int64_t write_iter_16374 = 0; write_iter_16374 <
                 iota_arg_14709; write_iter_16374++) {
                int64_t write_iv_16377;
                
                write_iv_16377 = ((int64_t *) mem_17585)[write_iter_16374];
                
                int64_t write_iv_16380;
                
                write_iv_16380 = ((int64_t *) mem_17594)[write_iter_16374];
                if (sle64((int64_t) 0, write_iv_16377) && slt64(write_iv_16377,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17556.mem + (ctx_param_ext_17553 +
                                                       ctx_param_ext_17554 *
                                                       write_iv_16377) *
                                (int64_t) 4, mem_17588 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16380) && slt64(write_iv_16380,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17556.mem + (ctx_param_ext_17553 +
                                                       ctx_param_ext_17554 *
                                                       write_iv_16380) *
                                (int64_t) 4, mem_17597 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16377) && slt64(write_iv_16377,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17561.mem + (ctx_param_ext_17558 +
                                                       ctx_param_ext_17559 *
                                                       write_iv_16377) *
                                (int64_t) 4, mem_17591 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16380) && slt64(write_iv_16380,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17561.mem + (ctx_param_ext_17558 +
                                                       ctx_param_ext_17559 *
                                                       write_iv_16380) *
                                (int64_t) 4, mem_17600 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16374) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20838 = ctx_param_ext_17552;
            int64_t ctx_param_ext_tmp_20839 = ctx_param_ext_17553;
            int64_t ctx_param_ext_tmp_20840 = ctx_param_ext_17554;
            int64_t ctx_param_ext_tmp_20841 = ctx_param_ext_17555;
            int64_t ctx_param_ext_tmp_20842 = ctx_param_ext_17557;
            int64_t ctx_param_ext_tmp_20843 = ctx_param_ext_17558;
            int64_t ctx_param_ext_tmp_20844 = ctx_param_ext_17559;
            int64_t ctx_param_ext_tmp_20845 = ctx_param_ext_17560;
            int64_t ctx_param_ext_tmp_20846 = ctx_param_ext_17542;
            int64_t ctx_param_ext_tmp_20847 = ctx_param_ext_17543;
            int64_t ctx_param_ext_tmp_20848 = ctx_param_ext_17544;
            int64_t ctx_param_ext_tmp_20849 = ctx_param_ext_17545;
            int64_t ctx_param_ext_tmp_20850 = ctx_param_ext_17547;
            int64_t ctx_param_ext_tmp_20851 = ctx_param_ext_17548;
            int64_t ctx_param_ext_tmp_20852 = ctx_param_ext_17549;
            int64_t ctx_param_ext_tmp_20853 = ctx_param_ext_17550;
            
            if (memblock_set(ctx, &mem_param_tmp_20854, &mem_param_17556,
                             "mem_param_17556") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20855, &mem_param_17561,
                             "mem_param_17561") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20856, &mem_param_17546,
                             "mem_param_17546") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20857, &mem_param_17551,
                             "mem_param_17551") != 0)
                return 1;
            ctx_param_ext_17542 = ctx_param_ext_tmp_20838;
            ctx_param_ext_17543 = ctx_param_ext_tmp_20839;
            ctx_param_ext_17544 = ctx_param_ext_tmp_20840;
            ctx_param_ext_17545 = ctx_param_ext_tmp_20841;
            ctx_param_ext_17547 = ctx_param_ext_tmp_20842;
            ctx_param_ext_17548 = ctx_param_ext_tmp_20843;
            ctx_param_ext_17549 = ctx_param_ext_tmp_20844;
            ctx_param_ext_17550 = ctx_param_ext_tmp_20845;
            ctx_param_ext_17552 = ctx_param_ext_tmp_20846;
            ctx_param_ext_17553 = ctx_param_ext_tmp_20847;
            ctx_param_ext_17554 = ctx_param_ext_tmp_20848;
            ctx_param_ext_17555 = ctx_param_ext_tmp_20849;
            ctx_param_ext_17557 = ctx_param_ext_tmp_20850;
            ctx_param_ext_17558 = ctx_param_ext_tmp_20851;
            ctx_param_ext_17559 = ctx_param_ext_tmp_20852;
            ctx_param_ext_17560 = ctx_param_ext_tmp_20853;
            if (memblock_set(ctx, &mem_param_17546, &mem_param_tmp_20854,
                             "mem_param_tmp_20854") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17551, &mem_param_tmp_20855,
                             "mem_param_tmp_20855") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17556, &mem_param_tmp_20856,
                             "mem_param_tmp_20856") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17561, &mem_param_tmp_20857,
                             "mem_param_tmp_20857") != 0)
                return 1;
        }
        ext_17712 = ctx_param_ext_17542;
        ext_17711 = ctx_param_ext_17543;
        ext_17710 = ctx_param_ext_17544;
        ext_17709 = ctx_param_ext_17545;
        ext_17708 = ctx_param_ext_17547;
        ext_17707 = ctx_param_ext_17548;
        ext_17706 = ctx_param_ext_17549;
        ext_17705 = ctx_param_ext_17550;
        ext_17704 = ctx_param_ext_17552;
        ext_17703 = ctx_param_ext_17553;
        ext_17702 = ctx_param_ext_17554;
        ext_17701 = ctx_param_ext_17555;
        ext_17700 = ctx_param_ext_17557;
        ext_17699 = ctx_param_ext_17558;
        ext_17698 = ctx_param_ext_17559;
        ext_17697 = ctx_param_ext_17560;
        if (memblock_set(ctx, &ext_mem_17696, &mem_param_17546,
                         "mem_param_17546") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17695, &mem_param_17551,
                         "mem_param_17551") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17694, &mem_param_17556,
                         "mem_param_17556") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17693, &mem_param_17561,
                         "mem_param_17561") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17715.mem + (int64_t) 0, mem_17346.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17718.mem + (int64_t) 0, mem_17133 + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_17889;
        int64_t ext_17888;
        int64_t ext_17887;
        int64_t ext_17886;
        int64_t ext_17885;
        int64_t ext_17884;
        int64_t ext_17883;
        int64_t ext_17882;
        int64_t ext_17881;
        int64_t ext_17880;
        int64_t ext_17879;
        int64_t ext_17878;
        int64_t ext_17877;
        int64_t ext_17876;
        int64_t ext_17875;
        int64_t ext_17874;
        int64_t ctx_param_ext_17719;
        int64_t ctx_param_ext_17720;
        int64_t ctx_param_ext_17721;
        int64_t ctx_param_ext_17722;
        int64_t ctx_param_ext_17724;
        int64_t ctx_param_ext_17725;
        int64_t ctx_param_ext_17726;
        int64_t ctx_param_ext_17727;
        int64_t ctx_param_ext_17729;
        int64_t ctx_param_ext_17730;
        int64_t ctx_param_ext_17731;
        int64_t ctx_param_ext_17732;
        int64_t ctx_param_ext_17734;
        int64_t ctx_param_ext_17735;
        int64_t ctx_param_ext_17736;
        int64_t ctx_param_ext_17737;
        
        ctx_param_ext_17719 = m_11007;
        ctx_param_ext_17720 = (int64_t) 0;
        ctx_param_ext_17721 = (int64_t) 1;
        ctx_param_ext_17722 = m_11007;
        ctx_param_ext_17724 = m_11007;
        ctx_param_ext_17725 = (int64_t) 0;
        ctx_param_ext_17726 = (int64_t) 1;
        ctx_param_ext_17727 = m_11007;
        ctx_param_ext_17729 = m_11007;
        ctx_param_ext_17730 = (int64_t) 0;
        ctx_param_ext_17731 = (int64_t) 1;
        ctx_param_ext_17732 = m_11007;
        ctx_param_ext_17734 = m_11007;
        ctx_param_ext_17735 = (int64_t) 0;
        ctx_param_ext_17736 = (int64_t) 1;
        ctx_param_ext_17737 = m_11007;
        if (memblock_set(ctx, &mem_param_17723, &mem_17346, "mem_17346") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17728, &mem_17220, "mem_17220") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17733, &mem_17715, "mem_17715") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_17738, &mem_17718, "mem_17718") != 0)
            return 1;
        
        int32_t ns_14750;
        
        for (int64_t i_14745 = 0; i_14745 < i32_res_14708; i_14745++) {
            ns_14750 = ((int32_t *) mem_17103)[i_14745];
            for (int64_t i_16389 = 0; i_16389 < iota_arg_14709; i_16389++) {
                int32_t defunc_0_f_res_14753 = sext_i64_i32(i_16389);
                
                ((int32_t *) mem_17747)[i_16389] = defunc_0_f_res_14753;
            }
            
            int32_t i32_arg_14754 = mul32(2, ns_14750);
            float i32_res_14755 = sitofp_i32_f32(i32_arg_14754);
            bool zzero_14756 = ns_14750 == 0;
            bool nonzzero_14757 = !zzero_14756;
            bool nonzzero_cert_14758;
            
            if (!nonzzero_14757) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16403 = 0; i_16403 < iota_arg_14709; i_16403++) {
                int32_t x_14765;
                
                x_14765 = ((int32_t *) mem_17747)[i_16403];
                
                int32_t i32_arg_14766 = smod32(x_14765, ns_14750);
                float i32_res_14767 = sitofp_i32_f32(i32_arg_14766);
                float zt_res_14768 = -6.2831855F * i32_res_14767;
                float zs_res_14769 = zt_res_14768 / i32_res_14755;
                int64_t j_14770 = sext_i32_i64(x_14765);
                bool x_14771 = sle64((int64_t) 0, j_14770);
                bool y_14772 = slt64(j_14770, m_11007);
                bool bounds_check_14773 = x_14771 && y_14772;
                bool index_certs_14774;
                
                if (!bounds_check_14773) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_14770,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_14775;
                
                defunc_0_f_res_14775 =
                    ((float *) mem_param_17723.mem)[ctx_param_ext_17720 +
                                                    j_14770 *
                                                    ctx_param_ext_17721];
                
                float defunc_0_f_res_14776;
                
                defunc_0_f_res_14776 =
                    ((float *) mem_param_17728.mem)[ctx_param_ext_17725 +
                                                    j_14770 *
                                                    ctx_param_ext_17726];
                
                float sin_res_14777;
                
                sin_res_14777 = futrts_sin32(zs_res_14769);
                
                float cos_res_14778;
                
                cos_res_14778 = futrts_cos32(zs_res_14769);
                
                int32_t i_14779 = add32(y_14728, x_14765);
                int64_t i_14780 = sext_i32_i64(i_14779);
                bool x_14781 = sle64((int64_t) 0, i_14780);
                bool y_14782 = slt64(i_14780, m_11007);
                bool bounds_check_14783 = x_14781 && y_14782;
                bool index_certs_14784;
                
                if (!bounds_check_14783) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_14780,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_14785;
                
                zt_arg_14785 =
                    ((float *) mem_param_17723.mem)[ctx_param_ext_17720 +
                                                    i_14780 *
                                                    ctx_param_ext_17721];
                
                float zt_arg_14786;
                
                zt_arg_14786 =
                    ((float *) mem_param_17728.mem)[ctx_param_ext_17725 +
                                                    i_14780 *
                                                    ctx_param_ext_17726];
                
                float zt_res_14787 = sin_res_14777 * zt_arg_14786;
                float zt_res_14788 = cos_res_14778 * zt_arg_14785;
                float zm_res_14789 = zt_res_14788 - zt_res_14787;
                float zt_res_14790 = sin_res_14777 * zt_arg_14785;
                float zt_res_14791 = cos_res_14778 * zt_arg_14786;
                float zp_res_14792 = zt_res_14790 + zt_res_14791;
                float zp_res_14793 = defunc_0_f_res_14775 + zm_res_14789;
                float zp_res_14794 = defunc_0_f_res_14776 + zp_res_14792;
                float zm_res_14795 = defunc_0_f_res_14775 - zm_res_14789;
                float zm_res_14796 = defunc_0_f_res_14776 - zp_res_14792;
                int32_t x_14797 = sdiv32(x_14765, ns_14750);
                int32_t x_14798 = mul32(ns_14750, x_14797);
                int32_t x_14799 = mul32(2, x_14798);
                int32_t idxD_14800 = add32(i32_arg_14766, x_14799);
                int64_t i32_res_14801 = sext_i32_i64(idxD_14800);
                int32_t i32_arg_14802 = add32(ns_14750, idxD_14800);
                int64_t i32_res_14803 = sext_i32_i64(i32_arg_14802);
                
                ((int64_t *) mem_17762)[i_16403] = i32_res_14801;
                ((float *) mem_17765)[i_16403] = zp_res_14793;
                ((float *) mem_17768)[i_16403] = zp_res_14794;
                ((int64_t *) mem_17771)[i_16403] = i32_res_14803;
                ((float *) mem_17774)[i_16403] = zm_res_14795;
                ((float *) mem_17777)[i_16403] = zm_res_14796;
            }
            for (int64_t write_iter_16410 = 0; write_iter_16410 <
                 iota_arg_14709; write_iter_16410++) {
                int64_t write_iv_16413;
                
                write_iv_16413 = ((int64_t *) mem_17762)[write_iter_16410];
                
                int64_t write_iv_16416;
                
                write_iv_16416 = ((int64_t *) mem_17771)[write_iter_16410];
                if (sle64((int64_t) 0, write_iv_16413) && slt64(write_iv_16413,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17733.mem + (ctx_param_ext_17730 +
                                                       ctx_param_ext_17731 *
                                                       write_iv_16413) *
                                (int64_t) 4, mem_17765 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16416) && slt64(write_iv_16416,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17733.mem + (ctx_param_ext_17730 +
                                                       ctx_param_ext_17731 *
                                                       write_iv_16416) *
                                (int64_t) 4, mem_17774 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16413) && slt64(write_iv_16413,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17738.mem + (ctx_param_ext_17735 +
                                                       ctx_param_ext_17736 *
                                                       write_iv_16413) *
                                (int64_t) 4, mem_17768 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16416) && slt64(write_iv_16416,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_17738.mem + (ctx_param_ext_17735 +
                                                       ctx_param_ext_17736 *
                                                       write_iv_16416) *
                                (int64_t) 4, mem_17777 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16410) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20871 = ctx_param_ext_17729;
            int64_t ctx_param_ext_tmp_20872 = ctx_param_ext_17730;
            int64_t ctx_param_ext_tmp_20873 = ctx_param_ext_17731;
            int64_t ctx_param_ext_tmp_20874 = ctx_param_ext_17732;
            int64_t ctx_param_ext_tmp_20875 = ctx_param_ext_17734;
            int64_t ctx_param_ext_tmp_20876 = ctx_param_ext_17735;
            int64_t ctx_param_ext_tmp_20877 = ctx_param_ext_17736;
            int64_t ctx_param_ext_tmp_20878 = ctx_param_ext_17737;
            int64_t ctx_param_ext_tmp_20879 = ctx_param_ext_17719;
            int64_t ctx_param_ext_tmp_20880 = ctx_param_ext_17720;
            int64_t ctx_param_ext_tmp_20881 = ctx_param_ext_17721;
            int64_t ctx_param_ext_tmp_20882 = ctx_param_ext_17722;
            int64_t ctx_param_ext_tmp_20883 = ctx_param_ext_17724;
            int64_t ctx_param_ext_tmp_20884 = ctx_param_ext_17725;
            int64_t ctx_param_ext_tmp_20885 = ctx_param_ext_17726;
            int64_t ctx_param_ext_tmp_20886 = ctx_param_ext_17727;
            
            if (memblock_set(ctx, &mem_param_tmp_20887, &mem_param_17733,
                             "mem_param_17733") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20888, &mem_param_17738,
                             "mem_param_17738") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20889, &mem_param_17723,
                             "mem_param_17723") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20890, &mem_param_17728,
                             "mem_param_17728") != 0)
                return 1;
            ctx_param_ext_17719 = ctx_param_ext_tmp_20871;
            ctx_param_ext_17720 = ctx_param_ext_tmp_20872;
            ctx_param_ext_17721 = ctx_param_ext_tmp_20873;
            ctx_param_ext_17722 = ctx_param_ext_tmp_20874;
            ctx_param_ext_17724 = ctx_param_ext_tmp_20875;
            ctx_param_ext_17725 = ctx_param_ext_tmp_20876;
            ctx_param_ext_17726 = ctx_param_ext_tmp_20877;
            ctx_param_ext_17727 = ctx_param_ext_tmp_20878;
            ctx_param_ext_17729 = ctx_param_ext_tmp_20879;
            ctx_param_ext_17730 = ctx_param_ext_tmp_20880;
            ctx_param_ext_17731 = ctx_param_ext_tmp_20881;
            ctx_param_ext_17732 = ctx_param_ext_tmp_20882;
            ctx_param_ext_17734 = ctx_param_ext_tmp_20883;
            ctx_param_ext_17735 = ctx_param_ext_tmp_20884;
            ctx_param_ext_17736 = ctx_param_ext_tmp_20885;
            ctx_param_ext_17737 = ctx_param_ext_tmp_20886;
            if (memblock_set(ctx, &mem_param_17723, &mem_param_tmp_20887,
                             "mem_param_tmp_20887") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17728, &mem_param_tmp_20888,
                             "mem_param_tmp_20888") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17733, &mem_param_tmp_20889,
                             "mem_param_tmp_20889") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_17738, &mem_param_tmp_20890,
                             "mem_param_tmp_20890") != 0)
                return 1;
        }
        ext_17889 = ctx_param_ext_17719;
        ext_17888 = ctx_param_ext_17720;
        ext_17887 = ctx_param_ext_17721;
        ext_17886 = ctx_param_ext_17722;
        ext_17885 = ctx_param_ext_17724;
        ext_17884 = ctx_param_ext_17725;
        ext_17883 = ctx_param_ext_17726;
        ext_17882 = ctx_param_ext_17727;
        ext_17881 = ctx_param_ext_17729;
        ext_17880 = ctx_param_ext_17730;
        ext_17879 = ctx_param_ext_17731;
        ext_17878 = ctx_param_ext_17732;
        ext_17877 = ctx_param_ext_17734;
        ext_17876 = ctx_param_ext_17735;
        ext_17875 = ctx_param_ext_17736;
        ext_17874 = ctx_param_ext_17737;
        if (memblock_set(ctx, &ext_mem_17873, &mem_param_17723,
                         "mem_param_17723") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17872, &mem_param_17728,
                         "mem_param_17728") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17871, &mem_param_17733,
                         "mem_param_17733") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_17870, &mem_param_17738,
                         "mem_param_17738") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17137 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17519.mem + ext_17534 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17519, "ext_mem_17519") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17141 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17518.mem + ext_17530 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17518, "ext_mem_17518") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17145 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17696.mem + ext_17711 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17696, "ext_mem_17696") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17149 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17695.mem + ext_17707 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17695, "ext_mem_17695") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17153 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17873.mem + ext_17888 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17873, "ext_mem_17873") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_17157 + i_16435 * m_11007 * (int64_t) 4,
                    ext_mem_17872.mem + ext_17884 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_17872, "ext_mem_17872") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_17220, "mem_17220") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17223, "mem_17223") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17226, "mem_17226") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17316, "mem_17316") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17331, "mem_17331") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17346, "mem_17346") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17361, "mem_17361") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17364, "mem_17364") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17538, "mem_17538") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17541, "mem_17541") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17715, "mem_17715") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_17718, "mem_17718") != 0)
        return 1;
    
    bool loop_cond_14688 = slt64((int64_t) 1, n_11006);
    bool r_14689;
    int32_t r_14690;
    int64_t r_14691;
    bool loop_while_14692;
    int32_t r_14693;
    int64_t n_14694;
    
    loop_while_14692 = loop_cond_14688;
    r_14693 = 0;
    n_14694 = n_11006;
    while (loop_while_14692) {
        int64_t n_14695 = sdiv64(n_14694, (int64_t) 2);
        int32_t r_14696 = add32(1, r_14693);
        bool loop_cond_14697 = slt64((int64_t) 1, n_14695);
        bool loop_while_tmp_20904 = loop_cond_14697;
        int32_t r_tmp_20905 = r_14696;
        int64_t n_tmp_20906 = n_14695;
        
        loop_while_14692 = loop_while_tmp_20904;
        r_14693 = r_tmp_20905;
        n_14694 = n_tmp_20906;
    }
    r_14689 = loop_while_14692;
    r_14690 = r_14693;
    r_14691 = n_14694;
    
    int64_t i32_res_14816 = sext_i32_i64(r_14690);
    int64_t iota_arg_14817 = sdiv64(n_11006, (int64_t) 2);
    bool bounds_invalid_upwards_14818 = slt64(iota_arg_14817, (int64_t) 0);
    bool valid_14819 = !bounds_invalid_upwards_14818;
    bool range_valid_c_14820;
    
    if (!valid_14819) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) iota_arg_14817, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:34:14-34\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_14822 = slt64(i32_res_14816, (int64_t) 0);
    bool valid_14823 = !bounds_invalid_upwards_14822;
    bool range_valid_c_14824;
    
    if (!valid_14823) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14816, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17938 = (int64_t) 4 * i32_res_14816;
    int64_t bytes_17939 = smax64((int64_t) 0, binop_y_17938);
    
    if (mem_17940_cached_sizze_21502 < bytes_17939) {
        err = lexical_realloc(&ctx->error, &mem_17940,
                              &mem_17940_cached_sizze_21502, bytes_17939);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16938 = 0; i_16938 < r_14690; i_16938++) {
        int64_t i_16444 = sext_i32_i64(i_16938);
        bool nonnegative_14831 = sle32(0, i_16938);
        bool nonzzero_cert_14832;
        
        if (!nonnegative_14831) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14833 = shl32(1, i_16938);
        
        ((int32_t *) mem_17940)[i_16444] = defunc_0_f_res_14833;
    }
    
    bool loop_nonempty_14834 = slt64((int64_t) 0, i32_res_14816);
    int32_t i64_res_14835 = sext_i64_i32(n_11006);
    int32_t y_14836 = sdiv32(i64_res_14835, 2);
    int64_t conc_tmp_14837 = iota_arg_14817 + iota_arg_14817;
    bool dim_match_14838 = n_11006 == conc_tmp_14837;
    bool loop_not_taken_14839 = !loop_nonempty_14834;
    bool protect_assert_disj_14840 = dim_match_14838 || loop_not_taken_14839;
    bool empty_or_match_cert_14841;
    
    if (!protect_assert_disj_14840) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14842;
    
    if (!protect_assert_disj_14840) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_15761;
    int32_t r_15762;
    int64_t r_15763;
    bool loop_while_15764;
    int32_t r_15765;
    int64_t n_15766;
    
    loop_while_15764 = loop_cond_14688;
    r_15765 = 0;
    n_15766 = n_11006;
    while (loop_while_15764) {
        int64_t n_15767 = sdiv64(n_15766, (int64_t) 2);
        int32_t r_15768 = add32(1, r_15765);
        bool loop_cond_15769 = slt64((int64_t) 1, n_15767);
        bool loop_while_tmp_20908 = loop_cond_15769;
        int32_t r_tmp_20909 = r_15768;
        int64_t n_tmp_20910 = n_15767;
        
        loop_while_15764 = loop_while_tmp_20908;
        r_15765 = r_tmp_20909;
        n_15766 = n_tmp_20910;
    }
    r_15761 = loop_while_15764;
    r_15762 = r_15765;
    r_15763 = n_15766;
    
    int64_t i32_res_15888 = sext_i32_i64(r_15762);
    bool loop_nonempty_15906 = slt64((int64_t) 0, i32_res_15888);
    bool loop_not_taken_15911 = !loop_nonempty_15906;
    bool protect_assert_disj_15912 = dim_match_14838 || loop_not_taken_15911;
    bool empty_or_match_cert_15914;
    
    if (!protect_assert_disj_15912) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15913;
    
    if (!protect_assert_disj_15912) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15894 = slt64(i32_res_15888, (int64_t) 0);
    bool valid_15895 = !bounds_invalid_upwards_15894;
    bool range_valid_c_15896;
    
    if (!valid_15895) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15888, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17953 = (int64_t) 4 * i32_res_15888;
    int64_t bytes_17954 = smax64((int64_t) 0, binop_y_17953);
    
    if (mem_17955_cached_sizze_21503 < bytes_17954) {
        err = lexical_realloc(&ctx->error, &mem_17955,
                              &mem_17955_cached_sizze_21503, bytes_17954);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16939 = 0; i_16939 < r_15762; i_16939++) {
        int64_t i_16448 = sext_i32_i64(i_16939);
        bool nonnegative_15903 = sle32(0, i_16939);
        bool nonzzero_cert_15904;
        
        if (!nonnegative_15903) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15905 = shl32(1, i_16939);
        
        ((int32_t *) mem_17955)[i_16448] = defunc_0_f_res_15905;
    }
    
    bool r_15225;
    int32_t r_15226;
    int64_t r_15227;
    bool loop_while_15228;
    int32_t r_15229;
    int64_t n_15230;
    
    loop_while_15228 = loop_cond_14688;
    r_15229 = 0;
    n_15230 = n_11006;
    while (loop_while_15228) {
        int64_t n_15231 = sdiv64(n_15230, (int64_t) 2);
        int32_t r_15232 = add32(1, r_15229);
        bool loop_cond_15233 = slt64((int64_t) 1, n_15231);
        bool loop_while_tmp_20912 = loop_cond_15233;
        int32_t r_tmp_20913 = r_15232;
        int64_t n_tmp_20914 = n_15231;
        
        loop_while_15228 = loop_while_tmp_20912;
        r_15229 = r_tmp_20913;
        n_15230 = n_tmp_20914;
    }
    r_15225 = loop_while_15228;
    r_15226 = r_15229;
    r_15227 = n_15230;
    
    int64_t i32_res_15352 = sext_i32_i64(r_15226);
    bool loop_nonempty_15370 = slt64((int64_t) 0, i32_res_15352);
    bool loop_not_taken_15375 = !loop_nonempty_15370;
    bool protect_assert_disj_15376 = dim_match_14838 || loop_not_taken_15375;
    bool empty_or_match_cert_15378;
    
    if (!protect_assert_disj_15376) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15377;
    
    if (!protect_assert_disj_15376) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #4  sample_programs/fft.fut:38:18-38\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15358 = slt64(i32_res_15352, (int64_t) 0);
    bool valid_15359 = !bounds_invalid_upwards_15358;
    bool range_valid_c_15360;
    
    if (!valid_15359) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15352, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_17968 = (int64_t) 4 * i32_res_15352;
    int64_t bytes_17969 = smax64((int64_t) 0, binop_y_17968);
    
    if (mem_17970_cached_sizze_21504 < bytes_17969) {
        err = lexical_realloc(&ctx->error, &mem_17970,
                              &mem_17970_cached_sizze_21504, bytes_17969);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16940 = 0; i_16940 < r_15226; i_16940++) {
        int64_t i_16452 = sext_i32_i64(i_16940);
        bool nonnegative_15367 = sle32(0, i_16940);
        bool nonzzero_cert_15368;
        
        if (!nonnegative_15367) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15369 = shl32(1, i_16940);
        
        ((int32_t *) mem_17970)[i_16452] = defunc_0_f_res_15369;
    }
    
    int64_t binop_x_17983 = n_11006 * m_11007;
    int64_t binop_y_17984 = (int64_t) 4 * binop_x_17983;
    int64_t bytes_17985 = smax64((int64_t) 0, binop_y_17984);
    
    if (mem_17986_cached_sizze_21505 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17986,
                              &mem_17986_cached_sizze_21505, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17990_cached_sizze_21506 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17990,
                              &mem_17990_cached_sizze_21506, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17994_cached_sizze_21507 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17994,
                              &mem_17994_cached_sizze_21507, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_17998_cached_sizze_21508 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_17998,
                              &mem_17998_cached_sizze_21508, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18002_cached_sizze_21509 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_18002,
                              &mem_18002_cached_sizze_21509, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18006_cached_sizze_21510 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_18006,
                              &mem_18006_cached_sizze_21510, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18067 = (int64_t) 4 * n_11006;
    int64_t bytes_18068 = smax64((int64_t) 0, binop_y_18067);
    
    if (memblock_alloc(ctx, &mem_18069, bytes_18068, "mem_18069")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18072, bytes_18068, "mem_18072")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18075, bytes_18068, "mem_18075")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18078, bytes_18068, "mem_18078")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18081, bytes_18068, "mem_18081")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18084, bytes_18068, "mem_18084")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18087, bytes_18068, "mem_18087")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18090, bytes_18068, "mem_18090")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18119 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18120 = smax64((int64_t) 0, binop_y_18119);
    
    if (mem_18121_cached_sizze_21511 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18121,
                              &mem_18121_cached_sizze_21511, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18134 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18135 = smax64((int64_t) 0, binop_y_18134);
    
    if (mem_18136_cached_sizze_21512 < bytes_18135) {
        err = lexical_realloc(&ctx->error, &mem_18136,
                              &mem_18136_cached_sizze_21512, bytes_18135);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18139_cached_sizze_21513 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18139,
                              &mem_18139_cached_sizze_21513, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18142_cached_sizze_21514 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18142,
                              &mem_18142_cached_sizze_21514, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18145_cached_sizze_21515 < bytes_18135) {
        err = lexical_realloc(&ctx->error, &mem_18145,
                              &mem_18145_cached_sizze_21515, bytes_18135);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18148_cached_sizze_21516 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18148,
                              &mem_18148_cached_sizze_21516, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18151_cached_sizze_21517 < bytes_18120) {
        err = lexical_realloc(&ctx->error, &mem_18151,
                              &mem_18151_cached_sizze_21517, bytes_18120);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18266, bytes_18068, "mem_18266")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18269, bytes_18068, "mem_18269")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18298 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18299 = smax64((int64_t) 0, binop_y_18298);
    
    if (mem_18300_cached_sizze_21518 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18300,
                              &mem_18300_cached_sizze_21518, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18313 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18314 = smax64((int64_t) 0, binop_y_18313);
    
    if (mem_18315_cached_sizze_21519 < bytes_18314) {
        err = lexical_realloc(&ctx->error, &mem_18315,
                              &mem_18315_cached_sizze_21519, bytes_18314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18318_cached_sizze_21520 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18318,
                              &mem_18318_cached_sizze_21520, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18321_cached_sizze_21521 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18321,
                              &mem_18321_cached_sizze_21521, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18324_cached_sizze_21522 < bytes_18314) {
        err = lexical_realloc(&ctx->error, &mem_18324,
                              &mem_18324_cached_sizze_21522, bytes_18314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18327_cached_sizze_21523 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18327,
                              &mem_18327_cached_sizze_21523, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18330_cached_sizze_21524 < bytes_18299) {
        err = lexical_realloc(&ctx->error, &mem_18330,
                              &mem_18330_cached_sizze_21524, bytes_18299);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18445, bytes_18068, "mem_18445")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18448, bytes_18068, "mem_18448")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18477 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_18478 = smax64((int64_t) 0, binop_y_18477);
    
    if (mem_18479_cached_sizze_21525 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18479,
                              &mem_18479_cached_sizze_21525, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18492 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_18493 = smax64((int64_t) 0, binop_y_18492);
    
    if (mem_18494_cached_sizze_21526 < bytes_18493) {
        err = lexical_realloc(&ctx->error, &mem_18494,
                              &mem_18494_cached_sizze_21526, bytes_18493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18497_cached_sizze_21527 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18497,
                              &mem_18497_cached_sizze_21527, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18500_cached_sizze_21528 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18500,
                              &mem_18500_cached_sizze_21528, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18503_cached_sizze_21529 < bytes_18493) {
        err = lexical_realloc(&ctx->error, &mem_18503,
                              &mem_18503_cached_sizze_21529, bytes_18493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18506_cached_sizze_21530 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18506,
                              &mem_18506_cached_sizze_21530, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18509_cached_sizze_21531 < bytes_18478) {
        err = lexical_realloc(&ctx->error, &mem_18509,
                              &mem_18509_cached_sizze_21531, bytes_18478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16574 = 0; i_16574 < m_11007; i_16574++) {
        for (int64_t i_20922 = 0; i_20922 < n_11006; i_20922++) {
            float tmp_20923;
            
            tmp_20923 = ((float *) mem_17153)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20922 * m_11007];
            ((float *) mem_18069.mem)[i_20922] = tmp_20923;
        }
        for (int64_t i_20924 = 0; i_20924 < n_11006; i_20924++) {
            float tmp_20925;
            
            tmp_20925 = ((float *) mem_17157)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20924 * m_11007];
            ((float *) mem_18072.mem)[i_20924] = tmp_20925;
        }
        for (int64_t i_20926 = 0; i_20926 < n_11006; i_20926++) {
            float tmp_20927;
            
            tmp_20927 = ((float *) mem_17145)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20926 * m_11007];
            ((float *) mem_18075.mem)[i_20926] = tmp_20927;
        }
        for (int64_t i_20928 = 0; i_20928 < n_11006; i_20928++) {
            float tmp_20929;
            
            tmp_20929 = ((float *) mem_17149)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20928 * m_11007];
            ((float *) mem_18078.mem)[i_20928] = tmp_20929;
        }
        for (int64_t i_20930 = 0; i_20930 < n_11006; i_20930++) {
            float tmp_20931;
            
            tmp_20931 = ((float *) mem_17137)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20930 * m_11007];
            ((float *) mem_18081.mem)[i_20930] = tmp_20931;
        }
        for (int64_t i_20932 = 0; i_20932 < n_11006; i_20932++) {
            float tmp_20933;
            
            tmp_20933 = ((float *) mem_17141)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20932 * m_11007];
            ((float *) mem_18084.mem)[i_20932] = tmp_20933;
        }
        for (int64_t i_20934 = 0; i_20934 < n_11006; i_20934++) {
            float tmp_20935;
            
            tmp_20935 = ((float *) mem_17153)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20934 * m_11007];
            ((float *) mem_18087.mem)[i_20934] = tmp_20935;
        }
        for (int64_t i_20936 = 0; i_20936 < n_11006; i_20936++) {
            float tmp_20937;
            
            tmp_20937 = ((float *) mem_17157)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20936 * m_11007];
            ((float *) mem_18090.mem)[i_20936] = tmp_20937;
        }
        
        int64_t ext_18263;
        int64_t ext_18262;
        int64_t ext_18261;
        int64_t ext_18260;
        int64_t ext_18259;
        int64_t ext_18258;
        int64_t ext_18257;
        int64_t ext_18256;
        int64_t ext_18255;
        int64_t ext_18254;
        int64_t ext_18253;
        int64_t ext_18252;
        int64_t ext_18251;
        int64_t ext_18250;
        int64_t ext_18249;
        int64_t ext_18248;
        int64_t ctx_param_ext_18091;
        int64_t ctx_param_ext_18092;
        int64_t ctx_param_ext_18093;
        int64_t ctx_param_ext_18094;
        int64_t ctx_param_ext_18096;
        int64_t ctx_param_ext_18097;
        int64_t ctx_param_ext_18098;
        int64_t ctx_param_ext_18099;
        int64_t ctx_param_ext_18101;
        int64_t ctx_param_ext_18102;
        int64_t ctx_param_ext_18103;
        int64_t ctx_param_ext_18104;
        int64_t ctx_param_ext_18106;
        int64_t ctx_param_ext_18107;
        int64_t ctx_param_ext_18108;
        int64_t ctx_param_ext_18109;
        
        ctx_param_ext_18091 = n_11006;
        ctx_param_ext_18092 = (int64_t) 0;
        ctx_param_ext_18093 = (int64_t) 1;
        ctx_param_ext_18094 = n_11006;
        ctx_param_ext_18096 = n_11006;
        ctx_param_ext_18097 = (int64_t) 0;
        ctx_param_ext_18098 = (int64_t) 1;
        ctx_param_ext_18099 = n_11006;
        ctx_param_ext_18101 = n_11006;
        ctx_param_ext_18102 = (int64_t) 0;
        ctx_param_ext_18103 = (int64_t) 1;
        ctx_param_ext_18104 = n_11006;
        ctx_param_ext_18106 = n_11006;
        ctx_param_ext_18107 = (int64_t) 0;
        ctx_param_ext_18108 = (int64_t) 1;
        ctx_param_ext_18109 = n_11006;
        if (memblock_set(ctx, &mem_param_18095, &mem_18069, "mem_18069") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18100, &mem_18072, "mem_18072") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18105, &mem_18087, "mem_18087") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18110, &mem_18090, "mem_18090") != 0)
            return 1;
        
        int32_t ns_14858;
        
        for (int64_t i_14853 = 0; i_14853 < i32_res_14816; i_14853++) {
            ns_14858 = ((int32_t *) mem_17940)[i_14853];
            for (int64_t i_16456 = 0; i_16456 < iota_arg_14817; i_16456++) {
                int32_t defunc_0_f_res_14861 = sext_i64_i32(i_16456);
                
                ((int32_t *) mem_18121)[i_16456] = defunc_0_f_res_14861;
            }
            
            int32_t i32_arg_14862 = mul32(2, ns_14858);
            float i32_res_14863 = sitofp_i32_f32(i32_arg_14862);
            bool zzero_14864 = ns_14858 == 0;
            bool nonzzero_14865 = !zzero_14864;
            bool nonzzero_cert_14866;
            
            if (!nonzzero_14865) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16470 = 0; i_16470 < iota_arg_14817; i_16470++) {
                int32_t x_14873;
                
                x_14873 = ((int32_t *) mem_18121)[i_16470];
                
                int32_t i32_arg_14874 = smod32(x_14873, ns_14858);
                float i32_res_14875 = sitofp_i32_f32(i32_arg_14874);
                float zt_res_14876 = -6.2831855F * i32_res_14875;
                float zs_res_14877 = zt_res_14876 / i32_res_14863;
                int64_t j_14878 = sext_i32_i64(x_14873);
                bool x_14879 = sle64((int64_t) 0, j_14878);
                bool y_14880 = slt64(j_14878, n_11006);
                bool bounds_check_14881 = x_14879 && y_14880;
                bool index_certs_14882;
                
                if (!bounds_check_14881) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_14878,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_14883;
                
                defunc_0_f_res_14883 =
                    ((float *) mem_param_18095.mem)[ctx_param_ext_18092 +
                                                    j_14878 *
                                                    ctx_param_ext_18093];
                
                float defunc_0_f_res_14884;
                
                defunc_0_f_res_14884 =
                    ((float *) mem_param_18100.mem)[ctx_param_ext_18097 +
                                                    j_14878 *
                                                    ctx_param_ext_18098];
                
                float sin_res_14885;
                
                sin_res_14885 = futrts_sin32(zs_res_14877);
                
                float cos_res_14886;
                
                cos_res_14886 = futrts_cos32(zs_res_14877);
                
                int32_t i_14887 = add32(y_14836, x_14873);
                int64_t i_14888 = sext_i32_i64(i_14887);
                bool x_14889 = sle64((int64_t) 0, i_14888);
                bool y_14890 = slt64(i_14888, n_11006);
                bool bounds_check_14891 = x_14889 && y_14890;
                bool index_certs_14892;
                
                if (!bounds_check_14891) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_14888,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_14893;
                
                zt_arg_14893 =
                    ((float *) mem_param_18095.mem)[ctx_param_ext_18092 +
                                                    i_14888 *
                                                    ctx_param_ext_18093];
                
                float zt_arg_14894;
                
                zt_arg_14894 =
                    ((float *) mem_param_18100.mem)[ctx_param_ext_18097 +
                                                    i_14888 *
                                                    ctx_param_ext_18098];
                
                float zt_res_14895 = sin_res_14885 * zt_arg_14894;
                float zt_res_14896 = cos_res_14886 * zt_arg_14893;
                float zm_res_14897 = zt_res_14896 - zt_res_14895;
                float zt_res_14898 = sin_res_14885 * zt_arg_14893;
                float zt_res_14899 = cos_res_14886 * zt_arg_14894;
                float zp_res_14900 = zt_res_14898 + zt_res_14899;
                float zp_res_14901 = defunc_0_f_res_14883 + zm_res_14897;
                float zp_res_14902 = defunc_0_f_res_14884 + zp_res_14900;
                float zm_res_14903 = defunc_0_f_res_14883 - zm_res_14897;
                float zm_res_14904 = defunc_0_f_res_14884 - zp_res_14900;
                int32_t x_14905 = sdiv32(x_14873, ns_14858);
                int32_t x_14906 = mul32(ns_14858, x_14905);
                int32_t x_14907 = mul32(2, x_14906);
                int32_t idxD_14908 = add32(i32_arg_14874, x_14907);
                int64_t i32_res_14909 = sext_i32_i64(idxD_14908);
                int32_t i32_arg_14910 = add32(ns_14858, idxD_14908);
                int64_t i32_res_14911 = sext_i32_i64(i32_arg_14910);
                
                ((int64_t *) mem_18136)[i_16470] = i32_res_14909;
                ((float *) mem_18139)[i_16470] = zp_res_14901;
                ((float *) mem_18142)[i_16470] = zp_res_14902;
                ((int64_t *) mem_18145)[i_16470] = i32_res_14911;
                ((float *) mem_18148)[i_16470] = zm_res_14903;
                ((float *) mem_18151)[i_16470] = zm_res_14904;
            }
            for (int64_t write_iter_16477 = 0; write_iter_16477 <
                 iota_arg_14817; write_iter_16477++) {
                int64_t write_iv_16480;
                
                write_iv_16480 = ((int64_t *) mem_18136)[write_iter_16477];
                
                int64_t write_iv_16483;
                
                write_iv_16483 = ((int64_t *) mem_18145)[write_iter_16477];
                if (sle64((int64_t) 0, write_iv_16480) && slt64(write_iv_16480,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18105.mem + (ctx_param_ext_18102 +
                                                       ctx_param_ext_18103 *
                                                       write_iv_16480) *
                                (int64_t) 4, mem_18139 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16483) && slt64(write_iv_16483,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18105.mem + (ctx_param_ext_18102 +
                                                       ctx_param_ext_18103 *
                                                       write_iv_16483) *
                                (int64_t) 4, mem_18148 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16480) && slt64(write_iv_16480,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18110.mem + (ctx_param_ext_18107 +
                                                       ctx_param_ext_18108 *
                                                       write_iv_16480) *
                                (int64_t) 4, mem_18142 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16483) && slt64(write_iv_16483,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18110.mem + (ctx_param_ext_18107 +
                                                       ctx_param_ext_18108 *
                                                       write_iv_16483) *
                                (int64_t) 4, mem_18151 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16477) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20938 = ctx_param_ext_18101;
            int64_t ctx_param_ext_tmp_20939 = ctx_param_ext_18102;
            int64_t ctx_param_ext_tmp_20940 = ctx_param_ext_18103;
            int64_t ctx_param_ext_tmp_20941 = ctx_param_ext_18104;
            int64_t ctx_param_ext_tmp_20942 = ctx_param_ext_18106;
            int64_t ctx_param_ext_tmp_20943 = ctx_param_ext_18107;
            int64_t ctx_param_ext_tmp_20944 = ctx_param_ext_18108;
            int64_t ctx_param_ext_tmp_20945 = ctx_param_ext_18109;
            int64_t ctx_param_ext_tmp_20946 = ctx_param_ext_18091;
            int64_t ctx_param_ext_tmp_20947 = ctx_param_ext_18092;
            int64_t ctx_param_ext_tmp_20948 = ctx_param_ext_18093;
            int64_t ctx_param_ext_tmp_20949 = ctx_param_ext_18094;
            int64_t ctx_param_ext_tmp_20950 = ctx_param_ext_18096;
            int64_t ctx_param_ext_tmp_20951 = ctx_param_ext_18097;
            int64_t ctx_param_ext_tmp_20952 = ctx_param_ext_18098;
            int64_t ctx_param_ext_tmp_20953 = ctx_param_ext_18099;
            
            if (memblock_set(ctx, &mem_param_tmp_20954, &mem_param_18105,
                             "mem_param_18105") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20955, &mem_param_18110,
                             "mem_param_18110") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20956, &mem_param_18095,
                             "mem_param_18095") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20957, &mem_param_18100,
                             "mem_param_18100") != 0)
                return 1;
            ctx_param_ext_18091 = ctx_param_ext_tmp_20938;
            ctx_param_ext_18092 = ctx_param_ext_tmp_20939;
            ctx_param_ext_18093 = ctx_param_ext_tmp_20940;
            ctx_param_ext_18094 = ctx_param_ext_tmp_20941;
            ctx_param_ext_18096 = ctx_param_ext_tmp_20942;
            ctx_param_ext_18097 = ctx_param_ext_tmp_20943;
            ctx_param_ext_18098 = ctx_param_ext_tmp_20944;
            ctx_param_ext_18099 = ctx_param_ext_tmp_20945;
            ctx_param_ext_18101 = ctx_param_ext_tmp_20946;
            ctx_param_ext_18102 = ctx_param_ext_tmp_20947;
            ctx_param_ext_18103 = ctx_param_ext_tmp_20948;
            ctx_param_ext_18104 = ctx_param_ext_tmp_20949;
            ctx_param_ext_18106 = ctx_param_ext_tmp_20950;
            ctx_param_ext_18107 = ctx_param_ext_tmp_20951;
            ctx_param_ext_18108 = ctx_param_ext_tmp_20952;
            ctx_param_ext_18109 = ctx_param_ext_tmp_20953;
            if (memblock_set(ctx, &mem_param_18095, &mem_param_tmp_20954,
                             "mem_param_tmp_20954") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18100, &mem_param_tmp_20955,
                             "mem_param_tmp_20955") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18105, &mem_param_tmp_20956,
                             "mem_param_tmp_20956") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18110, &mem_param_tmp_20957,
                             "mem_param_tmp_20957") != 0)
                return 1;
        }
        ext_18263 = ctx_param_ext_18091;
        ext_18262 = ctx_param_ext_18092;
        ext_18261 = ctx_param_ext_18093;
        ext_18260 = ctx_param_ext_18094;
        ext_18259 = ctx_param_ext_18096;
        ext_18258 = ctx_param_ext_18097;
        ext_18257 = ctx_param_ext_18098;
        ext_18256 = ctx_param_ext_18099;
        ext_18255 = ctx_param_ext_18101;
        ext_18254 = ctx_param_ext_18102;
        ext_18253 = ctx_param_ext_18103;
        ext_18252 = ctx_param_ext_18104;
        ext_18251 = ctx_param_ext_18106;
        ext_18250 = ctx_param_ext_18107;
        ext_18249 = ctx_param_ext_18108;
        ext_18248 = ctx_param_ext_18109;
        if (memblock_set(ctx, &ext_mem_18247, &mem_param_18095,
                         "mem_param_18095") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18246, &mem_param_18100,
                         "mem_param_18100") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18245, &mem_param_18105,
                         "mem_param_18105") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18244, &mem_param_18110,
                         "mem_param_18110") != 0)
            return 1;
        for (int64_t i_20971 = 0; i_20971 < n_11006; i_20971++) {
            float tmp_20972;
            
            tmp_20972 = ((float *) mem_17145)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20971 * m_11007];
            ((float *) mem_18266.mem)[i_20971] = tmp_20972;
        }
        for (int64_t i_20973 = 0; i_20973 < n_11006; i_20973++) {
            float tmp_20974;
            
            tmp_20974 = ((float *) mem_17149)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_20973 * m_11007];
            ((float *) mem_18269.mem)[i_20973] = tmp_20974;
        }
        
        int64_t ext_18442;
        int64_t ext_18441;
        int64_t ext_18440;
        int64_t ext_18439;
        int64_t ext_18438;
        int64_t ext_18437;
        int64_t ext_18436;
        int64_t ext_18435;
        int64_t ext_18434;
        int64_t ext_18433;
        int64_t ext_18432;
        int64_t ext_18431;
        int64_t ext_18430;
        int64_t ext_18429;
        int64_t ext_18428;
        int64_t ext_18427;
        int64_t ctx_param_ext_18270;
        int64_t ctx_param_ext_18271;
        int64_t ctx_param_ext_18272;
        int64_t ctx_param_ext_18273;
        int64_t ctx_param_ext_18275;
        int64_t ctx_param_ext_18276;
        int64_t ctx_param_ext_18277;
        int64_t ctx_param_ext_18278;
        int64_t ctx_param_ext_18280;
        int64_t ctx_param_ext_18281;
        int64_t ctx_param_ext_18282;
        int64_t ctx_param_ext_18283;
        int64_t ctx_param_ext_18285;
        int64_t ctx_param_ext_18286;
        int64_t ctx_param_ext_18287;
        int64_t ctx_param_ext_18288;
        
        ctx_param_ext_18270 = n_11006;
        ctx_param_ext_18271 = (int64_t) 0;
        ctx_param_ext_18272 = (int64_t) 1;
        ctx_param_ext_18273 = n_11006;
        ctx_param_ext_18275 = n_11006;
        ctx_param_ext_18276 = (int64_t) 0;
        ctx_param_ext_18277 = (int64_t) 1;
        ctx_param_ext_18278 = n_11006;
        ctx_param_ext_18280 = n_11006;
        ctx_param_ext_18281 = (int64_t) 0;
        ctx_param_ext_18282 = (int64_t) 1;
        ctx_param_ext_18283 = n_11006;
        ctx_param_ext_18285 = n_11006;
        ctx_param_ext_18286 = (int64_t) 0;
        ctx_param_ext_18287 = (int64_t) 1;
        ctx_param_ext_18288 = n_11006;
        if (memblock_set(ctx, &mem_param_18274, &mem_18075, "mem_18075") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18279, &mem_18078, "mem_18078") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18284, &mem_18266, "mem_18266") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18289, &mem_18269, "mem_18269") != 0)
            return 1;
        
        int32_t ns_15394;
        
        for (int64_t i_15389 = 0; i_15389 < i32_res_15352; i_15389++) {
            ns_15394 = ((int32_t *) mem_17970)[i_15389];
            for (int64_t i_16492 = 0; i_16492 < iota_arg_14817; i_16492++) {
                int32_t defunc_0_f_res_15397 = sext_i64_i32(i_16492);
                
                ((int32_t *) mem_18300)[i_16492] = defunc_0_f_res_15397;
            }
            
            int32_t i32_arg_15398 = mul32(2, ns_15394);
            float i32_res_15399 = sitofp_i32_f32(i32_arg_15398);
            bool zzero_15400 = ns_15394 == 0;
            bool nonzzero_15401 = !zzero_15400;
            bool nonzzero_cert_15402;
            
            if (!nonzzero_15401) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16506 = 0; i_16506 < iota_arg_14817; i_16506++) {
                int32_t x_15409;
                
                x_15409 = ((int32_t *) mem_18300)[i_16506];
                
                int32_t i32_arg_15410 = smod32(x_15409, ns_15394);
                float i32_res_15411 = sitofp_i32_f32(i32_arg_15410);
                float zt_res_15412 = -6.2831855F * i32_res_15411;
                float zs_res_15413 = zt_res_15412 / i32_res_15399;
                int64_t j_15414 = sext_i32_i64(x_15409);
                bool x_15415 = sle64((int64_t) 0, j_15414);
                bool y_15416 = slt64(j_15414, n_11006);
                bool bounds_check_15417 = x_15415 && y_15416;
                bool index_certs_15418;
                
                if (!bounds_check_15417) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15414,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15419;
                
                defunc_0_f_res_15419 =
                    ((float *) mem_param_18274.mem)[ctx_param_ext_18271 +
                                                    j_15414 *
                                                    ctx_param_ext_18272];
                
                float defunc_0_f_res_15420;
                
                defunc_0_f_res_15420 =
                    ((float *) mem_param_18279.mem)[ctx_param_ext_18276 +
                                                    j_15414 *
                                                    ctx_param_ext_18277];
                
                float sin_res_15421;
                
                sin_res_15421 = futrts_sin32(zs_res_15413);
                
                float cos_res_15422;
                
                cos_res_15422 = futrts_cos32(zs_res_15413);
                
                int32_t i_15423 = add32(y_14836, x_15409);
                int64_t i_15424 = sext_i32_i64(i_15423);
                bool x_15425 = sle64((int64_t) 0, i_15424);
                bool y_15426 = slt64(i_15424, n_11006);
                bool bounds_check_15427 = x_15425 && y_15426;
                bool index_certs_15428;
                
                if (!bounds_check_15427) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15424,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15429;
                
                zt_arg_15429 =
                    ((float *) mem_param_18274.mem)[ctx_param_ext_18271 +
                                                    i_15424 *
                                                    ctx_param_ext_18272];
                
                float zt_arg_15430;
                
                zt_arg_15430 =
                    ((float *) mem_param_18279.mem)[ctx_param_ext_18276 +
                                                    i_15424 *
                                                    ctx_param_ext_18277];
                
                float zt_res_15431 = sin_res_15421 * zt_arg_15430;
                float zt_res_15432 = cos_res_15422 * zt_arg_15429;
                float zm_res_15433 = zt_res_15432 - zt_res_15431;
                float zt_res_15434 = sin_res_15421 * zt_arg_15429;
                float zt_res_15435 = cos_res_15422 * zt_arg_15430;
                float zp_res_15436 = zt_res_15434 + zt_res_15435;
                float zp_res_15437 = defunc_0_f_res_15419 + zm_res_15433;
                float zp_res_15438 = defunc_0_f_res_15420 + zp_res_15436;
                float zm_res_15439 = defunc_0_f_res_15419 - zm_res_15433;
                float zm_res_15440 = defunc_0_f_res_15420 - zp_res_15436;
                int32_t x_15441 = sdiv32(x_15409, ns_15394);
                int32_t x_15442 = mul32(ns_15394, x_15441);
                int32_t x_15443 = mul32(2, x_15442);
                int32_t idxD_15444 = add32(i32_arg_15410, x_15443);
                int64_t i32_res_15445 = sext_i32_i64(idxD_15444);
                int32_t i32_arg_15446 = add32(ns_15394, idxD_15444);
                int64_t i32_res_15447 = sext_i32_i64(i32_arg_15446);
                
                ((int64_t *) mem_18315)[i_16506] = i32_res_15445;
                ((float *) mem_18318)[i_16506] = zp_res_15437;
                ((float *) mem_18321)[i_16506] = zp_res_15438;
                ((int64_t *) mem_18324)[i_16506] = i32_res_15447;
                ((float *) mem_18327)[i_16506] = zm_res_15439;
                ((float *) mem_18330)[i_16506] = zm_res_15440;
            }
            for (int64_t write_iter_16513 = 0; write_iter_16513 <
                 iota_arg_14817; write_iter_16513++) {
                int64_t write_iv_16516;
                
                write_iv_16516 = ((int64_t *) mem_18315)[write_iter_16513];
                
                int64_t write_iv_16519;
                
                write_iv_16519 = ((int64_t *) mem_18324)[write_iter_16513];
                if (sle64((int64_t) 0, write_iv_16516) && slt64(write_iv_16516,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18284.mem + (ctx_param_ext_18281 +
                                                       ctx_param_ext_18282 *
                                                       write_iv_16516) *
                                (int64_t) 4, mem_18318 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16519) && slt64(write_iv_16519,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18284.mem + (ctx_param_ext_18281 +
                                                       ctx_param_ext_18282 *
                                                       write_iv_16519) *
                                (int64_t) 4, mem_18327 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16516) && slt64(write_iv_16516,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18289.mem + (ctx_param_ext_18286 +
                                                       ctx_param_ext_18287 *
                                                       write_iv_16516) *
                                (int64_t) 4, mem_18321 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16519) && slt64(write_iv_16519,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18289.mem + (ctx_param_ext_18286 +
                                                       ctx_param_ext_18287 *
                                                       write_iv_16519) *
                                (int64_t) 4, mem_18330 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16513) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_20975 = ctx_param_ext_18280;
            int64_t ctx_param_ext_tmp_20976 = ctx_param_ext_18281;
            int64_t ctx_param_ext_tmp_20977 = ctx_param_ext_18282;
            int64_t ctx_param_ext_tmp_20978 = ctx_param_ext_18283;
            int64_t ctx_param_ext_tmp_20979 = ctx_param_ext_18285;
            int64_t ctx_param_ext_tmp_20980 = ctx_param_ext_18286;
            int64_t ctx_param_ext_tmp_20981 = ctx_param_ext_18287;
            int64_t ctx_param_ext_tmp_20982 = ctx_param_ext_18288;
            int64_t ctx_param_ext_tmp_20983 = ctx_param_ext_18270;
            int64_t ctx_param_ext_tmp_20984 = ctx_param_ext_18271;
            int64_t ctx_param_ext_tmp_20985 = ctx_param_ext_18272;
            int64_t ctx_param_ext_tmp_20986 = ctx_param_ext_18273;
            int64_t ctx_param_ext_tmp_20987 = ctx_param_ext_18275;
            int64_t ctx_param_ext_tmp_20988 = ctx_param_ext_18276;
            int64_t ctx_param_ext_tmp_20989 = ctx_param_ext_18277;
            int64_t ctx_param_ext_tmp_20990 = ctx_param_ext_18278;
            
            if (memblock_set(ctx, &mem_param_tmp_20991, &mem_param_18284,
                             "mem_param_18284") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20992, &mem_param_18289,
                             "mem_param_18289") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20993, &mem_param_18274,
                             "mem_param_18274") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_20994, &mem_param_18279,
                             "mem_param_18279") != 0)
                return 1;
            ctx_param_ext_18270 = ctx_param_ext_tmp_20975;
            ctx_param_ext_18271 = ctx_param_ext_tmp_20976;
            ctx_param_ext_18272 = ctx_param_ext_tmp_20977;
            ctx_param_ext_18273 = ctx_param_ext_tmp_20978;
            ctx_param_ext_18275 = ctx_param_ext_tmp_20979;
            ctx_param_ext_18276 = ctx_param_ext_tmp_20980;
            ctx_param_ext_18277 = ctx_param_ext_tmp_20981;
            ctx_param_ext_18278 = ctx_param_ext_tmp_20982;
            ctx_param_ext_18280 = ctx_param_ext_tmp_20983;
            ctx_param_ext_18281 = ctx_param_ext_tmp_20984;
            ctx_param_ext_18282 = ctx_param_ext_tmp_20985;
            ctx_param_ext_18283 = ctx_param_ext_tmp_20986;
            ctx_param_ext_18285 = ctx_param_ext_tmp_20987;
            ctx_param_ext_18286 = ctx_param_ext_tmp_20988;
            ctx_param_ext_18287 = ctx_param_ext_tmp_20989;
            ctx_param_ext_18288 = ctx_param_ext_tmp_20990;
            if (memblock_set(ctx, &mem_param_18274, &mem_param_tmp_20991,
                             "mem_param_tmp_20991") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18279, &mem_param_tmp_20992,
                             "mem_param_tmp_20992") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18284, &mem_param_tmp_20993,
                             "mem_param_tmp_20993") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18289, &mem_param_tmp_20994,
                             "mem_param_tmp_20994") != 0)
                return 1;
        }
        ext_18442 = ctx_param_ext_18270;
        ext_18441 = ctx_param_ext_18271;
        ext_18440 = ctx_param_ext_18272;
        ext_18439 = ctx_param_ext_18273;
        ext_18438 = ctx_param_ext_18275;
        ext_18437 = ctx_param_ext_18276;
        ext_18436 = ctx_param_ext_18277;
        ext_18435 = ctx_param_ext_18278;
        ext_18434 = ctx_param_ext_18280;
        ext_18433 = ctx_param_ext_18281;
        ext_18432 = ctx_param_ext_18282;
        ext_18431 = ctx_param_ext_18283;
        ext_18430 = ctx_param_ext_18285;
        ext_18429 = ctx_param_ext_18286;
        ext_18428 = ctx_param_ext_18287;
        ext_18427 = ctx_param_ext_18288;
        if (memblock_set(ctx, &ext_mem_18426, &mem_param_18274,
                         "mem_param_18274") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18425, &mem_param_18279,
                         "mem_param_18279") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18424, &mem_param_18284,
                         "mem_param_18284") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18423, &mem_param_18289,
                         "mem_param_18289") != 0)
            return 1;
        for (int64_t i_21008 = 0; i_21008 < n_11006; i_21008++) {
            float tmp_21009;
            
            tmp_21009 = ((float *) mem_17137)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_21008 * m_11007];
            ((float *) mem_18445.mem)[i_21008] = tmp_21009;
        }
        for (int64_t i_21010 = 0; i_21010 < n_11006; i_21010++) {
            float tmp_21011;
            
            tmp_21011 = ((float *) mem_17141)[(int64_t) 0 + i_16574 *
                                              (int64_t) 1 + i_21010 * m_11007];
            ((float *) mem_18448.mem)[i_21010] = tmp_21011;
        }
        
        int64_t ext_18621;
        int64_t ext_18620;
        int64_t ext_18619;
        int64_t ext_18618;
        int64_t ext_18617;
        int64_t ext_18616;
        int64_t ext_18615;
        int64_t ext_18614;
        int64_t ext_18613;
        int64_t ext_18612;
        int64_t ext_18611;
        int64_t ext_18610;
        int64_t ext_18609;
        int64_t ext_18608;
        int64_t ext_18607;
        int64_t ext_18606;
        int64_t ctx_param_ext_18449;
        int64_t ctx_param_ext_18450;
        int64_t ctx_param_ext_18451;
        int64_t ctx_param_ext_18452;
        int64_t ctx_param_ext_18454;
        int64_t ctx_param_ext_18455;
        int64_t ctx_param_ext_18456;
        int64_t ctx_param_ext_18457;
        int64_t ctx_param_ext_18459;
        int64_t ctx_param_ext_18460;
        int64_t ctx_param_ext_18461;
        int64_t ctx_param_ext_18462;
        int64_t ctx_param_ext_18464;
        int64_t ctx_param_ext_18465;
        int64_t ctx_param_ext_18466;
        int64_t ctx_param_ext_18467;
        
        ctx_param_ext_18449 = n_11006;
        ctx_param_ext_18450 = (int64_t) 0;
        ctx_param_ext_18451 = (int64_t) 1;
        ctx_param_ext_18452 = n_11006;
        ctx_param_ext_18454 = n_11006;
        ctx_param_ext_18455 = (int64_t) 0;
        ctx_param_ext_18456 = (int64_t) 1;
        ctx_param_ext_18457 = n_11006;
        ctx_param_ext_18459 = n_11006;
        ctx_param_ext_18460 = (int64_t) 0;
        ctx_param_ext_18461 = (int64_t) 1;
        ctx_param_ext_18462 = n_11006;
        ctx_param_ext_18464 = n_11006;
        ctx_param_ext_18465 = (int64_t) 0;
        ctx_param_ext_18466 = (int64_t) 1;
        ctx_param_ext_18467 = n_11006;
        if (memblock_set(ctx, &mem_param_18453, &mem_18081, "mem_18081") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18458, &mem_18084, "mem_18084") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18463, &mem_18445, "mem_18445") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18468, &mem_18448, "mem_18448") != 0)
            return 1;
        
        int32_t ns_15930;
        
        for (int64_t i_15925 = 0; i_15925 < i32_res_15888; i_15925++) {
            ns_15930 = ((int32_t *) mem_17955)[i_15925];
            for (int64_t i_16528 = 0; i_16528 < iota_arg_14817; i_16528++) {
                int32_t defunc_0_f_res_15933 = sext_i64_i32(i_16528);
                
                ((int32_t *) mem_18479)[i_16528] = defunc_0_f_res_15933;
            }
            
            int32_t i32_arg_15934 = mul32(2, ns_15930);
            float i32_res_15935 = sitofp_i32_f32(i32_arg_15934);
            bool zzero_15936 = ns_15930 == 0;
            bool nonzzero_15937 = !zzero_15936;
            bool nonzzero_cert_15938;
            
            if (!nonzzero_15937) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16542 = 0; i_16542 < iota_arg_14817; i_16542++) {
                int32_t x_15945;
                
                x_15945 = ((int32_t *) mem_18479)[i_16542];
                
                int32_t i32_arg_15946 = smod32(x_15945, ns_15930);
                float i32_res_15947 = sitofp_i32_f32(i32_arg_15946);
                float zt_res_15948 = -6.2831855F * i32_res_15947;
                float zs_res_15949 = zt_res_15948 / i32_res_15935;
                int64_t j_15950 = sext_i32_i64(x_15945);
                bool x_15951 = sle64((int64_t) 0, j_15950);
                bool y_15952 = slt64(j_15950, n_11006);
                bool bounds_check_15953 = x_15951 && y_15952;
                bool index_certs_15954;
                
                if (!bounds_check_15953) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15950,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15955;
                
                defunc_0_f_res_15955 =
                    ((float *) mem_param_18453.mem)[ctx_param_ext_18450 +
                                                    j_15950 *
                                                    ctx_param_ext_18451];
                
                float defunc_0_f_res_15956;
                
                defunc_0_f_res_15956 =
                    ((float *) mem_param_18458.mem)[ctx_param_ext_18455 +
                                                    j_15950 *
                                                    ctx_param_ext_18456];
                
                float sin_res_15957;
                
                sin_res_15957 = futrts_sin32(zs_res_15949);
                
                float cos_res_15958;
                
                cos_res_15958 = futrts_cos32(zs_res_15949);
                
                int32_t i_15959 = add32(y_14836, x_15945);
                int64_t i_15960 = sext_i32_i64(i_15959);
                bool x_15961 = sle64((int64_t) 0, i_15960);
                bool y_15962 = slt64(i_15960, n_11006);
                bool bounds_check_15963 = x_15961 && y_15962;
                bool index_certs_15964;
                
                if (!bounds_check_15963) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15960,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:85:5-26\n   #5  sample_programs/fft.fut:38:18-38\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15965;
                
                zt_arg_15965 =
                    ((float *) mem_param_18453.mem)[ctx_param_ext_18450 +
                                                    i_15960 *
                                                    ctx_param_ext_18451];
                
                float zt_arg_15966;
                
                zt_arg_15966 =
                    ((float *) mem_param_18458.mem)[ctx_param_ext_18455 +
                                                    i_15960 *
                                                    ctx_param_ext_18456];
                
                float zt_res_15967 = sin_res_15957 * zt_arg_15966;
                float zt_res_15968 = cos_res_15958 * zt_arg_15965;
                float zm_res_15969 = zt_res_15968 - zt_res_15967;
                float zt_res_15970 = sin_res_15957 * zt_arg_15965;
                float zt_res_15971 = cos_res_15958 * zt_arg_15966;
                float zp_res_15972 = zt_res_15970 + zt_res_15971;
                float zp_res_15973 = defunc_0_f_res_15955 + zm_res_15969;
                float zp_res_15974 = defunc_0_f_res_15956 + zp_res_15972;
                float zm_res_15975 = defunc_0_f_res_15955 - zm_res_15969;
                float zm_res_15976 = defunc_0_f_res_15956 - zp_res_15972;
                int32_t x_15977 = sdiv32(x_15945, ns_15930);
                int32_t x_15978 = mul32(ns_15930, x_15977);
                int32_t x_15979 = mul32(2, x_15978);
                int32_t idxD_15980 = add32(i32_arg_15946, x_15979);
                int64_t i32_res_15981 = sext_i32_i64(idxD_15980);
                int32_t i32_arg_15982 = add32(ns_15930, idxD_15980);
                int64_t i32_res_15983 = sext_i32_i64(i32_arg_15982);
                
                ((int64_t *) mem_18494)[i_16542] = i32_res_15981;
                ((float *) mem_18497)[i_16542] = zp_res_15973;
                ((float *) mem_18500)[i_16542] = zp_res_15974;
                ((int64_t *) mem_18503)[i_16542] = i32_res_15983;
                ((float *) mem_18506)[i_16542] = zm_res_15975;
                ((float *) mem_18509)[i_16542] = zm_res_15976;
            }
            for (int64_t write_iter_16549 = 0; write_iter_16549 <
                 iota_arg_14817; write_iter_16549++) {
                int64_t write_iv_16552;
                
                write_iv_16552 = ((int64_t *) mem_18494)[write_iter_16549];
                
                int64_t write_iv_16555;
                
                write_iv_16555 = ((int64_t *) mem_18503)[write_iter_16549];
                if (sle64((int64_t) 0, write_iv_16552) && slt64(write_iv_16552,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18463.mem + (ctx_param_ext_18460 +
                                                       ctx_param_ext_18461 *
                                                       write_iv_16552) *
                                (int64_t) 4, mem_18497 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16555) && slt64(write_iv_16555,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18463.mem + (ctx_param_ext_18460 +
                                                       ctx_param_ext_18461 *
                                                       write_iv_16555) *
                                (int64_t) 4, mem_18506 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16552) && slt64(write_iv_16552,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18468.mem + (ctx_param_ext_18465 +
                                                       ctx_param_ext_18466 *
                                                       write_iv_16552) *
                                (int64_t) 4, mem_18500 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16555) && slt64(write_iv_16555,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18468.mem + (ctx_param_ext_18465 +
                                                       ctx_param_ext_18466 *
                                                       write_iv_16555) *
                                (int64_t) 4, mem_18509 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16549) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21012 = ctx_param_ext_18459;
            int64_t ctx_param_ext_tmp_21013 = ctx_param_ext_18460;
            int64_t ctx_param_ext_tmp_21014 = ctx_param_ext_18461;
            int64_t ctx_param_ext_tmp_21015 = ctx_param_ext_18462;
            int64_t ctx_param_ext_tmp_21016 = ctx_param_ext_18464;
            int64_t ctx_param_ext_tmp_21017 = ctx_param_ext_18465;
            int64_t ctx_param_ext_tmp_21018 = ctx_param_ext_18466;
            int64_t ctx_param_ext_tmp_21019 = ctx_param_ext_18467;
            int64_t ctx_param_ext_tmp_21020 = ctx_param_ext_18449;
            int64_t ctx_param_ext_tmp_21021 = ctx_param_ext_18450;
            int64_t ctx_param_ext_tmp_21022 = ctx_param_ext_18451;
            int64_t ctx_param_ext_tmp_21023 = ctx_param_ext_18452;
            int64_t ctx_param_ext_tmp_21024 = ctx_param_ext_18454;
            int64_t ctx_param_ext_tmp_21025 = ctx_param_ext_18455;
            int64_t ctx_param_ext_tmp_21026 = ctx_param_ext_18456;
            int64_t ctx_param_ext_tmp_21027 = ctx_param_ext_18457;
            
            if (memblock_set(ctx, &mem_param_tmp_21028, &mem_param_18463,
                             "mem_param_18463") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21029, &mem_param_18468,
                             "mem_param_18468") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21030, &mem_param_18453,
                             "mem_param_18453") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21031, &mem_param_18458,
                             "mem_param_18458") != 0)
                return 1;
            ctx_param_ext_18449 = ctx_param_ext_tmp_21012;
            ctx_param_ext_18450 = ctx_param_ext_tmp_21013;
            ctx_param_ext_18451 = ctx_param_ext_tmp_21014;
            ctx_param_ext_18452 = ctx_param_ext_tmp_21015;
            ctx_param_ext_18454 = ctx_param_ext_tmp_21016;
            ctx_param_ext_18455 = ctx_param_ext_tmp_21017;
            ctx_param_ext_18456 = ctx_param_ext_tmp_21018;
            ctx_param_ext_18457 = ctx_param_ext_tmp_21019;
            ctx_param_ext_18459 = ctx_param_ext_tmp_21020;
            ctx_param_ext_18460 = ctx_param_ext_tmp_21021;
            ctx_param_ext_18461 = ctx_param_ext_tmp_21022;
            ctx_param_ext_18462 = ctx_param_ext_tmp_21023;
            ctx_param_ext_18464 = ctx_param_ext_tmp_21024;
            ctx_param_ext_18465 = ctx_param_ext_tmp_21025;
            ctx_param_ext_18466 = ctx_param_ext_tmp_21026;
            ctx_param_ext_18467 = ctx_param_ext_tmp_21027;
            if (memblock_set(ctx, &mem_param_18453, &mem_param_tmp_21028,
                             "mem_param_tmp_21028") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18458, &mem_param_tmp_21029,
                             "mem_param_tmp_21029") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18463, &mem_param_tmp_21030,
                             "mem_param_tmp_21030") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18468, &mem_param_tmp_21031,
                             "mem_param_tmp_21031") != 0)
                return 1;
        }
        ext_18621 = ctx_param_ext_18449;
        ext_18620 = ctx_param_ext_18450;
        ext_18619 = ctx_param_ext_18451;
        ext_18618 = ctx_param_ext_18452;
        ext_18617 = ctx_param_ext_18454;
        ext_18616 = ctx_param_ext_18455;
        ext_18615 = ctx_param_ext_18456;
        ext_18614 = ctx_param_ext_18457;
        ext_18613 = ctx_param_ext_18459;
        ext_18612 = ctx_param_ext_18460;
        ext_18611 = ctx_param_ext_18461;
        ext_18610 = ctx_param_ext_18462;
        ext_18609 = ctx_param_ext_18464;
        ext_18608 = ctx_param_ext_18465;
        ext_18607 = ctx_param_ext_18466;
        ext_18606 = ctx_param_ext_18467;
        if (memblock_set(ctx, &ext_mem_18605, &mem_param_18453,
                         "mem_param_18453") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18604, &mem_param_18458,
                         "mem_param_18458") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18603, &mem_param_18463,
                         "mem_param_18463") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18602, &mem_param_18468,
                         "mem_param_18468") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_17986 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18247.mem + ext_18262 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18247, "ext_mem_18247") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_17990 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18246.mem + ext_18258 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18246, "ext_mem_18246") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_17994 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18426.mem + ext_18441 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18426, "ext_mem_18426") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_17998 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18425.mem + ext_18437 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18425, "ext_mem_18425") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_18002 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18605.mem + ext_18620 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18605, "ext_mem_18605") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_18006 + i_16574 * n_11006 * (int64_t) 4,
                    ext_mem_18604.mem + ext_18616 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18604, "ext_mem_18604") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_18069, "mem_18069") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18072, "mem_18072") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18075, "mem_18075") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18078, "mem_18078") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18081, "mem_18081") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18084, "mem_18084") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18087, "mem_18087") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18090, "mem_18090") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18266, "mem_18266") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18269, "mem_18269") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18445, "mem_18445") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18448, "mem_18448") != 0)
        return 1;
    
    bool r_16034;
    int32_t r_16035;
    int64_t r_16036;
    bool loop_while_16037;
    int32_t r_16038;
    int64_t n_16039;
    
    loop_while_16037 = loop_cond_14698;
    r_16038 = 0;
    n_16039 = m_11007;
    while (loop_while_16037) {
        int64_t n_16040 = sdiv64(n_16039, (int64_t) 2);
        int32_t r_16041 = add32(1, r_16038);
        bool loop_cond_16042 = slt64((int64_t) 1, n_16040);
        bool loop_while_tmp_21045 = loop_cond_16042;
        int32_t r_tmp_21046 = r_16041;
        int64_t n_tmp_21047 = n_16040;
        
        loop_while_16037 = loop_while_tmp_21045;
        r_16038 = r_tmp_21046;
        n_16039 = n_tmp_21047;
    }
    r_16034 = loop_while_16037;
    r_16035 = r_16038;
    r_16036 = n_16039;
    
    int64_t i32_res_16043 = sext_i32_i64(r_16035);
    bool loop_nonempty_16056 = slt64((int64_t) 0, i32_res_16043);
    bool loop_not_taken_16057 = !loop_nonempty_16056;
    bool protect_assert_disj_16058 = dim_match_14730 || loop_not_taken_16057;
    bool empty_or_match_cert_16060;
    
    if (!protect_assert_disj_16058) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_16059;
    
    if (!protect_assert_disj_16058) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_16044 = slt64(i32_res_16043, (int64_t) 0);
    bool valid_16045 = !bounds_invalid_upwards_16044;
    bool range_valid_c_16046;
    
    if (!valid_16045) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_16043, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18670 = (int64_t) 4 * i32_res_16043;
    int64_t bytes_18671 = smax64((int64_t) 0, binop_y_18670);
    
    if (mem_18672_cached_sizze_21532 < bytes_18671) {
        err = lexical_realloc(&ctx->error, &mem_18672,
                              &mem_18672_cached_sizze_21532, bytes_18671);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16941 = 0; i_16941 < r_16035; i_16941++) {
        int64_t i_16589 = sext_i32_i64(i_16941);
        bool nonnegative_16053 = sle32(0, i_16941);
        bool nonzzero_cert_16054;
        
        if (!nonnegative_16053) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_16055 = shl32(1, i_16941);
        
        ((int32_t *) mem_18672)[i_16589] = defunc_0_f_res_16055;
    }
    
    bool r_15498;
    int32_t r_15499;
    int64_t r_15500;
    bool loop_while_15501;
    int32_t r_15502;
    int64_t n_15503;
    
    loop_while_15501 = loop_cond_14698;
    r_15502 = 0;
    n_15503 = m_11007;
    while (loop_while_15501) {
        int64_t n_15504 = sdiv64(n_15503, (int64_t) 2);
        int32_t r_15505 = add32(1, r_15502);
        bool loop_cond_15506 = slt64((int64_t) 1, n_15504);
        bool loop_while_tmp_21049 = loop_cond_15506;
        int32_t r_tmp_21050 = r_15505;
        int64_t n_tmp_21051 = n_15504;
        
        loop_while_15501 = loop_while_tmp_21049;
        r_15502 = r_tmp_21050;
        n_15503 = n_tmp_21051;
    }
    r_15498 = loop_while_15501;
    r_15499 = r_15502;
    r_15500 = n_15503;
    
    int64_t i32_res_15507 = sext_i32_i64(r_15499);
    bool loop_nonempty_15520 = slt64((int64_t) 0, i32_res_15507);
    bool loop_not_taken_15521 = !loop_nonempty_15520;
    bool protect_assert_disj_15522 = dim_match_14730 || loop_not_taken_15521;
    bool empty_or_match_cert_15524;
    
    if (!protect_assert_disj_15522) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15523;
    
    if (!protect_assert_disj_15522) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15508 = slt64(i32_res_15507, (int64_t) 0);
    bool valid_15509 = !bounds_invalid_upwards_15508;
    bool range_valid_c_15510;
    
    if (!valid_15509) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15507, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18685 = (int64_t) 4 * i32_res_15507;
    int64_t bytes_18686 = smax64((int64_t) 0, binop_y_18685);
    
    if (mem_18687_cached_sizze_21533 < bytes_18686) {
        err = lexical_realloc(&ctx->error, &mem_18687,
                              &mem_18687_cached_sizze_21533, bytes_18686);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16942 = 0; i_16942 < r_15499; i_16942++) {
        int64_t i_16593 = sext_i32_i64(i_16942);
        bool nonnegative_15517 = sle32(0, i_16942);
        bool nonzzero_cert_15518;
        
        if (!nonnegative_15517) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15519 = shl32(1, i_16942);
        
        ((int32_t *) mem_18687)[i_16593] = defunc_0_f_res_15519;
    }
    
    bool r_14962;
    int32_t r_14963;
    int64_t r_14964;
    bool loop_while_14965;
    int32_t r_14966;
    int64_t n_14967;
    
    loop_while_14965 = loop_cond_14698;
    r_14966 = 0;
    n_14967 = m_11007;
    while (loop_while_14965) {
        int64_t n_14968 = sdiv64(n_14967, (int64_t) 2);
        int32_t r_14969 = add32(1, r_14966);
        bool loop_cond_14970 = slt64((int64_t) 1, n_14968);
        bool loop_while_tmp_21053 = loop_cond_14970;
        int32_t r_tmp_21054 = r_14969;
        int64_t n_tmp_21055 = n_14968;
        
        loop_while_14965 = loop_while_tmp_21053;
        r_14966 = r_tmp_21054;
        n_14967 = n_tmp_21055;
    }
    r_14962 = loop_while_14965;
    r_14963 = r_14966;
    r_14964 = n_14967;
    
    int64_t i32_res_14971 = sext_i32_i64(r_14963);
    bool loop_nonempty_14984 = slt64((int64_t) 0, i32_res_14971);
    bool loop_not_taken_14985 = !loop_nonempty_14984;
    bool protect_assert_disj_14986 = dim_match_14730 || loop_not_taken_14985;
    bool empty_or_match_cert_14988;
    
    if (!protect_assert_disj_14986) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_14987;
    
    if (!protect_assert_disj_14986) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14729,
                               ") cannot match shape of type `[",
                               (long long) m_11007, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_14972 = slt64(i32_res_14971, (int64_t) 0);
    bool valid_14973 = !bounds_invalid_upwards_14972;
    bool range_valid_c_14974;
    
    if (!valid_14973) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_14971, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_18700 = (int64_t) 4 * i32_res_14971;
    int64_t bytes_18701 = smax64((int64_t) 0, binop_y_18700);
    
    if (mem_18702_cached_sizze_21534 < bytes_18701) {
        err = lexical_realloc(&ctx->error, &mem_18702,
                              &mem_18702_cached_sizze_21534, bytes_18701);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16943 = 0; i_16943 < r_14963; i_16943++) {
        int64_t i_16597 = sext_i32_i64(i_16943);
        bool nonnegative_14981 = sle32(0, i_16943);
        bool nonzzero_cert_14982;
        
        if (!nonnegative_14981) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_14983 = shl32(1, i_16943);
        
        ((int32_t *) mem_18702)[i_16597] = defunc_0_f_res_14983;
    }
    
    int32_t y_14931 = add32(cutoff_11008, y_14728);
    int32_t y_14930 = sub32(y_14728, cutoff_11008);
    int32_t y_14929 = add32(cutoff_11008, y_14836);
    int32_t y_14928 = sub32(y_14836, cutoff_11008);
    
    if (mem_18718_cached_sizze_21535 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18718,
                              &mem_18718_cached_sizze_21535, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18722_cached_sizze_21536 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18722,
                              &mem_18722_cached_sizze_21536, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18726_cached_sizze_21537 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18726,
                              &mem_18726_cached_sizze_21537, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18730_cached_sizze_21538 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18730,
                              &mem_18730_cached_sizze_21538, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18734_cached_sizze_21539 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18734,
                              &mem_18734_cached_sizze_21539, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18738_cached_sizze_21540 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_18738,
                              &mem_18738_cached_sizze_21540, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18801, bytes_17117, "mem_18801")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18804, bytes_17117, "mem_18804")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18831, bytes_17117, "mem_18831")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_18834, bytes_17117, "mem_18834")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_18859 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_18860 = smax64((int64_t) 0, binop_y_18859);
    
    if (mem_18861_cached_sizze_21541 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18861,
                              &mem_18861_cached_sizze_21541, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_18874 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_18875 = smax64((int64_t) 0, binop_y_18874);
    
    if (mem_18876_cached_sizze_21542 < bytes_18875) {
        err = lexical_realloc(&ctx->error, &mem_18876,
                              &mem_18876_cached_sizze_21542, bytes_18875);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18879_cached_sizze_21543 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18879,
                              &mem_18879_cached_sizze_21543, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18882_cached_sizze_21544 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18882,
                              &mem_18882_cached_sizze_21544, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18885_cached_sizze_21545 < bytes_18875) {
        err = lexical_realloc(&ctx->error, &mem_18885,
                              &mem_18885_cached_sizze_21545, bytes_18875);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18888_cached_sizze_21546 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18888,
                              &mem_18888_cached_sizze_21546, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_18891_cached_sizze_21547 < bytes_18860) {
        err = lexical_realloc(&ctx->error, &mem_18891,
                              &mem_18891_cached_sizze_21547, bytes_18860);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19006, bytes_17117, "mem_19006")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19009, bytes_17117, "mem_19009")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19036, bytes_17117, "mem_19036")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19039, bytes_17117, "mem_19039")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19064 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_19065 = smax64((int64_t) 0, binop_y_19064);
    
    if (mem_19066_cached_sizze_21548 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19066,
                              &mem_19066_cached_sizze_21548, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19079 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_19080 = smax64((int64_t) 0, binop_y_19079);
    
    if (mem_19081_cached_sizze_21549 < bytes_19080) {
        err = lexical_realloc(&ctx->error, &mem_19081,
                              &mem_19081_cached_sizze_21549, bytes_19080);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19084_cached_sizze_21550 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19084,
                              &mem_19084_cached_sizze_21550, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19087_cached_sizze_21551 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19087,
                              &mem_19087_cached_sizze_21551, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19090_cached_sizze_21552 < bytes_19080) {
        err = lexical_realloc(&ctx->error, &mem_19090,
                              &mem_19090_cached_sizze_21552, bytes_19080);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19093_cached_sizze_21553 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19093,
                              &mem_19093_cached_sizze_21553, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19096_cached_sizze_21554 < bytes_19065) {
        err = lexical_realloc(&ctx->error, &mem_19096,
                              &mem_19096_cached_sizze_21554, bytes_19065);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19211, bytes_17117, "mem_19211")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19214, bytes_17117, "mem_19214")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19241, bytes_17117, "mem_19241")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19244, bytes_17117, "mem_19244")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19269 = (int64_t) 4 * iota_arg_14709;
    int64_t bytes_19270 = smax64((int64_t) 0, binop_y_19269);
    
    if (mem_19271_cached_sizze_21555 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19271,
                              &mem_19271_cached_sizze_21555, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19284 = (int64_t) 8 * iota_arg_14709;
    int64_t bytes_19285 = smax64((int64_t) 0, binop_y_19284);
    
    if (mem_19286_cached_sizze_21556 < bytes_19285) {
        err = lexical_realloc(&ctx->error, &mem_19286,
                              &mem_19286_cached_sizze_21556, bytes_19285);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19289_cached_sizze_21557 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19289,
                              &mem_19289_cached_sizze_21557, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19292_cached_sizze_21558 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19292,
                              &mem_19292_cached_sizze_21558, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19295_cached_sizze_21559 < bytes_19285) {
        err = lexical_realloc(&ctx->error, &mem_19295,
                              &mem_19295_cached_sizze_21559, bytes_19285);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19298_cached_sizze_21560 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19298,
                              &mem_19298_cached_sizze_21560, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19301_cached_sizze_21561 < bytes_19270) {
        err = lexical_realloc(&ctx->error, &mem_19301,
                              &mem_19301_cached_sizze_21561, bytes_19270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16740 = 0; i_16740 < n_11006; i_16740++) {
        int32_t defunc_0_f_res_14924 = sext_i64_i32(i_16740);
        bool cond_14937 = slt32(y_14928, defunc_0_f_res_14924);
        bool cond_t_res_14938 = slt32(defunc_0_f_res_14924, y_14929);
        bool x_14939 = cond_14937 && cond_t_res_14938;
        
        for (int64_t i_16603 = 0; i_16603 < m_11007; i_16603++) {
            int32_t x_14942;
            
            x_14942 = ((int32_t *) mem_17118)[i_16603];
            
            float x_14943;
            
            x_14943 = ((float *) mem_17986)[i_16603 * n_11006 + i_16740];
            
            float x_14944;
            
            x_14944 = ((float *) mem_17990)[i_16603 * n_11006 + i_16740];
            
            bool cond_t_res_14945 = slt32(y_14930, x_14942);
            bool x_14946 = x_14939 && cond_t_res_14945;
            bool cond_t_res_14947 = slt32(x_14942, y_14931);
            bool x_14948 = x_14946 && cond_t_res_14947;
            float defunc_1_f_res_14949;
            
            if (x_14948) {
                defunc_1_f_res_14949 = 0.0F;
            } else {
                defunc_1_f_res_14949 = x_14943;
            }
            
            float defunc_1_f_res_14950;
            
            if (x_14948) {
                defunc_1_f_res_14950 = 0.0F;
            } else {
                defunc_1_f_res_14950 = x_14944;
            }
            ((float *) mem_18801.mem)[i_16603] = defunc_1_f_res_14949;
            ((float *) mem_18804.mem)[i_16603] = defunc_1_f_res_14950;
        }
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18831.mem + (int64_t) 0, mem_18801.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18834.mem + (int64_t) 0, mem_18804.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_19003;
        int64_t ext_19002;
        int64_t ext_19001;
        int64_t ext_19000;
        int64_t ext_18999;
        int64_t ext_18998;
        int64_t ext_18997;
        int64_t ext_18996;
        int64_t ext_18995;
        int64_t ext_18994;
        int64_t ext_18993;
        int64_t ext_18992;
        int64_t ext_18991;
        int64_t ext_18990;
        int64_t ext_18989;
        int64_t ext_18988;
        int64_t ctx_param_ext_18835;
        int64_t ctx_param_ext_18836;
        int64_t ctx_param_ext_18837;
        int64_t ctx_param_ext_18838;
        int64_t ctx_param_ext_18840;
        int64_t ctx_param_ext_18841;
        int64_t ctx_param_ext_18842;
        int64_t ctx_param_ext_18843;
        int64_t ctx_param_ext_18845;
        int64_t ctx_param_ext_18846;
        int64_t ctx_param_ext_18847;
        int64_t ctx_param_ext_18848;
        int64_t ctx_param_ext_18850;
        int64_t ctx_param_ext_18851;
        int64_t ctx_param_ext_18852;
        int64_t ctx_param_ext_18853;
        
        ctx_param_ext_18835 = m_11007;
        ctx_param_ext_18836 = (int64_t) 0;
        ctx_param_ext_18837 = (int64_t) 1;
        ctx_param_ext_18838 = m_11007;
        ctx_param_ext_18840 = m_11007;
        ctx_param_ext_18841 = (int64_t) 0;
        ctx_param_ext_18842 = (int64_t) 1;
        ctx_param_ext_18843 = m_11007;
        ctx_param_ext_18845 = m_11007;
        ctx_param_ext_18846 = (int64_t) 0;
        ctx_param_ext_18847 = (int64_t) 1;
        ctx_param_ext_18848 = m_11007;
        ctx_param_ext_18850 = m_11007;
        ctx_param_ext_18851 = (int64_t) 0;
        ctx_param_ext_18852 = (int64_t) 1;
        ctx_param_ext_18853 = m_11007;
        if (memblock_set(ctx, &mem_param_18839, &mem_18801, "mem_18801") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18844, &mem_18804, "mem_18804") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18849, &mem_18831, "mem_18831") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_18854, &mem_18834, "mem_18834") != 0)
            return 1;
        
        int32_t ns_15004;
        
        for (int64_t i_14999 = 0; i_14999 < i32_res_14971; i_14999++) {
            ns_15004 = ((int32_t *) mem_18702)[i_14999];
            for (int64_t i_16608 = 0; i_16608 < iota_arg_14709; i_16608++) {
                int32_t defunc_0_f_res_15007 = sext_i64_i32(i_16608);
                
                ((int32_t *) mem_18861)[i_16608] = defunc_0_f_res_15007;
            }
            
            int32_t i32_arg_15008 = mul32(2, ns_15004);
            float i32_res_15009 = sitofp_i32_f32(i32_arg_15008);
            bool zzero_15010 = ns_15004 == 0;
            bool nonzzero_15011 = !zzero_15010;
            bool nonzzero_cert_15012;
            
            if (!nonzzero_15011) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16622 = 0; i_16622 < iota_arg_14709; i_16622++) {
                int32_t x_15019;
                
                x_15019 = ((int32_t *) mem_18861)[i_16622];
                
                int32_t i32_arg_15020 = smod32(x_15019, ns_15004);
                float i32_res_15021 = sitofp_i32_f32(i32_arg_15020);
                float zt_res_15022 = 6.2831855F * i32_res_15021;
                float zs_res_15023 = zt_res_15022 / i32_res_15009;
                int64_t j_15024 = sext_i32_i64(x_15019);
                bool x_15025 = sle64((int64_t) 0, j_15024);
                bool y_15026 = slt64(j_15024, m_11007);
                bool bounds_check_15027 = x_15025 && y_15026;
                bool index_certs_15028;
                
                if (!bounds_check_15027) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15024,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15029;
                
                defunc_0_f_res_15029 =
                    ((float *) mem_param_18839.mem)[ctx_param_ext_18836 +
                                                    j_15024 *
                                                    ctx_param_ext_18837];
                
                float defunc_0_f_res_15030;
                
                defunc_0_f_res_15030 =
                    ((float *) mem_param_18844.mem)[ctx_param_ext_18841 +
                                                    j_15024 *
                                                    ctx_param_ext_18842];
                
                float sin_res_15031;
                
                sin_res_15031 = futrts_sin32(zs_res_15023);
                
                float cos_res_15032;
                
                cos_res_15032 = futrts_cos32(zs_res_15023);
                
                int32_t i_15033 = add32(y_14728, x_15019);
                int64_t i_15034 = sext_i32_i64(i_15033);
                bool x_15035 = sle64((int64_t) 0, i_15034);
                bool y_15036 = slt64(i_15034, m_11007);
                bool bounds_check_15037 = x_15035 && y_15036;
                bool index_certs_15038;
                
                if (!bounds_check_15037) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15034,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15039;
                
                zt_arg_15039 =
                    ((float *) mem_param_18839.mem)[ctx_param_ext_18836 +
                                                    i_15034 *
                                                    ctx_param_ext_18837];
                
                float zt_arg_15040;
                
                zt_arg_15040 =
                    ((float *) mem_param_18844.mem)[ctx_param_ext_18841 +
                                                    i_15034 *
                                                    ctx_param_ext_18842];
                
                float zt_res_15041 = sin_res_15031 * zt_arg_15040;
                float zt_res_15042 = cos_res_15032 * zt_arg_15039;
                float zm_res_15043 = zt_res_15042 - zt_res_15041;
                float zt_res_15044 = sin_res_15031 * zt_arg_15039;
                float zt_res_15045 = cos_res_15032 * zt_arg_15040;
                float zp_res_15046 = zt_res_15044 + zt_res_15045;
                float zp_res_15047 = defunc_0_f_res_15029 + zm_res_15043;
                float zp_res_15048 = defunc_0_f_res_15030 + zp_res_15046;
                float zm_res_15049 = defunc_0_f_res_15029 - zm_res_15043;
                float zm_res_15050 = defunc_0_f_res_15030 - zp_res_15046;
                int32_t x_15051 = sdiv32(x_15019, ns_15004);
                int32_t x_15052 = mul32(ns_15004, x_15051);
                int32_t x_15053 = mul32(2, x_15052);
                int32_t idxD_15054 = add32(i32_arg_15020, x_15053);
                int64_t i32_res_15055 = sext_i32_i64(idxD_15054);
                int32_t i32_arg_15056 = add32(ns_15004, idxD_15054);
                int64_t i32_res_15057 = sext_i32_i64(i32_arg_15056);
                
                ((int64_t *) mem_18876)[i_16622] = i32_res_15055;
                ((float *) mem_18879)[i_16622] = zp_res_15047;
                ((float *) mem_18882)[i_16622] = zp_res_15048;
                ((int64_t *) mem_18885)[i_16622] = i32_res_15057;
                ((float *) mem_18888)[i_16622] = zm_res_15049;
                ((float *) mem_18891)[i_16622] = zm_res_15050;
            }
            for (int64_t write_iter_16629 = 0; write_iter_16629 <
                 iota_arg_14709; write_iter_16629++) {
                int64_t write_iv_16632;
                
                write_iv_16632 = ((int64_t *) mem_18876)[write_iter_16629];
                
                int64_t write_iv_16635;
                
                write_iv_16635 = ((int64_t *) mem_18885)[write_iter_16629];
                if (sle64((int64_t) 0, write_iv_16632) && slt64(write_iv_16632,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18849.mem + (ctx_param_ext_18846 +
                                                       ctx_param_ext_18847 *
                                                       write_iv_16632) *
                                (int64_t) 4, mem_18879 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16635) && slt64(write_iv_16635,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18849.mem + (ctx_param_ext_18846 +
                                                       ctx_param_ext_18847 *
                                                       write_iv_16635) *
                                (int64_t) 4, mem_18888 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16632) && slt64(write_iv_16632,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18854.mem + (ctx_param_ext_18851 +
                                                       ctx_param_ext_18852 *
                                                       write_iv_16632) *
                                (int64_t) 4, mem_18882 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16635) && slt64(write_iv_16635,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_18854.mem + (ctx_param_ext_18851 +
                                                       ctx_param_ext_18852 *
                                                       write_iv_16635) *
                                (int64_t) 4, mem_18891 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16629) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21065 = ctx_param_ext_18845;
            int64_t ctx_param_ext_tmp_21066 = ctx_param_ext_18846;
            int64_t ctx_param_ext_tmp_21067 = ctx_param_ext_18847;
            int64_t ctx_param_ext_tmp_21068 = ctx_param_ext_18848;
            int64_t ctx_param_ext_tmp_21069 = ctx_param_ext_18850;
            int64_t ctx_param_ext_tmp_21070 = ctx_param_ext_18851;
            int64_t ctx_param_ext_tmp_21071 = ctx_param_ext_18852;
            int64_t ctx_param_ext_tmp_21072 = ctx_param_ext_18853;
            int64_t ctx_param_ext_tmp_21073 = ctx_param_ext_18835;
            int64_t ctx_param_ext_tmp_21074 = ctx_param_ext_18836;
            int64_t ctx_param_ext_tmp_21075 = ctx_param_ext_18837;
            int64_t ctx_param_ext_tmp_21076 = ctx_param_ext_18838;
            int64_t ctx_param_ext_tmp_21077 = ctx_param_ext_18840;
            int64_t ctx_param_ext_tmp_21078 = ctx_param_ext_18841;
            int64_t ctx_param_ext_tmp_21079 = ctx_param_ext_18842;
            int64_t ctx_param_ext_tmp_21080 = ctx_param_ext_18843;
            
            if (memblock_set(ctx, &mem_param_tmp_21081, &mem_param_18849,
                             "mem_param_18849") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21082, &mem_param_18854,
                             "mem_param_18854") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21083, &mem_param_18839,
                             "mem_param_18839") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21084, &mem_param_18844,
                             "mem_param_18844") != 0)
                return 1;
            ctx_param_ext_18835 = ctx_param_ext_tmp_21065;
            ctx_param_ext_18836 = ctx_param_ext_tmp_21066;
            ctx_param_ext_18837 = ctx_param_ext_tmp_21067;
            ctx_param_ext_18838 = ctx_param_ext_tmp_21068;
            ctx_param_ext_18840 = ctx_param_ext_tmp_21069;
            ctx_param_ext_18841 = ctx_param_ext_tmp_21070;
            ctx_param_ext_18842 = ctx_param_ext_tmp_21071;
            ctx_param_ext_18843 = ctx_param_ext_tmp_21072;
            ctx_param_ext_18845 = ctx_param_ext_tmp_21073;
            ctx_param_ext_18846 = ctx_param_ext_tmp_21074;
            ctx_param_ext_18847 = ctx_param_ext_tmp_21075;
            ctx_param_ext_18848 = ctx_param_ext_tmp_21076;
            ctx_param_ext_18850 = ctx_param_ext_tmp_21077;
            ctx_param_ext_18851 = ctx_param_ext_tmp_21078;
            ctx_param_ext_18852 = ctx_param_ext_tmp_21079;
            ctx_param_ext_18853 = ctx_param_ext_tmp_21080;
            if (memblock_set(ctx, &mem_param_18839, &mem_param_tmp_21081,
                             "mem_param_tmp_21081") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18844, &mem_param_tmp_21082,
                             "mem_param_tmp_21082") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18849, &mem_param_tmp_21083,
                             "mem_param_tmp_21083") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_18854, &mem_param_tmp_21084,
                             "mem_param_tmp_21084") != 0)
                return 1;
        }
        ext_19003 = ctx_param_ext_18835;
        ext_19002 = ctx_param_ext_18836;
        ext_19001 = ctx_param_ext_18837;
        ext_19000 = ctx_param_ext_18838;
        ext_18999 = ctx_param_ext_18840;
        ext_18998 = ctx_param_ext_18841;
        ext_18997 = ctx_param_ext_18842;
        ext_18996 = ctx_param_ext_18843;
        ext_18995 = ctx_param_ext_18845;
        ext_18994 = ctx_param_ext_18846;
        ext_18993 = ctx_param_ext_18847;
        ext_18992 = ctx_param_ext_18848;
        ext_18991 = ctx_param_ext_18850;
        ext_18990 = ctx_param_ext_18851;
        ext_18989 = ctx_param_ext_18852;
        ext_18988 = ctx_param_ext_18853;
        if (memblock_set(ctx, &ext_mem_18987, &mem_param_18839,
                         "mem_param_18839") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18986, &mem_param_18844,
                         "mem_param_18844") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18985, &mem_param_18849,
                         "mem_param_18849") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_18984, &mem_param_18854,
                         "mem_param_18854") != 0)
            return 1;
        for (int64_t i_16646 = 0; i_16646 < m_11007; i_16646++) {
            int32_t x_15478;
            
            x_15478 = ((int32_t *) mem_17118)[i_16646];
            
            float x_15479;
            
            x_15479 = ((float *) mem_17994)[i_16646 * n_11006 + i_16740];
            
            float x_15480;
            
            x_15480 = ((float *) mem_17998)[i_16646 * n_11006 + i_16740];
            
            bool cond_t_res_15481 = slt32(y_14930, x_15478);
            bool x_15482 = x_14939 && cond_t_res_15481;
            bool cond_t_res_15483 = slt32(x_15478, y_14931);
            bool x_15484 = x_15482 && cond_t_res_15483;
            float defunc_1_f_res_15485;
            
            if (x_15484) {
                defunc_1_f_res_15485 = 0.0F;
            } else {
                defunc_1_f_res_15485 = x_15479;
            }
            
            float defunc_1_f_res_15486;
            
            if (x_15484) {
                defunc_1_f_res_15486 = 0.0F;
            } else {
                defunc_1_f_res_15486 = x_15480;
            }
            ((float *) mem_19006.mem)[i_16646] = defunc_1_f_res_15485;
            ((float *) mem_19009.mem)[i_16646] = defunc_1_f_res_15486;
        }
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_19036.mem + (int64_t) 0, mem_19006.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_19039.mem + (int64_t) 0, mem_19009.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_19208;
        int64_t ext_19207;
        int64_t ext_19206;
        int64_t ext_19205;
        int64_t ext_19204;
        int64_t ext_19203;
        int64_t ext_19202;
        int64_t ext_19201;
        int64_t ext_19200;
        int64_t ext_19199;
        int64_t ext_19198;
        int64_t ext_19197;
        int64_t ext_19196;
        int64_t ext_19195;
        int64_t ext_19194;
        int64_t ext_19193;
        int64_t ctx_param_ext_19040;
        int64_t ctx_param_ext_19041;
        int64_t ctx_param_ext_19042;
        int64_t ctx_param_ext_19043;
        int64_t ctx_param_ext_19045;
        int64_t ctx_param_ext_19046;
        int64_t ctx_param_ext_19047;
        int64_t ctx_param_ext_19048;
        int64_t ctx_param_ext_19050;
        int64_t ctx_param_ext_19051;
        int64_t ctx_param_ext_19052;
        int64_t ctx_param_ext_19053;
        int64_t ctx_param_ext_19055;
        int64_t ctx_param_ext_19056;
        int64_t ctx_param_ext_19057;
        int64_t ctx_param_ext_19058;
        
        ctx_param_ext_19040 = m_11007;
        ctx_param_ext_19041 = (int64_t) 0;
        ctx_param_ext_19042 = (int64_t) 1;
        ctx_param_ext_19043 = m_11007;
        ctx_param_ext_19045 = m_11007;
        ctx_param_ext_19046 = (int64_t) 0;
        ctx_param_ext_19047 = (int64_t) 1;
        ctx_param_ext_19048 = m_11007;
        ctx_param_ext_19050 = m_11007;
        ctx_param_ext_19051 = (int64_t) 0;
        ctx_param_ext_19052 = (int64_t) 1;
        ctx_param_ext_19053 = m_11007;
        ctx_param_ext_19055 = m_11007;
        ctx_param_ext_19056 = (int64_t) 0;
        ctx_param_ext_19057 = (int64_t) 1;
        ctx_param_ext_19058 = m_11007;
        if (memblock_set(ctx, &mem_param_19044, &mem_19006, "mem_19006") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19049, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19054, &mem_19036, "mem_19036") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19059, &mem_19039, "mem_19039") != 0)
            return 1;
        
        int32_t ns_15540;
        
        for (int64_t i_15535 = 0; i_15535 < i32_res_15507; i_15535++) {
            ns_15540 = ((int32_t *) mem_18687)[i_15535];
            for (int64_t i_16651 = 0; i_16651 < iota_arg_14709; i_16651++) {
                int32_t defunc_0_f_res_15543 = sext_i64_i32(i_16651);
                
                ((int32_t *) mem_19066)[i_16651] = defunc_0_f_res_15543;
            }
            
            int32_t i32_arg_15544 = mul32(2, ns_15540);
            float i32_res_15545 = sitofp_i32_f32(i32_arg_15544);
            bool zzero_15546 = ns_15540 == 0;
            bool nonzzero_15547 = !zzero_15546;
            bool nonzzero_cert_15548;
            
            if (!nonzzero_15547) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16665 = 0; i_16665 < iota_arg_14709; i_16665++) {
                int32_t x_15555;
                
                x_15555 = ((int32_t *) mem_19066)[i_16665];
                
                int32_t i32_arg_15556 = smod32(x_15555, ns_15540);
                float i32_res_15557 = sitofp_i32_f32(i32_arg_15556);
                float zt_res_15558 = 6.2831855F * i32_res_15557;
                float zs_res_15559 = zt_res_15558 / i32_res_15545;
                int64_t j_15560 = sext_i32_i64(x_15555);
                bool x_15561 = sle64((int64_t) 0, j_15560);
                bool y_15562 = slt64(j_15560, m_11007);
                bool bounds_check_15563 = x_15561 && y_15562;
                bool index_certs_15564;
                
                if (!bounds_check_15563) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15560,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15565;
                
                defunc_0_f_res_15565 =
                    ((float *) mem_param_19044.mem)[ctx_param_ext_19041 +
                                                    j_15560 *
                                                    ctx_param_ext_19042];
                
                float defunc_0_f_res_15566;
                
                defunc_0_f_res_15566 =
                    ((float *) mem_param_19049.mem)[ctx_param_ext_19046 +
                                                    j_15560 *
                                                    ctx_param_ext_19047];
                
                float sin_res_15567;
                
                sin_res_15567 = futrts_sin32(zs_res_15559);
                
                float cos_res_15568;
                
                cos_res_15568 = futrts_cos32(zs_res_15559);
                
                int32_t i_15569 = add32(y_14728, x_15555);
                int64_t i_15570 = sext_i32_i64(i_15569);
                bool x_15571 = sle64((int64_t) 0, i_15570);
                bool y_15572 = slt64(i_15570, m_11007);
                bool bounds_check_15573 = x_15571 && y_15572;
                bool index_certs_15574;
                
                if (!bounds_check_15573) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15570,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15575;
                
                zt_arg_15575 =
                    ((float *) mem_param_19044.mem)[ctx_param_ext_19041 +
                                                    i_15570 *
                                                    ctx_param_ext_19042];
                
                float zt_arg_15576;
                
                zt_arg_15576 =
                    ((float *) mem_param_19049.mem)[ctx_param_ext_19046 +
                                                    i_15570 *
                                                    ctx_param_ext_19047];
                
                float zt_res_15577 = sin_res_15567 * zt_arg_15576;
                float zt_res_15578 = cos_res_15568 * zt_arg_15575;
                float zm_res_15579 = zt_res_15578 - zt_res_15577;
                float zt_res_15580 = sin_res_15567 * zt_arg_15575;
                float zt_res_15581 = cos_res_15568 * zt_arg_15576;
                float zp_res_15582 = zt_res_15580 + zt_res_15581;
                float zp_res_15583 = defunc_0_f_res_15565 + zm_res_15579;
                float zp_res_15584 = defunc_0_f_res_15566 + zp_res_15582;
                float zm_res_15585 = defunc_0_f_res_15565 - zm_res_15579;
                float zm_res_15586 = defunc_0_f_res_15566 - zp_res_15582;
                int32_t x_15587 = sdiv32(x_15555, ns_15540);
                int32_t x_15588 = mul32(ns_15540, x_15587);
                int32_t x_15589 = mul32(2, x_15588);
                int32_t idxD_15590 = add32(i32_arg_15556, x_15589);
                int64_t i32_res_15591 = sext_i32_i64(idxD_15590);
                int32_t i32_arg_15592 = add32(ns_15540, idxD_15590);
                int64_t i32_res_15593 = sext_i32_i64(i32_arg_15592);
                
                ((int64_t *) mem_19081)[i_16665] = i32_res_15591;
                ((float *) mem_19084)[i_16665] = zp_res_15583;
                ((float *) mem_19087)[i_16665] = zp_res_15584;
                ((int64_t *) mem_19090)[i_16665] = i32_res_15593;
                ((float *) mem_19093)[i_16665] = zm_res_15585;
                ((float *) mem_19096)[i_16665] = zm_res_15586;
            }
            for (int64_t write_iter_16672 = 0; write_iter_16672 <
                 iota_arg_14709; write_iter_16672++) {
                int64_t write_iv_16675;
                
                write_iv_16675 = ((int64_t *) mem_19081)[write_iter_16672];
                
                int64_t write_iv_16678;
                
                write_iv_16678 = ((int64_t *) mem_19090)[write_iter_16672];
                if (sle64((int64_t) 0, write_iv_16675) && slt64(write_iv_16675,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19054.mem + (ctx_param_ext_19051 +
                                                       ctx_param_ext_19052 *
                                                       write_iv_16675) *
                                (int64_t) 4, mem_19084 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16678) && slt64(write_iv_16678,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19054.mem + (ctx_param_ext_19051 +
                                                       ctx_param_ext_19052 *
                                                       write_iv_16678) *
                                (int64_t) 4, mem_19093 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16675) && slt64(write_iv_16675,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19059.mem + (ctx_param_ext_19056 +
                                                       ctx_param_ext_19057 *
                                                       write_iv_16675) *
                                (int64_t) 4, mem_19087 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16678) && slt64(write_iv_16678,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19059.mem + (ctx_param_ext_19056 +
                                                       ctx_param_ext_19057 *
                                                       write_iv_16678) *
                                (int64_t) 4, mem_19096 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16672) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21100 = ctx_param_ext_19050;
            int64_t ctx_param_ext_tmp_21101 = ctx_param_ext_19051;
            int64_t ctx_param_ext_tmp_21102 = ctx_param_ext_19052;
            int64_t ctx_param_ext_tmp_21103 = ctx_param_ext_19053;
            int64_t ctx_param_ext_tmp_21104 = ctx_param_ext_19055;
            int64_t ctx_param_ext_tmp_21105 = ctx_param_ext_19056;
            int64_t ctx_param_ext_tmp_21106 = ctx_param_ext_19057;
            int64_t ctx_param_ext_tmp_21107 = ctx_param_ext_19058;
            int64_t ctx_param_ext_tmp_21108 = ctx_param_ext_19040;
            int64_t ctx_param_ext_tmp_21109 = ctx_param_ext_19041;
            int64_t ctx_param_ext_tmp_21110 = ctx_param_ext_19042;
            int64_t ctx_param_ext_tmp_21111 = ctx_param_ext_19043;
            int64_t ctx_param_ext_tmp_21112 = ctx_param_ext_19045;
            int64_t ctx_param_ext_tmp_21113 = ctx_param_ext_19046;
            int64_t ctx_param_ext_tmp_21114 = ctx_param_ext_19047;
            int64_t ctx_param_ext_tmp_21115 = ctx_param_ext_19048;
            
            if (memblock_set(ctx, &mem_param_tmp_21116, &mem_param_19054,
                             "mem_param_19054") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21117, &mem_param_19059,
                             "mem_param_19059") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21118, &mem_param_19044,
                             "mem_param_19044") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21119, &mem_param_19049,
                             "mem_param_19049") != 0)
                return 1;
            ctx_param_ext_19040 = ctx_param_ext_tmp_21100;
            ctx_param_ext_19041 = ctx_param_ext_tmp_21101;
            ctx_param_ext_19042 = ctx_param_ext_tmp_21102;
            ctx_param_ext_19043 = ctx_param_ext_tmp_21103;
            ctx_param_ext_19045 = ctx_param_ext_tmp_21104;
            ctx_param_ext_19046 = ctx_param_ext_tmp_21105;
            ctx_param_ext_19047 = ctx_param_ext_tmp_21106;
            ctx_param_ext_19048 = ctx_param_ext_tmp_21107;
            ctx_param_ext_19050 = ctx_param_ext_tmp_21108;
            ctx_param_ext_19051 = ctx_param_ext_tmp_21109;
            ctx_param_ext_19052 = ctx_param_ext_tmp_21110;
            ctx_param_ext_19053 = ctx_param_ext_tmp_21111;
            ctx_param_ext_19055 = ctx_param_ext_tmp_21112;
            ctx_param_ext_19056 = ctx_param_ext_tmp_21113;
            ctx_param_ext_19057 = ctx_param_ext_tmp_21114;
            ctx_param_ext_19058 = ctx_param_ext_tmp_21115;
            if (memblock_set(ctx, &mem_param_19044, &mem_param_tmp_21116,
                             "mem_param_tmp_21116") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19049, &mem_param_tmp_21117,
                             "mem_param_tmp_21117") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19054, &mem_param_tmp_21118,
                             "mem_param_tmp_21118") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19059, &mem_param_tmp_21119,
                             "mem_param_tmp_21119") != 0)
                return 1;
        }
        ext_19208 = ctx_param_ext_19040;
        ext_19207 = ctx_param_ext_19041;
        ext_19206 = ctx_param_ext_19042;
        ext_19205 = ctx_param_ext_19043;
        ext_19204 = ctx_param_ext_19045;
        ext_19203 = ctx_param_ext_19046;
        ext_19202 = ctx_param_ext_19047;
        ext_19201 = ctx_param_ext_19048;
        ext_19200 = ctx_param_ext_19050;
        ext_19199 = ctx_param_ext_19051;
        ext_19198 = ctx_param_ext_19052;
        ext_19197 = ctx_param_ext_19053;
        ext_19196 = ctx_param_ext_19055;
        ext_19195 = ctx_param_ext_19056;
        ext_19194 = ctx_param_ext_19057;
        ext_19193 = ctx_param_ext_19058;
        if (memblock_set(ctx, &ext_mem_19192, &mem_param_19044,
                         "mem_param_19044") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19191, &mem_param_19049,
                         "mem_param_19049") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19190, &mem_param_19054,
                         "mem_param_19054") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19189, &mem_param_19059,
                         "mem_param_19059") != 0)
            return 1;
        for (int64_t i_16689 = 0; i_16689 < m_11007; i_16689++) {
            int32_t x_16014;
            
            x_16014 = ((int32_t *) mem_17118)[i_16689];
            
            float x_16015;
            
            x_16015 = ((float *) mem_18002)[i_16689 * n_11006 + i_16740];
            
            float x_16016;
            
            x_16016 = ((float *) mem_18006)[i_16689 * n_11006 + i_16740];
            
            bool cond_t_res_16017 = slt32(y_14930, x_16014);
            bool x_16018 = x_14939 && cond_t_res_16017;
            bool cond_t_res_16019 = slt32(x_16014, y_14931);
            bool x_16020 = x_16018 && cond_t_res_16019;
            float defunc_1_f_res_16021;
            
            if (x_16020) {
                defunc_1_f_res_16021 = 0.0F;
            } else {
                defunc_1_f_res_16021 = x_16015;
            }
            
            float defunc_1_f_res_16022;
            
            if (x_16020) {
                defunc_1_f_res_16022 = 0.0F;
            } else {
                defunc_1_f_res_16022 = x_16016;
            }
            ((float *) mem_19211.mem)[i_16689] = defunc_1_f_res_16021;
            ((float *) mem_19214.mem)[i_16689] = defunc_1_f_res_16022;
        }
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_19241.mem + (int64_t) 0, mem_19211.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_19244.mem + (int64_t) 0, mem_19214.mem + (int64_t) 0,
                    m_11007 * (int64_t) 4);
        
        int64_t ext_19413;
        int64_t ext_19412;
        int64_t ext_19411;
        int64_t ext_19410;
        int64_t ext_19409;
        int64_t ext_19408;
        int64_t ext_19407;
        int64_t ext_19406;
        int64_t ext_19405;
        int64_t ext_19404;
        int64_t ext_19403;
        int64_t ext_19402;
        int64_t ext_19401;
        int64_t ext_19400;
        int64_t ext_19399;
        int64_t ext_19398;
        int64_t ctx_param_ext_19245;
        int64_t ctx_param_ext_19246;
        int64_t ctx_param_ext_19247;
        int64_t ctx_param_ext_19248;
        int64_t ctx_param_ext_19250;
        int64_t ctx_param_ext_19251;
        int64_t ctx_param_ext_19252;
        int64_t ctx_param_ext_19253;
        int64_t ctx_param_ext_19255;
        int64_t ctx_param_ext_19256;
        int64_t ctx_param_ext_19257;
        int64_t ctx_param_ext_19258;
        int64_t ctx_param_ext_19260;
        int64_t ctx_param_ext_19261;
        int64_t ctx_param_ext_19262;
        int64_t ctx_param_ext_19263;
        
        ctx_param_ext_19245 = m_11007;
        ctx_param_ext_19246 = (int64_t) 0;
        ctx_param_ext_19247 = (int64_t) 1;
        ctx_param_ext_19248 = m_11007;
        ctx_param_ext_19250 = m_11007;
        ctx_param_ext_19251 = (int64_t) 0;
        ctx_param_ext_19252 = (int64_t) 1;
        ctx_param_ext_19253 = m_11007;
        ctx_param_ext_19255 = m_11007;
        ctx_param_ext_19256 = (int64_t) 0;
        ctx_param_ext_19257 = (int64_t) 1;
        ctx_param_ext_19258 = m_11007;
        ctx_param_ext_19260 = m_11007;
        ctx_param_ext_19261 = (int64_t) 0;
        ctx_param_ext_19262 = (int64_t) 1;
        ctx_param_ext_19263 = m_11007;
        if (memblock_set(ctx, &mem_param_19249, &mem_19211, "mem_19211") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19254, &mem_19214, "mem_19214") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19259, &mem_19241, "mem_19241") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19264, &mem_19244, "mem_19244") != 0)
            return 1;
        
        int32_t ns_16076;
        
        for (int64_t i_16071 = 0; i_16071 < i32_res_16043; i_16071++) {
            ns_16076 = ((int32_t *) mem_18672)[i_16071];
            for (int64_t i_16694 = 0; i_16694 < iota_arg_14709; i_16694++) {
                int32_t defunc_0_f_res_16079 = sext_i64_i32(i_16694);
                
                ((int32_t *) mem_19271)[i_16694] = defunc_0_f_res_16079;
            }
            
            int32_t i32_arg_16080 = mul32(2, ns_16076);
            float i32_res_16081 = sitofp_i32_f32(i32_arg_16080);
            bool zzero_16082 = ns_16076 == 0;
            bool nonzzero_16083 = !zzero_16082;
            bool nonzzero_cert_16084;
            
            if (!nonzzero_16083) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16708 = 0; i_16708 < iota_arg_14709; i_16708++) {
                int32_t x_16091;
                
                x_16091 = ((int32_t *) mem_19271)[i_16708];
                
                int32_t i32_arg_16092 = smod32(x_16091, ns_16076);
                float i32_res_16093 = sitofp_i32_f32(i32_arg_16092);
                float zt_res_16094 = 6.2831855F * i32_res_16093;
                float zs_res_16095 = zt_res_16094 / i32_res_16081;
                int64_t j_16096 = sext_i32_i64(x_16091);
                bool x_16097 = sle64((int64_t) 0, j_16096);
                bool y_16098 = slt64(j_16096, m_11007);
                bool bounds_check_16099 = x_16097 && y_16098;
                bool index_certs_16100;
                
                if (!bounds_check_16099) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_16096,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_16101;
                
                defunc_0_f_res_16101 =
                    ((float *) mem_param_19249.mem)[ctx_param_ext_19246 +
                                                    j_16096 *
                                                    ctx_param_ext_19247];
                
                float defunc_0_f_res_16102;
                
                defunc_0_f_res_16102 =
                    ((float *) mem_param_19254.mem)[ctx_param_ext_19251 +
                                                    j_16096 *
                                                    ctx_param_ext_19252];
                
                float sin_res_16103;
                
                sin_res_16103 = futrts_sin32(zs_res_16095);
                
                float cos_res_16104;
                
                cos_res_16104 = futrts_cos32(zs_res_16095);
                
                int32_t i_16105 = add32(y_14728, x_16091);
                int64_t i_16106 = sext_i32_i64(i_16105);
                bool x_16107 = sle64((int64_t) 0, i_16106);
                bool y_16108 = slt64(i_16106, m_11007);
                bool bounds_check_16109 = x_16107 && y_16108;
                bool index_certs_16110;
                
                if (!bounds_check_16109) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_16106,
                                  "] out of bounds for array of shape [",
                                  (long long) m_11007, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:80:24-62\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_16111;
                
                zt_arg_16111 =
                    ((float *) mem_param_19249.mem)[ctx_param_ext_19246 +
                                                    i_16106 *
                                                    ctx_param_ext_19247];
                
                float zt_arg_16112;
                
                zt_arg_16112 =
                    ((float *) mem_param_19254.mem)[ctx_param_ext_19251 +
                                                    i_16106 *
                                                    ctx_param_ext_19252];
                
                float zt_res_16113 = sin_res_16103 * zt_arg_16112;
                float zt_res_16114 = cos_res_16104 * zt_arg_16111;
                float zm_res_16115 = zt_res_16114 - zt_res_16113;
                float zt_res_16116 = sin_res_16103 * zt_arg_16111;
                float zt_res_16117 = cos_res_16104 * zt_arg_16112;
                float zp_res_16118 = zt_res_16116 + zt_res_16117;
                float zp_res_16119 = defunc_0_f_res_16101 + zm_res_16115;
                float zp_res_16120 = defunc_0_f_res_16102 + zp_res_16118;
                float zm_res_16121 = defunc_0_f_res_16101 - zm_res_16115;
                float zm_res_16122 = defunc_0_f_res_16102 - zp_res_16118;
                int32_t x_16123 = sdiv32(x_16091, ns_16076);
                int32_t x_16124 = mul32(ns_16076, x_16123);
                int32_t x_16125 = mul32(2, x_16124);
                int32_t idxD_16126 = add32(i32_arg_16092, x_16125);
                int64_t i32_res_16127 = sext_i32_i64(idxD_16126);
                int32_t i32_arg_16128 = add32(ns_16076, idxD_16126);
                int64_t i32_res_16129 = sext_i32_i64(i32_arg_16128);
                
                ((int64_t *) mem_19286)[i_16708] = i32_res_16127;
                ((float *) mem_19289)[i_16708] = zp_res_16119;
                ((float *) mem_19292)[i_16708] = zp_res_16120;
                ((int64_t *) mem_19295)[i_16708] = i32_res_16129;
                ((float *) mem_19298)[i_16708] = zm_res_16121;
                ((float *) mem_19301)[i_16708] = zm_res_16122;
            }
            for (int64_t write_iter_16715 = 0; write_iter_16715 <
                 iota_arg_14709; write_iter_16715++) {
                int64_t write_iv_16718;
                
                write_iv_16718 = ((int64_t *) mem_19286)[write_iter_16715];
                
                int64_t write_iv_16721;
                
                write_iv_16721 = ((int64_t *) mem_19295)[write_iter_16715];
                if (sle64((int64_t) 0, write_iv_16718) && slt64(write_iv_16718,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19259.mem + (ctx_param_ext_19256 +
                                                       ctx_param_ext_19257 *
                                                       write_iv_16718) *
                                (int64_t) 4, mem_19289 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16721) && slt64(write_iv_16721,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19259.mem + (ctx_param_ext_19256 +
                                                       ctx_param_ext_19257 *
                                                       write_iv_16721) *
                                (int64_t) 4, mem_19298 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16718) && slt64(write_iv_16718,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19264.mem + (ctx_param_ext_19261 +
                                                       ctx_param_ext_19262 *
                                                       write_iv_16718) *
                                (int64_t) 4, mem_19292 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16721) && slt64(write_iv_16721,
                                                                m_11007)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19264.mem + (ctx_param_ext_19261 +
                                                       ctx_param_ext_19262 *
                                                       write_iv_16721) *
                                (int64_t) 4, mem_19301 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16715) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21135 = ctx_param_ext_19255;
            int64_t ctx_param_ext_tmp_21136 = ctx_param_ext_19256;
            int64_t ctx_param_ext_tmp_21137 = ctx_param_ext_19257;
            int64_t ctx_param_ext_tmp_21138 = ctx_param_ext_19258;
            int64_t ctx_param_ext_tmp_21139 = ctx_param_ext_19260;
            int64_t ctx_param_ext_tmp_21140 = ctx_param_ext_19261;
            int64_t ctx_param_ext_tmp_21141 = ctx_param_ext_19262;
            int64_t ctx_param_ext_tmp_21142 = ctx_param_ext_19263;
            int64_t ctx_param_ext_tmp_21143 = ctx_param_ext_19245;
            int64_t ctx_param_ext_tmp_21144 = ctx_param_ext_19246;
            int64_t ctx_param_ext_tmp_21145 = ctx_param_ext_19247;
            int64_t ctx_param_ext_tmp_21146 = ctx_param_ext_19248;
            int64_t ctx_param_ext_tmp_21147 = ctx_param_ext_19250;
            int64_t ctx_param_ext_tmp_21148 = ctx_param_ext_19251;
            int64_t ctx_param_ext_tmp_21149 = ctx_param_ext_19252;
            int64_t ctx_param_ext_tmp_21150 = ctx_param_ext_19253;
            
            if (memblock_set(ctx, &mem_param_tmp_21151, &mem_param_19259,
                             "mem_param_19259") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21152, &mem_param_19264,
                             "mem_param_19264") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21153, &mem_param_19249,
                             "mem_param_19249") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21154, &mem_param_19254,
                             "mem_param_19254") != 0)
                return 1;
            ctx_param_ext_19245 = ctx_param_ext_tmp_21135;
            ctx_param_ext_19246 = ctx_param_ext_tmp_21136;
            ctx_param_ext_19247 = ctx_param_ext_tmp_21137;
            ctx_param_ext_19248 = ctx_param_ext_tmp_21138;
            ctx_param_ext_19250 = ctx_param_ext_tmp_21139;
            ctx_param_ext_19251 = ctx_param_ext_tmp_21140;
            ctx_param_ext_19252 = ctx_param_ext_tmp_21141;
            ctx_param_ext_19253 = ctx_param_ext_tmp_21142;
            ctx_param_ext_19255 = ctx_param_ext_tmp_21143;
            ctx_param_ext_19256 = ctx_param_ext_tmp_21144;
            ctx_param_ext_19257 = ctx_param_ext_tmp_21145;
            ctx_param_ext_19258 = ctx_param_ext_tmp_21146;
            ctx_param_ext_19260 = ctx_param_ext_tmp_21147;
            ctx_param_ext_19261 = ctx_param_ext_tmp_21148;
            ctx_param_ext_19262 = ctx_param_ext_tmp_21149;
            ctx_param_ext_19263 = ctx_param_ext_tmp_21150;
            if (memblock_set(ctx, &mem_param_19249, &mem_param_tmp_21151,
                             "mem_param_tmp_21151") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19254, &mem_param_tmp_21152,
                             "mem_param_tmp_21152") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19259, &mem_param_tmp_21153,
                             "mem_param_tmp_21153") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19264, &mem_param_tmp_21154,
                             "mem_param_tmp_21154") != 0)
                return 1;
        }
        ext_19413 = ctx_param_ext_19245;
        ext_19412 = ctx_param_ext_19246;
        ext_19411 = ctx_param_ext_19247;
        ext_19410 = ctx_param_ext_19248;
        ext_19409 = ctx_param_ext_19250;
        ext_19408 = ctx_param_ext_19251;
        ext_19407 = ctx_param_ext_19252;
        ext_19406 = ctx_param_ext_19253;
        ext_19405 = ctx_param_ext_19255;
        ext_19404 = ctx_param_ext_19256;
        ext_19403 = ctx_param_ext_19257;
        ext_19402 = ctx_param_ext_19258;
        ext_19401 = ctx_param_ext_19260;
        ext_19400 = ctx_param_ext_19261;
        ext_19399 = ctx_param_ext_19262;
        ext_19398 = ctx_param_ext_19263;
        if (memblock_set(ctx, &ext_mem_19397, &mem_param_19249,
                         "mem_param_19249") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19396, &mem_param_19254,
                         "mem_param_19254") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19395, &mem_param_19259,
                         "mem_param_19259") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19394, &mem_param_19264,
                         "mem_param_19264") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18718 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_18987.mem + ext_19002 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18987, "ext_mem_18987") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18722 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_18986.mem + ext_18998 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_18986, "ext_mem_18986") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18726 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_19192.mem + ext_19207 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19192, "ext_mem_19192") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18730 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_19191.mem + ext_19203 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19191, "ext_mem_19191") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18734 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_19397.mem + ext_19412 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19397, "ext_mem_19397") != 0)
            return 1;
        if (m_11007 * (int64_t) 4 > 0)
            memmove(mem_18738 + i_16740 * m_11007 * (int64_t) 4,
                    ext_mem_19396.mem + ext_19408 * (int64_t) 4, m_11007 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19396, "ext_mem_19396") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_18801, "mem_18801") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18804, "mem_18804") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18831, "mem_18831") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_18834, "mem_18834") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19006, "mem_19006") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19009, "mem_19009") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19036, "mem_19036") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19039, "mem_19039") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19211, "mem_19211") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19214, "mem_19214") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19241, "mem_19241") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19244, "mem_19244") != 0)
        return 1;
    
    float i64_res_14952 = sitofp_i64_f32(binop_x_17134);
    bool r_14953;
    int32_t r_14954;
    int64_t r_14955;
    bool loop_while_14956;
    int32_t r_14957;
    int64_t n_14958;
    
    loop_while_14956 = loop_cond_14688;
    r_14957 = 0;
    n_14958 = n_11006;
    while (loop_while_14956) {
        int64_t n_14959 = sdiv64(n_14958, (int64_t) 2);
        int32_t r_14960 = add32(1, r_14957);
        bool loop_cond_14961 = slt64((int64_t) 1, n_14959);
        bool loop_while_tmp_21168 = loop_cond_14961;
        int32_t r_tmp_21169 = r_14960;
        int64_t n_tmp_21170 = n_14959;
        
        loop_while_14956 = loop_while_tmp_21168;
        r_14957 = r_tmp_21169;
        n_14958 = n_tmp_21170;
    }
    r_14953 = loop_while_14956;
    r_14954 = r_14957;
    r_14955 = n_14958;
    
    int64_t i32_res_15070 = sext_i32_i64(r_14954);
    bool bounds_invalid_upwards_15071 = slt64(i32_res_15070, (int64_t) 0);
    bool valid_15072 = !bounds_invalid_upwards_15071;
    bool range_valid_c_15073;
    
    if (!valid_15072) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15070, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19462 = (int64_t) 4 * i32_res_15070;
    int64_t bytes_19463 = smax64((int64_t) 0, binop_y_19462);
    
    if (mem_19464_cached_sizze_21562 < bytes_19463) {
        err = lexical_realloc(&ctx->error, &mem_19464,
                              &mem_19464_cached_sizze_21562, bytes_19463);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16944 = 0; i_16944 < r_14954; i_16944++) {
        int64_t i_16749 = sext_i32_i64(i_16944);
        bool nonnegative_15080 = sle32(0, i_16944);
        bool nonzzero_cert_15081;
        
        if (!nonnegative_15080) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15082 = shl32(1, i_16944);
        
        ((int32_t *) mem_19464)[i_16749] = defunc_0_f_res_15082;
    }
    
    bool loop_nonempty_15083 = slt64((int64_t) 0, i32_res_15070);
    bool loop_not_taken_15084 = !loop_nonempty_15083;
    bool protect_assert_disj_15085 = dim_match_14838 || loop_not_taken_15084;
    bool empty_or_match_cert_15086;
    
    if (!protect_assert_disj_15085) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15087;
    
    if (!protect_assert_disj_15085) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:61:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool r_16025;
    int32_t r_16026;
    int64_t r_16027;
    bool loop_while_16028;
    int32_t r_16029;
    int64_t n_16030;
    
    loop_while_16028 = loop_cond_14688;
    r_16029 = 0;
    n_16030 = n_11006;
    while (loop_while_16028) {
        int64_t n_16031 = sdiv64(n_16030, (int64_t) 2);
        int32_t r_16032 = add32(1, r_16029);
        bool loop_cond_16033 = slt64((int64_t) 1, n_16031);
        bool loop_while_tmp_21172 = loop_cond_16033;
        int32_t r_tmp_21173 = r_16032;
        int64_t n_tmp_21174 = n_16031;
        
        loop_while_16028 = loop_while_tmp_21172;
        r_16029 = r_tmp_21173;
        n_16030 = n_tmp_21174;
    }
    r_16025 = loop_while_16028;
    r_16026 = r_16029;
    r_16027 = n_16030;
    
    int64_t i32_res_16142 = sext_i32_i64(r_16026);
    bool loop_nonempty_16155 = slt64((int64_t) 0, i32_res_16142);
    bool loop_not_taken_16156 = !loop_nonempty_16155;
    bool protect_assert_disj_16157 = dim_match_14838 || loop_not_taken_16156;
    bool empty_or_match_cert_16159;
    
    if (!protect_assert_disj_16157) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_16158;
    
    if (!protect_assert_disj_16157) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:63:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_16143 = slt64(i32_res_16142, (int64_t) 0);
    bool valid_16144 = !bounds_invalid_upwards_16143;
    bool range_valid_c_16145;
    
    if (!valid_16144) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_16142, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19477 = (int64_t) 4 * i32_res_16142;
    int64_t bytes_19478 = smax64((int64_t) 0, binop_y_19477);
    
    if (mem_19479_cached_sizze_21563 < bytes_19478) {
        err = lexical_realloc(&ctx->error, &mem_19479,
                              &mem_19479_cached_sizze_21563, bytes_19478);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16945 = 0; i_16945 < r_16026; i_16945++) {
        int64_t i_16753 = sext_i32_i64(i_16945);
        bool nonnegative_16152 = sle32(0, i_16945);
        bool nonzzero_cert_16153;
        
        if (!nonnegative_16152) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_16154 = shl32(1, i_16945);
        
        ((int32_t *) mem_19479)[i_16753] = defunc_0_f_res_16154;
    }
    
    bool r_15489;
    int32_t r_15490;
    int64_t r_15491;
    bool loop_while_15492;
    int32_t r_15493;
    int64_t n_15494;
    
    loop_while_15492 = loop_cond_14688;
    r_15493 = 0;
    n_15494 = n_11006;
    while (loop_while_15492) {
        int64_t n_15495 = sdiv64(n_15494, (int64_t) 2);
        int32_t r_15496 = add32(1, r_15493);
        bool loop_cond_15497 = slt64((int64_t) 1, n_15495);
        bool loop_while_tmp_21176 = loop_cond_15497;
        int32_t r_tmp_21177 = r_15496;
        int64_t n_tmp_21178 = n_15495;
        
        loop_while_15492 = loop_while_tmp_21176;
        r_15493 = r_tmp_21177;
        n_15494 = n_tmp_21178;
    }
    r_15489 = loop_while_15492;
    r_15490 = r_15493;
    r_15491 = n_15494;
    
    int64_t i32_res_15606 = sext_i32_i64(r_15490);
    bool loop_nonempty_15619 = slt64((int64_t) 0, i32_res_15606);
    bool loop_not_taken_15620 = !loop_nonempty_15619;
    bool protect_assert_disj_15621 = dim_match_14838 || loop_not_taken_15620;
    bool empty_or_match_cert_15623;
    
    if (!protect_assert_disj_15621) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]i64`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:41:22-41\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool empty_or_match_cert_15622;
    
    if (!protect_assert_disj_15621) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               (long long) conc_tmp_14837,
                               ") cannot match shape of type `[",
                               (long long) n_11006, "]complex`.",
                               "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:42:22-45\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #4  sample_programs/fft.fut:46:17-34\n   #5  sample_programs/fft.fut:62:12-29\n   #6  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_15607 = slt64(i32_res_15606, (int64_t) 0);
    bool valid_15608 = !bounds_invalid_upwards_15607;
    bool range_valid_c_15609;
    
    if (!valid_15608) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) i32_res_15606, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:42-52\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_19492 = (int64_t) 4 * i32_res_15606;
    int64_t bytes_19493 = smax64((int64_t) 0, binop_y_19492);
    
    if (mem_19494_cached_sizze_21564 < bytes_19493) {
        err = lexical_realloc(&ctx->error, &mem_19494,
                              &mem_19494_cached_sizze_21564, bytes_19493);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int32_t i_16946 = 0; i_16946 < r_15490; i_16946++) {
        int64_t i_16757 = sext_i32_i64(i_16946);
        bool nonnegative_15616 = sle32(0, i_16946);
        bool nonzzero_cert_15617;
        
        if (!nonnegative_15616) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "negative exponent",
                                   "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:18-26\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:35:14-54\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t defunc_0_f_res_15618 = shl32(1, i_16946);
        
        ((int32_t *) mem_19494)[i_16757] = defunc_0_f_res_15618;
    }
    if (mem_19510_cached_sizze_21565 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19510,
                              &mem_19510_cached_sizze_21565, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19514_cached_sizze_21566 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19514,
                              &mem_19514_cached_sizze_21566, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19518_cached_sizze_21567 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19518,
                              &mem_19518_cached_sizze_21567, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19522_cached_sizze_21568 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19522,
                              &mem_19522_cached_sizze_21568, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19526_cached_sizze_21569 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19526,
                              &mem_19526_cached_sizze_21569, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19530_cached_sizze_21570 < bytes_17985) {
        err = lexical_realloc(&ctx->error, &mem_19530,
                              &mem_19530_cached_sizze_21570, bytes_17985);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19591 = (int64_t) 4 * n_11006;
    int64_t bytes_19592 = smax64((int64_t) 0, binop_y_19591);
    
    if (memblock_alloc(ctx, &mem_19593, bytes_19592, "mem_19593")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19596, bytes_19592, "mem_19596")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19599, bytes_19592, "mem_19599")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19602, bytes_19592, "mem_19602")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19605, bytes_19592, "mem_19605")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19608, bytes_19592, "mem_19608")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19611, bytes_19592, "mem_19611")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19614, bytes_19592, "mem_19614")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19643 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_19644 = smax64((int64_t) 0, binop_y_19643);
    
    if (mem_19645_cached_sizze_21571 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19645,
                              &mem_19645_cached_sizze_21571, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19658 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_19659 = smax64((int64_t) 0, binop_y_19658);
    
    if (mem_19660_cached_sizze_21572 < bytes_19659) {
        err = lexical_realloc(&ctx->error, &mem_19660,
                              &mem_19660_cached_sizze_21572, bytes_19659);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19663_cached_sizze_21573 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19663,
                              &mem_19663_cached_sizze_21573, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19666_cached_sizze_21574 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19666,
                              &mem_19666_cached_sizze_21574, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19669_cached_sizze_21575 < bytes_19659) {
        err = lexical_realloc(&ctx->error, &mem_19669,
                              &mem_19669_cached_sizze_21575, bytes_19659);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19672_cached_sizze_21576 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19672,
                              &mem_19672_cached_sizze_21576, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19675_cached_sizze_21577 < bytes_19644) {
        err = lexical_realloc(&ctx->error, &mem_19675,
                              &mem_19675_cached_sizze_21577, bytes_19644);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19790, bytes_19592, "mem_19790")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19793, bytes_19592, "mem_19793")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_19822 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_19823 = smax64((int64_t) 0, binop_y_19822);
    
    if (mem_19824_cached_sizze_21578 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19824,
                              &mem_19824_cached_sizze_21578, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_19837 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_19838 = smax64((int64_t) 0, binop_y_19837);
    
    if (mem_19839_cached_sizze_21579 < bytes_19838) {
        err = lexical_realloc(&ctx->error, &mem_19839,
                              &mem_19839_cached_sizze_21579, bytes_19838);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19842_cached_sizze_21580 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19842,
                              &mem_19842_cached_sizze_21580, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19845_cached_sizze_21581 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19845,
                              &mem_19845_cached_sizze_21581, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19848_cached_sizze_21582 < bytes_19838) {
        err = lexical_realloc(&ctx->error, &mem_19848,
                              &mem_19848_cached_sizze_21582, bytes_19838);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19851_cached_sizze_21583 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19851,
                              &mem_19851_cached_sizze_21583, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_19854_cached_sizze_21584 < bytes_19823) {
        err = lexical_realloc(&ctx->error, &mem_19854,
                              &mem_19854_cached_sizze_21584, bytes_19823);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19969, bytes_19592, "mem_19969")) {
        err = 1;
        goto cleanup;
    }
    if (memblock_alloc(ctx, &mem_19972, bytes_19592, "mem_19972")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_20001 = (int64_t) 4 * iota_arg_14817;
    int64_t bytes_20002 = smax64((int64_t) 0, binop_y_20001);
    
    if (mem_20003_cached_sizze_21585 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20003,
                              &mem_20003_cached_sizze_21585, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_y_20016 = (int64_t) 8 * iota_arg_14817;
    int64_t bytes_20017 = smax64((int64_t) 0, binop_y_20016);
    
    if (mem_20018_cached_sizze_21586 < bytes_20017) {
        err = lexical_realloc(&ctx->error, &mem_20018,
                              &mem_20018_cached_sizze_21586, bytes_20017);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20021_cached_sizze_21587 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20021,
                              &mem_20021_cached_sizze_21587, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20024_cached_sizze_21588 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20024,
                              &mem_20024_cached_sizze_21588, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20027_cached_sizze_21589 < bytes_20017) {
        err = lexical_realloc(&ctx->error, &mem_20027,
                              &mem_20027_cached_sizze_21589, bytes_20017);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20030_cached_sizze_21590 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20030,
                              &mem_20030_cached_sizze_21590, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20033_cached_sizze_21591 < bytes_20002) {
        err = lexical_realloc(&ctx->error, &mem_20033,
                              &mem_20033_cached_sizze_21591, bytes_20002);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16879 = 0; i_16879 < m_11007; i_16879++) {
        for (int64_t i_21186 = 0; i_21186 < n_11006; i_21186++) {
            float tmp_21187;
            
            tmp_21187 = ((float *) mem_18718)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21186 * m_11007];
            ((float *) mem_19593.mem)[i_21186] = tmp_21187;
        }
        for (int64_t i_21188 = 0; i_21188 < n_11006; i_21188++) {
            float tmp_21189;
            
            tmp_21189 = ((float *) mem_18722)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21188 * m_11007];
            ((float *) mem_19596.mem)[i_21188] = tmp_21189;
        }
        for (int64_t i_21190 = 0; i_21190 < n_11006; i_21190++) {
            float tmp_21191;
            
            tmp_21191 = ((float *) mem_18726)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21190 * m_11007];
            ((float *) mem_19599.mem)[i_21190] = tmp_21191;
        }
        for (int64_t i_21192 = 0; i_21192 < n_11006; i_21192++) {
            float tmp_21193;
            
            tmp_21193 = ((float *) mem_18730)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21192 * m_11007];
            ((float *) mem_19602.mem)[i_21192] = tmp_21193;
        }
        for (int64_t i_21194 = 0; i_21194 < n_11006; i_21194++) {
            float tmp_21195;
            
            tmp_21195 = ((float *) mem_18734)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21194 * m_11007];
            ((float *) mem_19605.mem)[i_21194] = tmp_21195;
        }
        for (int64_t i_21196 = 0; i_21196 < n_11006; i_21196++) {
            float tmp_21197;
            
            tmp_21197 = ((float *) mem_18738)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21196 * m_11007];
            ((float *) mem_19608.mem)[i_21196] = tmp_21197;
        }
        for (int64_t i_21198 = 0; i_21198 < n_11006; i_21198++) {
            float tmp_21199;
            
            tmp_21199 = ((float *) mem_18718)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21198 * m_11007];
            ((float *) mem_19611.mem)[i_21198] = tmp_21199;
        }
        for (int64_t i_21200 = 0; i_21200 < n_11006; i_21200++) {
            float tmp_21201;
            
            tmp_21201 = ((float *) mem_18722)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21200 * m_11007];
            ((float *) mem_19614.mem)[i_21200] = tmp_21201;
        }
        
        int64_t ext_19787;
        int64_t ext_19786;
        int64_t ext_19785;
        int64_t ext_19784;
        int64_t ext_19783;
        int64_t ext_19782;
        int64_t ext_19781;
        int64_t ext_19780;
        int64_t ext_19779;
        int64_t ext_19778;
        int64_t ext_19777;
        int64_t ext_19776;
        int64_t ext_19775;
        int64_t ext_19774;
        int64_t ext_19773;
        int64_t ext_19772;
        int64_t ctx_param_ext_19615;
        int64_t ctx_param_ext_19616;
        int64_t ctx_param_ext_19617;
        int64_t ctx_param_ext_19618;
        int64_t ctx_param_ext_19620;
        int64_t ctx_param_ext_19621;
        int64_t ctx_param_ext_19622;
        int64_t ctx_param_ext_19623;
        int64_t ctx_param_ext_19625;
        int64_t ctx_param_ext_19626;
        int64_t ctx_param_ext_19627;
        int64_t ctx_param_ext_19628;
        int64_t ctx_param_ext_19630;
        int64_t ctx_param_ext_19631;
        int64_t ctx_param_ext_19632;
        int64_t ctx_param_ext_19633;
        
        ctx_param_ext_19615 = n_11006;
        ctx_param_ext_19616 = (int64_t) 0;
        ctx_param_ext_19617 = (int64_t) 1;
        ctx_param_ext_19618 = n_11006;
        ctx_param_ext_19620 = n_11006;
        ctx_param_ext_19621 = (int64_t) 0;
        ctx_param_ext_19622 = (int64_t) 1;
        ctx_param_ext_19623 = n_11006;
        ctx_param_ext_19625 = n_11006;
        ctx_param_ext_19626 = (int64_t) 0;
        ctx_param_ext_19627 = (int64_t) 1;
        ctx_param_ext_19628 = n_11006;
        ctx_param_ext_19630 = n_11006;
        ctx_param_ext_19631 = (int64_t) 0;
        ctx_param_ext_19632 = (int64_t) 1;
        ctx_param_ext_19633 = n_11006;
        if (memblock_set(ctx, &mem_param_19619, &mem_19593, "mem_19593") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19624, &mem_19596, "mem_19596") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19629, &mem_19611, "mem_19611") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19634, &mem_19614, "mem_19614") != 0)
            return 1;
        
        int32_t ns_15103;
        
        for (int64_t i_15098 = 0; i_15098 < i32_res_15070; i_15098++) {
            ns_15103 = ((int32_t *) mem_19464)[i_15098];
            for (int64_t i_16761 = 0; i_16761 < iota_arg_14817; i_16761++) {
                int32_t defunc_0_f_res_15106 = sext_i64_i32(i_16761);
                
                ((int32_t *) mem_19645)[i_16761] = defunc_0_f_res_15106;
            }
            
            int32_t i32_arg_15107 = mul32(2, ns_15103);
            float i32_res_15108 = sitofp_i32_f32(i32_arg_15107);
            bool zzero_15109 = ns_15103 == 0;
            bool nonzzero_15110 = !zzero_15109;
            bool nonzzero_cert_15111;
            
            if (!nonzzero_15110) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16775 = 0; i_16775 < iota_arg_14817; i_16775++) {
                int32_t x_15118;
                
                x_15118 = ((int32_t *) mem_19645)[i_16775];
                
                int32_t i32_arg_15119 = smod32(x_15118, ns_15103);
                float i32_res_15120 = sitofp_i32_f32(i32_arg_15119);
                float zt_res_15121 = 6.2831855F * i32_res_15120;
                float zs_res_15122 = zt_res_15121 / i32_res_15108;
                int64_t j_15123 = sext_i32_i64(x_15118);
                bool x_15124 = sle64((int64_t) 0, j_15123);
                bool y_15125 = slt64(j_15123, n_11006);
                bool bounds_check_15126 = x_15124 && y_15125;
                bool index_certs_15127;
                
                if (!bounds_check_15126) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15123,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15128;
                
                defunc_0_f_res_15128 =
                    ((float *) mem_param_19619.mem)[ctx_param_ext_19616 +
                                                    j_15123 *
                                                    ctx_param_ext_19617];
                
                float defunc_0_f_res_15129;
                
                defunc_0_f_res_15129 =
                    ((float *) mem_param_19624.mem)[ctx_param_ext_19621 +
                                                    j_15123 *
                                                    ctx_param_ext_19622];
                
                float sin_res_15130;
                
                sin_res_15130 = futrts_sin32(zs_res_15122);
                
                float cos_res_15131;
                
                cos_res_15131 = futrts_cos32(zs_res_15122);
                
                int32_t i_15132 = add32(y_14836, x_15118);
                int64_t i_15133 = sext_i32_i64(i_15132);
                bool x_15134 = sle64((int64_t) 0, i_15133);
                bool y_15135 = slt64(i_15133, n_11006);
                bool bounds_check_15136 = x_15134 && y_15135;
                bool index_certs_15137;
                
                if (!bounds_check_15136) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15133,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:61:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15138;
                
                zt_arg_15138 =
                    ((float *) mem_param_19619.mem)[ctx_param_ext_19616 +
                                                    i_15133 *
                                                    ctx_param_ext_19617];
                
                float zt_arg_15139;
                
                zt_arg_15139 =
                    ((float *) mem_param_19624.mem)[ctx_param_ext_19621 +
                                                    i_15133 *
                                                    ctx_param_ext_19622];
                
                float zt_res_15140 = sin_res_15130 * zt_arg_15139;
                float zt_res_15141 = cos_res_15131 * zt_arg_15138;
                float zm_res_15142 = zt_res_15141 - zt_res_15140;
                float zt_res_15143 = sin_res_15130 * zt_arg_15138;
                float zt_res_15144 = cos_res_15131 * zt_arg_15139;
                float zp_res_15145 = zt_res_15143 + zt_res_15144;
                float zp_res_15146 = defunc_0_f_res_15128 + zm_res_15142;
                float zp_res_15147 = defunc_0_f_res_15129 + zp_res_15145;
                float zm_res_15148 = defunc_0_f_res_15128 - zm_res_15142;
                float zm_res_15149 = defunc_0_f_res_15129 - zp_res_15145;
                int32_t x_15150 = sdiv32(x_15118, ns_15103);
                int32_t x_15151 = mul32(ns_15103, x_15150);
                int32_t x_15152 = mul32(2, x_15151);
                int32_t idxD_15153 = add32(i32_arg_15119, x_15152);
                int64_t i32_res_15154 = sext_i32_i64(idxD_15153);
                int32_t i32_arg_15155 = add32(ns_15103, idxD_15153);
                int64_t i32_res_15156 = sext_i32_i64(i32_arg_15155);
                
                ((int64_t *) mem_19660)[i_16775] = i32_res_15154;
                ((float *) mem_19663)[i_16775] = zp_res_15146;
                ((float *) mem_19666)[i_16775] = zp_res_15147;
                ((int64_t *) mem_19669)[i_16775] = i32_res_15156;
                ((float *) mem_19672)[i_16775] = zm_res_15148;
                ((float *) mem_19675)[i_16775] = zm_res_15149;
            }
            for (int64_t write_iter_16782 = 0; write_iter_16782 <
                 iota_arg_14817; write_iter_16782++) {
                int64_t write_iv_16785;
                
                write_iv_16785 = ((int64_t *) mem_19660)[write_iter_16782];
                
                int64_t write_iv_16788;
                
                write_iv_16788 = ((int64_t *) mem_19669)[write_iter_16782];
                if (sle64((int64_t) 0, write_iv_16785) && slt64(write_iv_16785,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19629.mem + (ctx_param_ext_19626 +
                                                       ctx_param_ext_19627 *
                                                       write_iv_16785) *
                                (int64_t) 4, mem_19663 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16788) && slt64(write_iv_16788,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19629.mem + (ctx_param_ext_19626 +
                                                       ctx_param_ext_19627 *
                                                       write_iv_16788) *
                                (int64_t) 4, mem_19672 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16785) && slt64(write_iv_16785,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19634.mem + (ctx_param_ext_19631 +
                                                       ctx_param_ext_19632 *
                                                       write_iv_16785) *
                                (int64_t) 4, mem_19666 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16788) && slt64(write_iv_16788,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19634.mem + (ctx_param_ext_19631 +
                                                       ctx_param_ext_19632 *
                                                       write_iv_16788) *
                                (int64_t) 4, mem_19675 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16782) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21202 = ctx_param_ext_19625;
            int64_t ctx_param_ext_tmp_21203 = ctx_param_ext_19626;
            int64_t ctx_param_ext_tmp_21204 = ctx_param_ext_19627;
            int64_t ctx_param_ext_tmp_21205 = ctx_param_ext_19628;
            int64_t ctx_param_ext_tmp_21206 = ctx_param_ext_19630;
            int64_t ctx_param_ext_tmp_21207 = ctx_param_ext_19631;
            int64_t ctx_param_ext_tmp_21208 = ctx_param_ext_19632;
            int64_t ctx_param_ext_tmp_21209 = ctx_param_ext_19633;
            int64_t ctx_param_ext_tmp_21210 = ctx_param_ext_19615;
            int64_t ctx_param_ext_tmp_21211 = ctx_param_ext_19616;
            int64_t ctx_param_ext_tmp_21212 = ctx_param_ext_19617;
            int64_t ctx_param_ext_tmp_21213 = ctx_param_ext_19618;
            int64_t ctx_param_ext_tmp_21214 = ctx_param_ext_19620;
            int64_t ctx_param_ext_tmp_21215 = ctx_param_ext_19621;
            int64_t ctx_param_ext_tmp_21216 = ctx_param_ext_19622;
            int64_t ctx_param_ext_tmp_21217 = ctx_param_ext_19623;
            
            if (memblock_set(ctx, &mem_param_tmp_21218, &mem_param_19629,
                             "mem_param_19629") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21219, &mem_param_19634,
                             "mem_param_19634") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21220, &mem_param_19619,
                             "mem_param_19619") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21221, &mem_param_19624,
                             "mem_param_19624") != 0)
                return 1;
            ctx_param_ext_19615 = ctx_param_ext_tmp_21202;
            ctx_param_ext_19616 = ctx_param_ext_tmp_21203;
            ctx_param_ext_19617 = ctx_param_ext_tmp_21204;
            ctx_param_ext_19618 = ctx_param_ext_tmp_21205;
            ctx_param_ext_19620 = ctx_param_ext_tmp_21206;
            ctx_param_ext_19621 = ctx_param_ext_tmp_21207;
            ctx_param_ext_19622 = ctx_param_ext_tmp_21208;
            ctx_param_ext_19623 = ctx_param_ext_tmp_21209;
            ctx_param_ext_19625 = ctx_param_ext_tmp_21210;
            ctx_param_ext_19626 = ctx_param_ext_tmp_21211;
            ctx_param_ext_19627 = ctx_param_ext_tmp_21212;
            ctx_param_ext_19628 = ctx_param_ext_tmp_21213;
            ctx_param_ext_19630 = ctx_param_ext_tmp_21214;
            ctx_param_ext_19631 = ctx_param_ext_tmp_21215;
            ctx_param_ext_19632 = ctx_param_ext_tmp_21216;
            ctx_param_ext_19633 = ctx_param_ext_tmp_21217;
            if (memblock_set(ctx, &mem_param_19619, &mem_param_tmp_21218,
                             "mem_param_tmp_21218") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19624, &mem_param_tmp_21219,
                             "mem_param_tmp_21219") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19629, &mem_param_tmp_21220,
                             "mem_param_tmp_21220") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19634, &mem_param_tmp_21221,
                             "mem_param_tmp_21221") != 0)
                return 1;
        }
        ext_19787 = ctx_param_ext_19615;
        ext_19786 = ctx_param_ext_19616;
        ext_19785 = ctx_param_ext_19617;
        ext_19784 = ctx_param_ext_19618;
        ext_19783 = ctx_param_ext_19620;
        ext_19782 = ctx_param_ext_19621;
        ext_19781 = ctx_param_ext_19622;
        ext_19780 = ctx_param_ext_19623;
        ext_19779 = ctx_param_ext_19625;
        ext_19778 = ctx_param_ext_19626;
        ext_19777 = ctx_param_ext_19627;
        ext_19776 = ctx_param_ext_19628;
        ext_19775 = ctx_param_ext_19630;
        ext_19774 = ctx_param_ext_19631;
        ext_19773 = ctx_param_ext_19632;
        ext_19772 = ctx_param_ext_19633;
        if (memblock_set(ctx, &ext_mem_19771, &mem_param_19619,
                         "mem_param_19619") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19770, &mem_param_19624,
                         "mem_param_19624") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19769, &mem_param_19629,
                         "mem_param_19629") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19768, &mem_param_19634,
                         "mem_param_19634") != 0)
            return 1;
        for (int64_t i_21235 = 0; i_21235 < n_11006; i_21235++) {
            float tmp_21236;
            
            tmp_21236 = ((float *) mem_18726)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21235 * m_11007];
            ((float *) mem_19790.mem)[i_21235] = tmp_21236;
        }
        for (int64_t i_21237 = 0; i_21237 < n_11006; i_21237++) {
            float tmp_21238;
            
            tmp_21238 = ((float *) mem_18730)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21237 * m_11007];
            ((float *) mem_19793.mem)[i_21237] = tmp_21238;
        }
        
        int64_t ext_19966;
        int64_t ext_19965;
        int64_t ext_19964;
        int64_t ext_19963;
        int64_t ext_19962;
        int64_t ext_19961;
        int64_t ext_19960;
        int64_t ext_19959;
        int64_t ext_19958;
        int64_t ext_19957;
        int64_t ext_19956;
        int64_t ext_19955;
        int64_t ext_19954;
        int64_t ext_19953;
        int64_t ext_19952;
        int64_t ext_19951;
        int64_t ctx_param_ext_19794;
        int64_t ctx_param_ext_19795;
        int64_t ctx_param_ext_19796;
        int64_t ctx_param_ext_19797;
        int64_t ctx_param_ext_19799;
        int64_t ctx_param_ext_19800;
        int64_t ctx_param_ext_19801;
        int64_t ctx_param_ext_19802;
        int64_t ctx_param_ext_19804;
        int64_t ctx_param_ext_19805;
        int64_t ctx_param_ext_19806;
        int64_t ctx_param_ext_19807;
        int64_t ctx_param_ext_19809;
        int64_t ctx_param_ext_19810;
        int64_t ctx_param_ext_19811;
        int64_t ctx_param_ext_19812;
        
        ctx_param_ext_19794 = n_11006;
        ctx_param_ext_19795 = (int64_t) 0;
        ctx_param_ext_19796 = (int64_t) 1;
        ctx_param_ext_19797 = n_11006;
        ctx_param_ext_19799 = n_11006;
        ctx_param_ext_19800 = (int64_t) 0;
        ctx_param_ext_19801 = (int64_t) 1;
        ctx_param_ext_19802 = n_11006;
        ctx_param_ext_19804 = n_11006;
        ctx_param_ext_19805 = (int64_t) 0;
        ctx_param_ext_19806 = (int64_t) 1;
        ctx_param_ext_19807 = n_11006;
        ctx_param_ext_19809 = n_11006;
        ctx_param_ext_19810 = (int64_t) 0;
        ctx_param_ext_19811 = (int64_t) 1;
        ctx_param_ext_19812 = n_11006;
        if (memblock_set(ctx, &mem_param_19798, &mem_19599, "mem_19599") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19803, &mem_19602, "mem_19602") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19808, &mem_19790, "mem_19790") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19813, &mem_19793, "mem_19793") != 0)
            return 1;
        
        int32_t ns_15639;
        
        for (int64_t i_15634 = 0; i_15634 < i32_res_15606; i_15634++) {
            ns_15639 = ((int32_t *) mem_19494)[i_15634];
            for (int64_t i_16797 = 0; i_16797 < iota_arg_14817; i_16797++) {
                int32_t defunc_0_f_res_15642 = sext_i64_i32(i_16797);
                
                ((int32_t *) mem_19824)[i_16797] = defunc_0_f_res_15642;
            }
            
            int32_t i32_arg_15643 = mul32(2, ns_15639);
            float i32_res_15644 = sitofp_i32_f32(i32_arg_15643);
            bool zzero_15645 = ns_15639 == 0;
            bool nonzzero_15646 = !zzero_15645;
            bool nonzzero_cert_15647;
            
            if (!nonzzero_15646) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16811 = 0; i_16811 < iota_arg_14817; i_16811++) {
                int32_t x_15654;
                
                x_15654 = ((int32_t *) mem_19824)[i_16811];
                
                int32_t i32_arg_15655 = smod32(x_15654, ns_15639);
                float i32_res_15656 = sitofp_i32_f32(i32_arg_15655);
                float zt_res_15657 = 6.2831855F * i32_res_15656;
                float zs_res_15658 = zt_res_15657 / i32_res_15644;
                int64_t j_15659 = sext_i32_i64(x_15654);
                bool x_15660 = sle64((int64_t) 0, j_15659);
                bool y_15661 = slt64(j_15659, n_11006);
                bool bounds_check_15662 = x_15660 && y_15661;
                bool index_certs_15663;
                
                if (!bounds_check_15662) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_15659,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_15664;
                
                defunc_0_f_res_15664 =
                    ((float *) mem_param_19798.mem)[ctx_param_ext_19795 +
                                                    j_15659 *
                                                    ctx_param_ext_19796];
                
                float defunc_0_f_res_15665;
                
                defunc_0_f_res_15665 =
                    ((float *) mem_param_19803.mem)[ctx_param_ext_19800 +
                                                    j_15659 *
                                                    ctx_param_ext_19801];
                
                float sin_res_15666;
                
                sin_res_15666 = futrts_sin32(zs_res_15658);
                
                float cos_res_15667;
                
                cos_res_15667 = futrts_cos32(zs_res_15658);
                
                int32_t i_15668 = add32(y_14836, x_15654);
                int64_t i_15669 = sext_i32_i64(i_15668);
                bool x_15670 = sle64((int64_t) 0, i_15669);
                bool y_15671 = slt64(i_15669, n_11006);
                bool bounds_check_15672 = x_15670 && y_15671;
                bool index_certs_15673;
                
                if (!bounds_check_15672) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_15669,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:62:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_15674;
                
                zt_arg_15674 =
                    ((float *) mem_param_19798.mem)[ctx_param_ext_19795 +
                                                    i_15669 *
                                                    ctx_param_ext_19796];
                
                float zt_arg_15675;
                
                zt_arg_15675 =
                    ((float *) mem_param_19803.mem)[ctx_param_ext_19800 +
                                                    i_15669 *
                                                    ctx_param_ext_19801];
                
                float zt_res_15676 = sin_res_15666 * zt_arg_15675;
                float zt_res_15677 = cos_res_15667 * zt_arg_15674;
                float zm_res_15678 = zt_res_15677 - zt_res_15676;
                float zt_res_15679 = sin_res_15666 * zt_arg_15674;
                float zt_res_15680 = cos_res_15667 * zt_arg_15675;
                float zp_res_15681 = zt_res_15679 + zt_res_15680;
                float zp_res_15682 = defunc_0_f_res_15664 + zm_res_15678;
                float zp_res_15683 = defunc_0_f_res_15665 + zp_res_15681;
                float zm_res_15684 = defunc_0_f_res_15664 - zm_res_15678;
                float zm_res_15685 = defunc_0_f_res_15665 - zp_res_15681;
                int32_t x_15686 = sdiv32(x_15654, ns_15639);
                int32_t x_15687 = mul32(ns_15639, x_15686);
                int32_t x_15688 = mul32(2, x_15687);
                int32_t idxD_15689 = add32(i32_arg_15655, x_15688);
                int64_t i32_res_15690 = sext_i32_i64(idxD_15689);
                int32_t i32_arg_15691 = add32(ns_15639, idxD_15689);
                int64_t i32_res_15692 = sext_i32_i64(i32_arg_15691);
                
                ((int64_t *) mem_19839)[i_16811] = i32_res_15690;
                ((float *) mem_19842)[i_16811] = zp_res_15682;
                ((float *) mem_19845)[i_16811] = zp_res_15683;
                ((int64_t *) mem_19848)[i_16811] = i32_res_15692;
                ((float *) mem_19851)[i_16811] = zm_res_15684;
                ((float *) mem_19854)[i_16811] = zm_res_15685;
            }
            for (int64_t write_iter_16818 = 0; write_iter_16818 <
                 iota_arg_14817; write_iter_16818++) {
                int64_t write_iv_16821;
                
                write_iv_16821 = ((int64_t *) mem_19839)[write_iter_16818];
                
                int64_t write_iv_16824;
                
                write_iv_16824 = ((int64_t *) mem_19848)[write_iter_16818];
                if (sle64((int64_t) 0, write_iv_16821) && slt64(write_iv_16821,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19808.mem + (ctx_param_ext_19805 +
                                                       ctx_param_ext_19806 *
                                                       write_iv_16821) *
                                (int64_t) 4, mem_19842 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16824) && slt64(write_iv_16824,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19808.mem + (ctx_param_ext_19805 +
                                                       ctx_param_ext_19806 *
                                                       write_iv_16824) *
                                (int64_t) 4, mem_19851 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16821) && slt64(write_iv_16821,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19813.mem + (ctx_param_ext_19810 +
                                                       ctx_param_ext_19811 *
                                                       write_iv_16821) *
                                (int64_t) 4, mem_19845 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16824) && slt64(write_iv_16824,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19813.mem + (ctx_param_ext_19810 +
                                                       ctx_param_ext_19811 *
                                                       write_iv_16824) *
                                (int64_t) 4, mem_19854 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16818) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21239 = ctx_param_ext_19804;
            int64_t ctx_param_ext_tmp_21240 = ctx_param_ext_19805;
            int64_t ctx_param_ext_tmp_21241 = ctx_param_ext_19806;
            int64_t ctx_param_ext_tmp_21242 = ctx_param_ext_19807;
            int64_t ctx_param_ext_tmp_21243 = ctx_param_ext_19809;
            int64_t ctx_param_ext_tmp_21244 = ctx_param_ext_19810;
            int64_t ctx_param_ext_tmp_21245 = ctx_param_ext_19811;
            int64_t ctx_param_ext_tmp_21246 = ctx_param_ext_19812;
            int64_t ctx_param_ext_tmp_21247 = ctx_param_ext_19794;
            int64_t ctx_param_ext_tmp_21248 = ctx_param_ext_19795;
            int64_t ctx_param_ext_tmp_21249 = ctx_param_ext_19796;
            int64_t ctx_param_ext_tmp_21250 = ctx_param_ext_19797;
            int64_t ctx_param_ext_tmp_21251 = ctx_param_ext_19799;
            int64_t ctx_param_ext_tmp_21252 = ctx_param_ext_19800;
            int64_t ctx_param_ext_tmp_21253 = ctx_param_ext_19801;
            int64_t ctx_param_ext_tmp_21254 = ctx_param_ext_19802;
            
            if (memblock_set(ctx, &mem_param_tmp_21255, &mem_param_19808,
                             "mem_param_19808") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21256, &mem_param_19813,
                             "mem_param_19813") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21257, &mem_param_19798,
                             "mem_param_19798") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21258, &mem_param_19803,
                             "mem_param_19803") != 0)
                return 1;
            ctx_param_ext_19794 = ctx_param_ext_tmp_21239;
            ctx_param_ext_19795 = ctx_param_ext_tmp_21240;
            ctx_param_ext_19796 = ctx_param_ext_tmp_21241;
            ctx_param_ext_19797 = ctx_param_ext_tmp_21242;
            ctx_param_ext_19799 = ctx_param_ext_tmp_21243;
            ctx_param_ext_19800 = ctx_param_ext_tmp_21244;
            ctx_param_ext_19801 = ctx_param_ext_tmp_21245;
            ctx_param_ext_19802 = ctx_param_ext_tmp_21246;
            ctx_param_ext_19804 = ctx_param_ext_tmp_21247;
            ctx_param_ext_19805 = ctx_param_ext_tmp_21248;
            ctx_param_ext_19806 = ctx_param_ext_tmp_21249;
            ctx_param_ext_19807 = ctx_param_ext_tmp_21250;
            ctx_param_ext_19809 = ctx_param_ext_tmp_21251;
            ctx_param_ext_19810 = ctx_param_ext_tmp_21252;
            ctx_param_ext_19811 = ctx_param_ext_tmp_21253;
            ctx_param_ext_19812 = ctx_param_ext_tmp_21254;
            if (memblock_set(ctx, &mem_param_19798, &mem_param_tmp_21255,
                             "mem_param_tmp_21255") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19803, &mem_param_tmp_21256,
                             "mem_param_tmp_21256") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19808, &mem_param_tmp_21257,
                             "mem_param_tmp_21257") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19813, &mem_param_tmp_21258,
                             "mem_param_tmp_21258") != 0)
                return 1;
        }
        ext_19966 = ctx_param_ext_19794;
        ext_19965 = ctx_param_ext_19795;
        ext_19964 = ctx_param_ext_19796;
        ext_19963 = ctx_param_ext_19797;
        ext_19962 = ctx_param_ext_19799;
        ext_19961 = ctx_param_ext_19800;
        ext_19960 = ctx_param_ext_19801;
        ext_19959 = ctx_param_ext_19802;
        ext_19958 = ctx_param_ext_19804;
        ext_19957 = ctx_param_ext_19805;
        ext_19956 = ctx_param_ext_19806;
        ext_19955 = ctx_param_ext_19807;
        ext_19954 = ctx_param_ext_19809;
        ext_19953 = ctx_param_ext_19810;
        ext_19952 = ctx_param_ext_19811;
        ext_19951 = ctx_param_ext_19812;
        if (memblock_set(ctx, &ext_mem_19950, &mem_param_19798,
                         "mem_param_19798") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19949, &mem_param_19803,
                         "mem_param_19803") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19948, &mem_param_19808,
                         "mem_param_19808") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_19947, &mem_param_19813,
                         "mem_param_19813") != 0)
            return 1;
        for (int64_t i_21272 = 0; i_21272 < n_11006; i_21272++) {
            float tmp_21273;
            
            tmp_21273 = ((float *) mem_18734)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21272 * m_11007];
            ((float *) mem_19969.mem)[i_21272] = tmp_21273;
        }
        for (int64_t i_21274 = 0; i_21274 < n_11006; i_21274++) {
            float tmp_21275;
            
            tmp_21275 = ((float *) mem_18738)[(int64_t) 0 + i_16879 *
                                              (int64_t) 1 + i_21274 * m_11007];
            ((float *) mem_19972.mem)[i_21274] = tmp_21275;
        }
        
        int64_t ext_20145;
        int64_t ext_20144;
        int64_t ext_20143;
        int64_t ext_20142;
        int64_t ext_20141;
        int64_t ext_20140;
        int64_t ext_20139;
        int64_t ext_20138;
        int64_t ext_20137;
        int64_t ext_20136;
        int64_t ext_20135;
        int64_t ext_20134;
        int64_t ext_20133;
        int64_t ext_20132;
        int64_t ext_20131;
        int64_t ext_20130;
        int64_t ctx_param_ext_19973;
        int64_t ctx_param_ext_19974;
        int64_t ctx_param_ext_19975;
        int64_t ctx_param_ext_19976;
        int64_t ctx_param_ext_19978;
        int64_t ctx_param_ext_19979;
        int64_t ctx_param_ext_19980;
        int64_t ctx_param_ext_19981;
        int64_t ctx_param_ext_19983;
        int64_t ctx_param_ext_19984;
        int64_t ctx_param_ext_19985;
        int64_t ctx_param_ext_19986;
        int64_t ctx_param_ext_19988;
        int64_t ctx_param_ext_19989;
        int64_t ctx_param_ext_19990;
        int64_t ctx_param_ext_19991;
        
        ctx_param_ext_19973 = n_11006;
        ctx_param_ext_19974 = (int64_t) 0;
        ctx_param_ext_19975 = (int64_t) 1;
        ctx_param_ext_19976 = n_11006;
        ctx_param_ext_19978 = n_11006;
        ctx_param_ext_19979 = (int64_t) 0;
        ctx_param_ext_19980 = (int64_t) 1;
        ctx_param_ext_19981 = n_11006;
        ctx_param_ext_19983 = n_11006;
        ctx_param_ext_19984 = (int64_t) 0;
        ctx_param_ext_19985 = (int64_t) 1;
        ctx_param_ext_19986 = n_11006;
        ctx_param_ext_19988 = n_11006;
        ctx_param_ext_19989 = (int64_t) 0;
        ctx_param_ext_19990 = (int64_t) 1;
        ctx_param_ext_19991 = n_11006;
        if (memblock_set(ctx, &mem_param_19977, &mem_19605, "mem_19605") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19982, &mem_19608, "mem_19608") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19987, &mem_19969, "mem_19969") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_19992, &mem_19972, "mem_19972") != 0)
            return 1;
        
        int32_t ns_16175;
        
        for (int64_t i_16170 = 0; i_16170 < i32_res_16142; i_16170++) {
            ns_16175 = ((int32_t *) mem_19479)[i_16170];
            for (int64_t i_16833 = 0; i_16833 < iota_arg_14817; i_16833++) {
                int32_t defunc_0_f_res_16178 = sext_i64_i32(i_16833);
                
                ((int32_t *) mem_20003)[i_16833] = defunc_0_f_res_16178;
            }
            
            int32_t i32_arg_16179 = mul32(2, ns_16175);
            float i32_res_16180 = sitofp_i32_f32(i32_arg_16179);
            bool zzero_16181 = ns_16175 == 0;
            bool nonzzero_16182 = !zzero_16181;
            bool nonzzero_cert_16183;
            
            if (!nonzzero_16182) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "division by zero",
                                       "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:22:57-62\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            for (int64_t i_16847 = 0; i_16847 < iota_arg_14817; i_16847++) {
                int32_t x_16190;
                
                x_16190 = ((int32_t *) mem_20003)[i_16847];
                
                int32_t i32_arg_16191 = smod32(x_16190, ns_16175);
                float i32_res_16192 = sitofp_i32_f32(i32_arg_16191);
                float zt_res_16193 = 6.2831855F * i32_res_16192;
                float zs_res_16194 = zt_res_16193 / i32_res_16180;
                int64_t j_16195 = sext_i32_i64(x_16190);
                bool x_16196 = sle64((int64_t) 0, j_16195);
                bool y_16197 = slt64(j_16195, n_11006);
                bool bounds_check_16198 = x_16196 && y_16197;
                bool index_certs_16199;
                
                if (!bounds_check_16198) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) j_16195,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:23:21-27\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float defunc_0_f_res_16200;
                
                defunc_0_f_res_16200 =
                    ((float *) mem_param_19977.mem)[ctx_param_ext_19974 +
                                                    j_16195 *
                                                    ctx_param_ext_19975];
                
                float defunc_0_f_res_16201;
                
                defunc_0_f_res_16201 =
                    ((float *) mem_param_19982.mem)[ctx_param_ext_19979 +
                                                    j_16195 *
                                                    ctx_param_ext_19980];
                
                float sin_res_16202;
                
                sin_res_16202 = futrts_sin32(zs_res_16194);
                
                float cos_res_16203;
                
                cos_res_16203 = futrts_cos32(zs_res_16194);
                
                int32_t i_16204 = add32(y_14836, x_16190);
                int64_t i_16205 = sext_i32_i64(i_16204);
                bool x_16206 = sle64((int64_t) 0, i_16205);
                bool y_16207 = slt64(i_16205, n_11006);
                bool bounds_check_16208 = x_16206 && y_16207;
                bool index_certs_16209;
                
                if (!bounds_check_16208) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_16205,
                                  "] out of bounds for array of shape [",
                                  (long long) n_11006, "].",
                                  "-> #0  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:24:21-43\n   #1  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:39:19-72\n   #2  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:35-56\n   #3  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:81:24-74\n   #4  sample_programs/lib/github.com/diku-dk/fft/stockham-radix-2.fut:89:41-63\n   #5  sample_programs/fft.fut:46:17-34\n   #6  sample_programs/fft.fut:63:12-29\n   #7  sample_programs/fft.fut:59:1-64:17\n");
                    err = FUTHARK_PROGRAM_ERROR;
                    goto cleanup;
                }
                
                float zt_arg_16210;
                
                zt_arg_16210 =
                    ((float *) mem_param_19977.mem)[ctx_param_ext_19974 +
                                                    i_16205 *
                                                    ctx_param_ext_19975];
                
                float zt_arg_16211;
                
                zt_arg_16211 =
                    ((float *) mem_param_19982.mem)[ctx_param_ext_19979 +
                                                    i_16205 *
                                                    ctx_param_ext_19980];
                
                float zt_res_16212 = sin_res_16202 * zt_arg_16211;
                float zt_res_16213 = cos_res_16203 * zt_arg_16210;
                float zm_res_16214 = zt_res_16213 - zt_res_16212;
                float zt_res_16215 = sin_res_16202 * zt_arg_16210;
                float zt_res_16216 = cos_res_16203 * zt_arg_16211;
                float zp_res_16217 = zt_res_16215 + zt_res_16216;
                float zp_res_16218 = defunc_0_f_res_16200 + zm_res_16214;
                float zp_res_16219 = defunc_0_f_res_16201 + zp_res_16217;
                float zm_res_16220 = defunc_0_f_res_16200 - zm_res_16214;
                float zm_res_16221 = defunc_0_f_res_16201 - zp_res_16217;
                int32_t x_16222 = sdiv32(x_16190, ns_16175);
                int32_t x_16223 = mul32(ns_16175, x_16222);
                int32_t x_16224 = mul32(2, x_16223);
                int32_t idxD_16225 = add32(i32_arg_16191, x_16224);
                int64_t i32_res_16226 = sext_i32_i64(idxD_16225);
                int32_t i32_arg_16227 = add32(ns_16175, idxD_16225);
                int64_t i32_res_16228 = sext_i32_i64(i32_arg_16227);
                
                ((int64_t *) mem_20018)[i_16847] = i32_res_16226;
                ((float *) mem_20021)[i_16847] = zp_res_16218;
                ((float *) mem_20024)[i_16847] = zp_res_16219;
                ((int64_t *) mem_20027)[i_16847] = i32_res_16228;
                ((float *) mem_20030)[i_16847] = zm_res_16220;
                ((float *) mem_20033)[i_16847] = zm_res_16221;
            }
            for (int64_t write_iter_16854 = 0; write_iter_16854 <
                 iota_arg_14817; write_iter_16854++) {
                int64_t write_iv_16857;
                
                write_iv_16857 = ((int64_t *) mem_20018)[write_iter_16854];
                
                int64_t write_iv_16860;
                
                write_iv_16860 = ((int64_t *) mem_20027)[write_iter_16854];
                if (sle64((int64_t) 0, write_iv_16857) && slt64(write_iv_16857,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19987.mem + (ctx_param_ext_19984 +
                                                       ctx_param_ext_19985 *
                                                       write_iv_16857) *
                                (int64_t) 4, mem_20021 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16860) && slt64(write_iv_16860,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19987.mem + (ctx_param_ext_19984 +
                                                       ctx_param_ext_19985 *
                                                       write_iv_16860) *
                                (int64_t) 4, mem_20030 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16857) && slt64(write_iv_16857,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19992.mem + (ctx_param_ext_19989 +
                                                       ctx_param_ext_19990 *
                                                       write_iv_16857) *
                                (int64_t) 4, mem_20024 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
                if (sle64((int64_t) 0, write_iv_16860) && slt64(write_iv_16860,
                                                                n_11006)) {
                    if ((int64_t) 4 > 0)
                        memmove(mem_param_19992.mem + (ctx_param_ext_19989 +
                                                       ctx_param_ext_19990 *
                                                       write_iv_16860) *
                                (int64_t) 4, mem_20033 + ((int64_t) 0 +
                                                          (int64_t) 1 *
                                                          write_iter_16854) *
                                (int64_t) 4, (int64_t) 4);
                }
            }
            
            int64_t ctx_param_ext_tmp_21276 = ctx_param_ext_19983;
            int64_t ctx_param_ext_tmp_21277 = ctx_param_ext_19984;
            int64_t ctx_param_ext_tmp_21278 = ctx_param_ext_19985;
            int64_t ctx_param_ext_tmp_21279 = ctx_param_ext_19986;
            int64_t ctx_param_ext_tmp_21280 = ctx_param_ext_19988;
            int64_t ctx_param_ext_tmp_21281 = ctx_param_ext_19989;
            int64_t ctx_param_ext_tmp_21282 = ctx_param_ext_19990;
            int64_t ctx_param_ext_tmp_21283 = ctx_param_ext_19991;
            int64_t ctx_param_ext_tmp_21284 = ctx_param_ext_19973;
            int64_t ctx_param_ext_tmp_21285 = ctx_param_ext_19974;
            int64_t ctx_param_ext_tmp_21286 = ctx_param_ext_19975;
            int64_t ctx_param_ext_tmp_21287 = ctx_param_ext_19976;
            int64_t ctx_param_ext_tmp_21288 = ctx_param_ext_19978;
            int64_t ctx_param_ext_tmp_21289 = ctx_param_ext_19979;
            int64_t ctx_param_ext_tmp_21290 = ctx_param_ext_19980;
            int64_t ctx_param_ext_tmp_21291 = ctx_param_ext_19981;
            
            if (memblock_set(ctx, &mem_param_tmp_21292, &mem_param_19987,
                             "mem_param_19987") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21293, &mem_param_19992,
                             "mem_param_19992") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21294, &mem_param_19977,
                             "mem_param_19977") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_tmp_21295, &mem_param_19982,
                             "mem_param_19982") != 0)
                return 1;
            ctx_param_ext_19973 = ctx_param_ext_tmp_21276;
            ctx_param_ext_19974 = ctx_param_ext_tmp_21277;
            ctx_param_ext_19975 = ctx_param_ext_tmp_21278;
            ctx_param_ext_19976 = ctx_param_ext_tmp_21279;
            ctx_param_ext_19978 = ctx_param_ext_tmp_21280;
            ctx_param_ext_19979 = ctx_param_ext_tmp_21281;
            ctx_param_ext_19980 = ctx_param_ext_tmp_21282;
            ctx_param_ext_19981 = ctx_param_ext_tmp_21283;
            ctx_param_ext_19983 = ctx_param_ext_tmp_21284;
            ctx_param_ext_19984 = ctx_param_ext_tmp_21285;
            ctx_param_ext_19985 = ctx_param_ext_tmp_21286;
            ctx_param_ext_19986 = ctx_param_ext_tmp_21287;
            ctx_param_ext_19988 = ctx_param_ext_tmp_21288;
            ctx_param_ext_19989 = ctx_param_ext_tmp_21289;
            ctx_param_ext_19990 = ctx_param_ext_tmp_21290;
            ctx_param_ext_19991 = ctx_param_ext_tmp_21291;
            if (memblock_set(ctx, &mem_param_19977, &mem_param_tmp_21292,
                             "mem_param_tmp_21292") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19982, &mem_param_tmp_21293,
                             "mem_param_tmp_21293") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19987, &mem_param_tmp_21294,
                             "mem_param_tmp_21294") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_19992, &mem_param_tmp_21295,
                             "mem_param_tmp_21295") != 0)
                return 1;
        }
        ext_20145 = ctx_param_ext_19973;
        ext_20144 = ctx_param_ext_19974;
        ext_20143 = ctx_param_ext_19975;
        ext_20142 = ctx_param_ext_19976;
        ext_20141 = ctx_param_ext_19978;
        ext_20140 = ctx_param_ext_19979;
        ext_20139 = ctx_param_ext_19980;
        ext_20138 = ctx_param_ext_19981;
        ext_20137 = ctx_param_ext_19983;
        ext_20136 = ctx_param_ext_19984;
        ext_20135 = ctx_param_ext_19985;
        ext_20134 = ctx_param_ext_19986;
        ext_20133 = ctx_param_ext_19988;
        ext_20132 = ctx_param_ext_19989;
        ext_20131 = ctx_param_ext_19990;
        ext_20130 = ctx_param_ext_19991;
        if (memblock_set(ctx, &ext_mem_20129, &mem_param_19977,
                         "mem_param_19977") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20128, &mem_param_19982,
                         "mem_param_19982") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20127, &mem_param_19987,
                         "mem_param_19987") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_20126, &mem_param_19992,
                         "mem_param_19992") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19510 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_19771.mem + ext_19786 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19771, "ext_mem_19771") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19514 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_19770.mem + ext_19782 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19770, "ext_mem_19770") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19518 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_19950.mem + ext_19965 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19950, "ext_mem_19950") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19522 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_19949.mem + ext_19961 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_19949, "ext_mem_19949") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19526 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_20129.mem + ext_20144 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_20129, "ext_mem_20129") != 0)
            return 1;
        if (n_11006 * (int64_t) 4 > 0)
            memmove(mem_19530 + i_16879 * n_11006 * (int64_t) 4,
                    ext_mem_20128.mem + ext_20140 * (int64_t) 4, n_11006 *
                    (int64_t) 4);
        if (memblock_unref(ctx, &ext_mem_20128, "ext_mem_20128") != 0)
            return 1;
    }
    if (memblock_unref(ctx, &mem_19593, "mem_19593") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19596, "mem_19596") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19599, "mem_19599") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19602, "mem_19602") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19605, "mem_19605") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19608, "mem_19608") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19611, "mem_19611") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19614, "mem_19614") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19790, "mem_19790") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19793, "mem_19793") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19969, "mem_19969") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_19972, "mem_19972") != 0)
        return 1;
    
    float zt_res_15167 = i64_res_14952 * i64_res_14952;
    
    if (mem_20197_cached_sizze_21592 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_20197,
                              &mem_20197_cached_sizze_21592, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20201_cached_sizze_21593 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_20201,
                              &mem_20201_cached_sizze_21593, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20205_cached_sizze_21594 < bytes_17136) {
        err = lexical_realloc(&ctx->error, &mem_20205,
                              &mem_20205_cached_sizze_21594, bytes_17136);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20238_cached_sizze_21595 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20238,
                              &mem_20238_cached_sizze_21595, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20241_cached_sizze_21596 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20241,
                              &mem_20241_cached_sizze_21596, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20293_cached_sizze_21597 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20293,
                              &mem_20293_cached_sizze_21597, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20296_cached_sizze_21598 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20296,
                              &mem_20296_cached_sizze_21598, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20348_cached_sizze_21599 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20348,
                              &mem_20348_cached_sizze_21599, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_20351_cached_sizze_21600 < bytes_17117) {
        err = lexical_realloc(&ctx->error, &mem_20351,
                              &mem_20351_cached_sizze_21600, bytes_17117);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_16931 = 0; i_16931 < n_11006; i_16931++) {
        for (int64_t i_16896 = 0; i_16896 < m_11007; i_16896++) {
            float x_15174;
            
            x_15174 = ((float *) mem_19510)[i_16896 * n_11006 + i_16931];
            
            float x_15175;
            
            x_15175 = ((float *) mem_19514)[i_16896 * n_11006 + i_16931];
            
            float zt_res_15176 = i64_res_14952 * x_15174;
            float zs_res_15177 = zt_res_15176 / zt_res_15167;
            float zt_res_15178 = i64_res_14952 * x_15175;
            float zs_res_15179 = zt_res_15178 / zt_res_15167;
            
            ((float *) mem_20238)[i_16896] = zs_res_15177;
            ((float *) mem_20241)[i_16896] = zs_res_15179;
        }
        for (int64_t i_16901 = 0; i_16901 < m_11007; i_16901++) {
            float x_15184;
            
            x_15184 = ((float *) mem_20238)[i_16901];
            
            float x_15185;
            
            x_15185 = ((float *) mem_20241)[i_16901];
            
            float zt_res_15186 = x_15185 * x_15185;
            float zt_res_15187 = x_15184 * x_15184;
            float zp_res_15188 = zt_res_15186 + zt_res_15187;
            float sqrt_res_15189;
            
            sqrt_res_15189 = futrts_sqrt32(zp_res_15188);
            ((float *) mem_20197)[i_16931 * m_11007 + i_16901] = sqrt_res_15189;
        }
        for (int64_t i_16907 = 0; i_16907 < m_11007; i_16907++) {
            float x_15710;
            
            x_15710 = ((float *) mem_19518)[i_16907 * n_11006 + i_16931];
            
            float x_15711;
            
            x_15711 = ((float *) mem_19522)[i_16907 * n_11006 + i_16931];
            
            float zt_res_15712 = i64_res_14952 * x_15710;
            float zs_res_15713 = zt_res_15712 / zt_res_15167;
            float zt_res_15714 = i64_res_14952 * x_15711;
            float zs_res_15715 = zt_res_15714 / zt_res_15167;
            
            ((float *) mem_20293)[i_16907] = zs_res_15713;
            ((float *) mem_20296)[i_16907] = zs_res_15715;
        }
        for (int64_t i_16912 = 0; i_16912 < m_11007; i_16912++) {
            float x_15720;
            
            x_15720 = ((float *) mem_20293)[i_16912];
            
            float x_15721;
            
            x_15721 = ((float *) mem_20296)[i_16912];
            
            float zt_res_15722 = x_15721 * x_15721;
            float zt_res_15723 = x_15720 * x_15720;
            float zp_res_15724 = zt_res_15722 + zt_res_15723;
            float sqrt_res_15725;
            
            sqrt_res_15725 = futrts_sqrt32(zp_res_15724);
            ((float *) mem_20201)[i_16931 * m_11007 + i_16912] = sqrt_res_15725;
        }
        for (int64_t i_16918 = 0; i_16918 < m_11007; i_16918++) {
            float x_16246;
            
            x_16246 = ((float *) mem_19526)[i_16918 * n_11006 + i_16931];
            
            float x_16247;
            
            x_16247 = ((float *) mem_19530)[i_16918 * n_11006 + i_16931];
            
            float zt_res_16248 = i64_res_14952 * x_16246;
            float zs_res_16249 = zt_res_16248 / zt_res_15167;
            float zt_res_16250 = i64_res_14952 * x_16247;
            float zs_res_16251 = zt_res_16250 / zt_res_15167;
            
            ((float *) mem_20348)[i_16918] = zs_res_16249;
            ((float *) mem_20351)[i_16918] = zs_res_16251;
        }
        for (int64_t i_16923 = 0; i_16923 < m_11007; i_16923++) {
            float x_16256;
            
            x_16256 = ((float *) mem_20348)[i_16923];
            
            float x_16257;
            
            x_16257 = ((float *) mem_20351)[i_16923];
            
            float zt_res_16258 = x_16257 * x_16257;
            float zt_res_16259 = x_16256 * x_16256;
            float zp_res_16260 = zt_res_16258 + zt_res_16259;
            float sqrt_res_16261;
            
            sqrt_res_16261 = futrts_sqrt32(zp_res_16260);
            ((float *) mem_20205)[i_16931 * m_11007 + i_16923] = sqrt_res_16261;
        }
    }
    if (memblock_alloc(ctx, &mem_20428, bytes_17136, "mem_20428")) {
        err = 1;
        goto cleanup;
    }
    if (n_11006 * m_11007 * (int64_t) 4 > 0)
        memmove(mem_20428.mem + (int64_t) 0, mem_20197 + (int64_t) 0, n_11006 *
                m_11007 * (int64_t) 4);
    if (memblock_alloc(ctx, &mem_20433, bytes_17136, "mem_20433")) {
        err = 1;
        goto cleanup;
    }
    if (n_11006 * m_11007 * (int64_t) 4 > 0)
        memmove(mem_20433.mem + (int64_t) 0, mem_20201 + (int64_t) 0, n_11006 *
                m_11007 * (int64_t) 4);
    if (memblock_alloc(ctx, &mem_20438, bytes_17136, "mem_20438")) {
        err = 1;
        goto cleanup;
    }
    if (n_11006 * m_11007 * (int64_t) 4 > 0)
        memmove(mem_20438.mem + (int64_t) 0, mem_20205 + (int64_t) 0, n_11006 *
                m_11007 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_20773, &mem_20428, "mem_20428") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_20774, &mem_20433, "mem_20433") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_20775, &mem_20438, "mem_20438") != 0)
        return 1;
    (*mem_out_p_21461).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_21461, &mem_out_20773, "mem_out_20773") !=
        0)
        return 1;
    (*mem_out_p_21462).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_21462, &mem_out_20774, "mem_out_20774") !=
        0)
        return 1;
    (*mem_out_p_21463).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_21463, &mem_out_20775, "mem_out_20775") !=
        0)
        return 1;
    
  cleanup:
    {
        free(mem_17073);
        free(mem_17088);
        free(mem_17103);
        free(mem_17118);
        free(mem_17133);
        free(mem_17137);
        free(mem_17141);
        free(mem_17145);
        free(mem_17149);
        free(mem_17153);
        free(mem_17157);
        free(mem_17228);
        free(mem_17230);
        free(mem_17232);
        free(mem_17271);
        free(mem_17286);
        free(mem_17301);
        free(mem_17393);
        free(mem_17408);
        free(mem_17411);
        free(mem_17414);
        free(mem_17417);
        free(mem_17420);
        free(mem_17423);
        free(mem_17570);
        free(mem_17585);
        free(mem_17588);
        free(mem_17591);
        free(mem_17594);
        free(mem_17597);
        free(mem_17600);
        free(mem_17747);
        free(mem_17762);
        free(mem_17765);
        free(mem_17768);
        free(mem_17771);
        free(mem_17774);
        free(mem_17777);
        free(mem_17940);
        free(mem_17955);
        free(mem_17970);
        free(mem_17986);
        free(mem_17990);
        free(mem_17994);
        free(mem_17998);
        free(mem_18002);
        free(mem_18006);
        free(mem_18121);
        free(mem_18136);
        free(mem_18139);
        free(mem_18142);
        free(mem_18145);
        free(mem_18148);
        free(mem_18151);
        free(mem_18300);
        free(mem_18315);
        free(mem_18318);
        free(mem_18321);
        free(mem_18324);
        free(mem_18327);
        free(mem_18330);
        free(mem_18479);
        free(mem_18494);
        free(mem_18497);
        free(mem_18500);
        free(mem_18503);
        free(mem_18506);
        free(mem_18509);
        free(mem_18672);
        free(mem_18687);
        free(mem_18702);
        free(mem_18718);
        free(mem_18722);
        free(mem_18726);
        free(mem_18730);
        free(mem_18734);
        free(mem_18738);
        free(mem_18861);
        free(mem_18876);
        free(mem_18879);
        free(mem_18882);
        free(mem_18885);
        free(mem_18888);
        free(mem_18891);
        free(mem_19066);
        free(mem_19081);
        free(mem_19084);
        free(mem_19087);
        free(mem_19090);
        free(mem_19093);
        free(mem_19096);
        free(mem_19271);
        free(mem_19286);
        free(mem_19289);
        free(mem_19292);
        free(mem_19295);
        free(mem_19298);
        free(mem_19301);
        free(mem_19464);
        free(mem_19479);
        free(mem_19494);
        free(mem_19510);
        free(mem_19514);
        free(mem_19518);
        free(mem_19522);
        free(mem_19526);
        free(mem_19530);
        free(mem_19645);
        free(mem_19660);
        free(mem_19663);
        free(mem_19666);
        free(mem_19669);
        free(mem_19672);
        free(mem_19675);
        free(mem_19824);
        free(mem_19839);
        free(mem_19842);
        free(mem_19845);
        free(mem_19848);
        free(mem_19851);
        free(mem_19854);
        free(mem_20003);
        free(mem_20018);
        free(mem_20021);
        free(mem_20024);
        free(mem_20027);
        free(mem_20030);
        free(mem_20033);
        free(mem_20197);
        free(mem_20201);
        free(mem_20205);
        free(mem_20238);
        free(mem_20241);
        free(mem_20293);
        free(mem_20296);
        free(mem_20348);
        free(mem_20351);
        if (memblock_unref(ctx, &mem_20438, "mem_20438") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_20433, "mem_20433") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_20428, "mem_20428") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21295, "mem_param_tmp_21295") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21294, "mem_param_tmp_21294") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21293, "mem_param_tmp_21293") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21292, "mem_param_tmp_21292") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19992, "mem_param_19992") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19987, "mem_param_19987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19982, "mem_param_19982") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19977, "mem_param_19977") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20126, "ext_mem_20126") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20127, "ext_mem_20127") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20128, "ext_mem_20128") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_20129, "ext_mem_20129") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21258, "mem_param_tmp_21258") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21257, "mem_param_tmp_21257") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21256, "mem_param_tmp_21256") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21255, "mem_param_tmp_21255") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19813, "mem_param_19813") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19808, "mem_param_19808") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19803, "mem_param_19803") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19798, "mem_param_19798") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19947, "ext_mem_19947") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19948, "ext_mem_19948") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19949, "ext_mem_19949") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19950, "ext_mem_19950") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21221, "mem_param_tmp_21221") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21220, "mem_param_tmp_21220") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21219, "mem_param_tmp_21219") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21218, "mem_param_tmp_21218") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19634, "mem_param_19634") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19629, "mem_param_19629") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19624, "mem_param_19624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19619, "mem_param_19619") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19768, "ext_mem_19768") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19769, "ext_mem_19769") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19770, "ext_mem_19770") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19771, "ext_mem_19771") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19972, "mem_19972") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19969, "mem_19969") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19793, "mem_19793") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19790, "mem_19790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19614, "mem_19614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19611, "mem_19611") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19608, "mem_19608") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19605, "mem_19605") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19602, "mem_19602") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19599, "mem_19599") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19596, "mem_19596") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19593, "mem_19593") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21154, "mem_param_tmp_21154") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21153, "mem_param_tmp_21153") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21152, "mem_param_tmp_21152") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21151, "mem_param_tmp_21151") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19264, "mem_param_19264") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19259, "mem_param_19259") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19254, "mem_param_19254") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19249, "mem_param_19249") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19394, "ext_mem_19394") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19395, "ext_mem_19395") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19396, "ext_mem_19396") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19397, "ext_mem_19397") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21119, "mem_param_tmp_21119") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21118, "mem_param_tmp_21118") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21117, "mem_param_tmp_21117") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21116, "mem_param_tmp_21116") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19059, "mem_param_19059") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19054, "mem_param_19054") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19049, "mem_param_19049") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_19044, "mem_param_19044") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19189, "ext_mem_19189") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19190, "ext_mem_19190") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19191, "ext_mem_19191") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_19192, "ext_mem_19192") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21084, "mem_param_tmp_21084") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21083, "mem_param_tmp_21083") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21082, "mem_param_tmp_21082") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21081, "mem_param_tmp_21081") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18854, "mem_param_18854") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18849, "mem_param_18849") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18844, "mem_param_18844") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18839, "mem_param_18839") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18984, "ext_mem_18984") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18985, "ext_mem_18985") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18986, "ext_mem_18986") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18987, "ext_mem_18987") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19244, "mem_19244") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19241, "mem_19241") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19214, "mem_19214") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19211, "mem_19211") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19039, "mem_19039") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19036, "mem_19036") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19009, "mem_19009") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_19006, "mem_19006") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18834, "mem_18834") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18831, "mem_18831") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18804, "mem_18804") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18801, "mem_18801") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21031, "mem_param_tmp_21031") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21030, "mem_param_tmp_21030") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21029, "mem_param_tmp_21029") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_21028, "mem_param_tmp_21028") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18468, "mem_param_18468") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18463, "mem_param_18463") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18458, "mem_param_18458") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18453, "mem_param_18453") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18602, "ext_mem_18602") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18603, "ext_mem_18603") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18604, "ext_mem_18604") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18605, "ext_mem_18605") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20994, "mem_param_tmp_20994") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20993, "mem_param_tmp_20993") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20992, "mem_param_tmp_20992") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20991, "mem_param_tmp_20991") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18289, "mem_param_18289") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18284, "mem_param_18284") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18279, "mem_param_18279") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18274, "mem_param_18274") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18423, "ext_mem_18423") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18424, "ext_mem_18424") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18425, "ext_mem_18425") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18426, "ext_mem_18426") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20957, "mem_param_tmp_20957") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20956, "mem_param_tmp_20956") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20955, "mem_param_tmp_20955") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20954, "mem_param_tmp_20954") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18110, "mem_param_18110") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18105, "mem_param_18105") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18100, "mem_param_18100") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_18095, "mem_param_18095") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18244, "ext_mem_18244") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18245, "ext_mem_18245") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18246, "ext_mem_18246") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_18247, "ext_mem_18247") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18448, "mem_18448") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18445, "mem_18445") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18269, "mem_18269") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18266, "mem_18266") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18090, "mem_18090") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18087, "mem_18087") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18084, "mem_18084") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18081, "mem_18081") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18078, "mem_18078") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18075, "mem_18075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18072, "mem_18072") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_18069, "mem_18069") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20890, "mem_param_tmp_20890") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20889, "mem_param_tmp_20889") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20888, "mem_param_tmp_20888") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20887, "mem_param_tmp_20887") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17738, "mem_param_17738") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17733, "mem_param_17733") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17728, "mem_param_17728") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17723, "mem_param_17723") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17870, "ext_mem_17870") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17871, "ext_mem_17871") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17872, "ext_mem_17872") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17873, "ext_mem_17873") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20857, "mem_param_tmp_20857") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20856, "mem_param_tmp_20856") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20855, "mem_param_tmp_20855") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20854, "mem_param_tmp_20854") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17561, "mem_param_17561") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17556, "mem_param_17556") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17551, "mem_param_17551") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17546, "mem_param_17546") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17693, "ext_mem_17693") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17694, "ext_mem_17694") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17695, "ext_mem_17695") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17696, "ext_mem_17696") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20824, "mem_param_tmp_20824") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20823, "mem_param_tmp_20823") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20822, "mem_param_tmp_20822") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_20821, "mem_param_tmp_20821") !=
            0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17384, "mem_param_17384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17379, "mem_param_17379") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17374, "mem_param_17374") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_17369, "mem_param_17369") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17516, "ext_mem_17516") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17517, "ext_mem_17517") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17518, "ext_mem_17518") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_17519, "ext_mem_17519") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17718, "mem_17718") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17715, "mem_17715") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17541, "mem_17541") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17538, "mem_17538") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17364, "mem_17364") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17361, "mem_17361") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17346, "mem_17346") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17331, "mem_17331") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17316, "mem_17316") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17226, "mem_17226") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17223, "mem_17223") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_17220, "mem_17220") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_20775, "mem_out_20775") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_20774, "mem_out_20774") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_20773, "mem_out_20773") != 0)
            return 1;
    }
    return err;
}

int futhark_entry_highpass_filter(struct futhark_context *ctx,
                                  struct futhark_u8_3d **out0, const
                                  int32_t in0, const struct futhark_u8_3d *in1)
{
    int64_t n_11475;
    int64_t m_11476;
    int32_t cutoff_11477;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_20773;
    
    mem_out_20773.references = NULL;
    
    struct memblock img_mem_17070;
    
    img_mem_17070.references = NULL;
    cutoff_11477 = in0;
    img_mem_17070 = in1->mem;
    n_11475 = in1->shape[0];
    m_11476 = in1->shape[1];
    if (!(n_11475 == in1->shape[0] && (m_11476 == in1->shape[1] &&
                                       (int64_t) 3 == in1->shape[2]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_highpass_filter(ctx, &mem_out_20773, img_mem_17070,
                                           n_11475, m_11476, cutoff_11477);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_u8_3d *) malloc(sizeof(struct futhark_u8_3d))) !=
                NULL);
            (*out0)->mem = mem_out_20773;
            (*out0)->shape[0] = n_11475;
            (*out0)->shape[1] = m_11476;
            (*out0)->shape[2] = (int64_t) 3;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const int32_t in0, const
                       struct futhark_u8_3d *in1)
{
    int64_t n_11006;
    int64_t m_11007;
    int32_t cutoff_11008;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_20775;
    
    mem_out_20775.references = NULL;
    
    struct memblock mem_out_20774;
    
    mem_out_20774.references = NULL;
    
    struct memblock mem_out_20773;
    
    mem_out_20773.references = NULL;
    
    struct memblock img_mem_17070;
    
    img_mem_17070.references = NULL;
    cutoff_11008 = in0;
    img_mem_17070 = in1->mem;
    n_11006 = in1->shape[0];
    m_11007 = in1->shape[1];
    if (!(n_11006 == in1->shape[0] && (m_11007 == in1->shape[1] &&
                                       (int64_t) 3 == in1->shape[2]))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_20773, &mem_out_20774,
                                &mem_out_20775, img_mem_17070, n_11006, m_11007,
                                cutoff_11008);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_20773;
            (*out0)->shape[0] = n_11006;
            (*out0)->shape[1] = m_11007;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_20774;
            (*out1)->shape[0] = n_11006;
            (*out1)->shape[1] = m_11007;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_20775;
            (*out2)->shape[0] = n_11006;
            (*out2)->shape[1] = m_11007;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
